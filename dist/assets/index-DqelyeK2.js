(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function $e(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ss(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mi(e){let t,n,r;e.length!==2?(t=$e,n=(a,u)=>$e(e(a),u),r=(a,u)=>e(a)-u):(t=e===$e||e===ss?e:as,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const p=l+c>>>1;n(a[p],u)<0?l=p+1:c=p}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const p=l+c>>>1;n(a[p],u)<=0?l=p+1:c=p}while(l<c)}return l}function s(a,u,l=0,c=a.length){const p=i(a,u,l,c-1);return p>l&&r(a[p-1],u)>-r(a[p],u)?p-1:p}return{left:i,center:s,right:o}}function as(){return 0}function ls(e){return e===null?NaN:+e}const us=Mi($e),cs=us.right;Mi(ls).center;const ps=Math.sqrt(50),hs=Math.sqrt(10),ds=Math.sqrt(2);function He(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=ps?10:o>=hs?5:o>=ds?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?He(e,t,n*2):[a,u,l]}function fs(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?He(t,e,n):He(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function Mn(e,t,n){return t=+t,e=+e,n=+n,He(e,t,n)[2]}function vs(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Mn(t,e,n):Mn(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}var ms={value:()=>{}};function an(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fe(n)}function Fe(e){this._=e}function bs(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Fe.prototype=an.prototype={constructor:Fe,on:function(e,t){var n=this._,r=bs(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=gs(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Sr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Sr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fe(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function gs(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Sr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ms,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vn="http://www.w3.org/1999/xhtml";const Nr={svg:"http://www.w3.org/2000/svg",xhtml:Vn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ln(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nr.hasOwnProperty(t)?{space:Nr[t],local:e}:e}function _s(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vn&&t.documentElement.namespaceURI===Vn?t.createElement(e):t.createElementNS(n,e)}}function ws(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vi(e){var t=ln(e);return(t.local?ws:_s)(t)}function ys(){}function Un(e){return e==null?ys:function(){return this.querySelector(e)}}function xs(e){typeof e!="function"&&(e=Un(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Q(r,this._parents)}function Cs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ps(){return[]}function Ai(e){return e==null?Ps:function(){return this.querySelectorAll(e)}}function ks(e){return function(){return Cs(e.apply(this,arguments))}}function Es(e){typeof e=="function"?e=ks(e):e=Ai(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new Q(r,i)}function Si(e){return function(){return this.matches(e)}}function Ni(e){return function(t){return t.matches(e)}}var Ms=Array.prototype.find;function Vs(e){return function(){return Ms.call(this.children,e)}}function As(){return this.firstElementChild}function Ss(e){return this.select(e==null?As:Vs(typeof e=="function"?e:Ni(e)))}var Ns=Array.prototype.filter;function Ts(){return Array.from(this.children)}function Ls(e){return function(){return Ns.call(this.children,e)}}function Rs(e){return this.selectAll(e==null?Ts:Ls(typeof e=="function"?e:Ni(e)))}function Ds(e){typeof e!="function"&&(e=Si(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Q(r,this._parents)}function Ti(e){return new Array(e.length)}function Os(){return new Q(this._enter||this._groups.map(Ti),this._parents)}function qe(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qe.prototype={constructor:qe,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Bs(e){return function(){return e}}function Is(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new qe(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function $s(e,t,n,r,i,o,s){var a,u,l=new Map,c=t.length,p=o.length,h=new Array(c),d;for(a=0;a<c;++a)(u=t[a])&&(h[a]=d=s.call(u,u.__data__,a,t)+"",l.has(d)?i[a]=u:l.set(d,u));for(a=0;a<p;++a)d=s.call(e,o[a],a,o)+"",(u=l.get(d))?(r[a]=u,u.__data__=o[a],l.delete(d)):n[a]=new qe(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(h[a])===u&&(i[a]=u)}function Fs(e){return e.__data__}function js(e,t){if(!arguments.length)return Array.from(this,Fs);var n=t?$s:Is,r=this._parents,i=this._groups;typeof e!="function"&&(e=Bs(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],p=i[l],h=p.length,d=zs(e.call(c,c&&c.__data__,l,r)),g=d.length,v=a[l]=new Array(g),b=s[l]=new Array(g),_=u[l]=new Array(h);n(c,p,v,b,_,d,t);for(var w=0,P=0,f,x;w<g;++w)if(f=v[w]){for(w>=P&&(P=w+1);!(x=b[P])&&++P<g;);f._next=x||null}}return s=new Q(s,r),s._enter=a,s._exit=u,s}function zs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ks(){return new Q(this._exit||this._groups.map(Ti),this._parents)}function Us(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Hs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],p=l.length,h=a[u]=new Array(p),d,g=0;g<p;++g)(d=l[g]||c[g])&&(h[g]=d);for(;u<i;++u)a[u]=n[u];return new Q(a,this._parents)}function qs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Gs(e){e||(e=Ws);function t(p,h){return p&&h?e(p.__data__,h.__data__):!p-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new Q(i,this._parents).order()}function Ws(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ys(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Xs(){return Array.from(this)}function Js(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Qs(){let e=0;for(const t of this)++e;return e}function Zs(){return!this.node()}function ta(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function ea(e){return function(){this.removeAttribute(e)}}function na(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ra(e,t){return function(){this.setAttribute(e,t)}}function ia(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function aa(e,t){var n=ln(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?na:ea:typeof t=="function"?n.local?sa:oa:n.local?ia:ra)(n,t))}function Li(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function la(e){return function(){this.style.removeProperty(e)}}function ua(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ca(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pa(e,t,n){return arguments.length>1?this.each((t==null?la:typeof t=="function"?ca:ua)(e,t,n??"")):Wt(this.node(),e)}function Wt(e,t){return e.style.getPropertyValue(t)||Li(e).getComputedStyle(e,null).getPropertyValue(t)}function ha(e){return function(){delete this[e]}}function da(e,t){return function(){this[e]=t}}function fa(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function va(e,t){return arguments.length>1?this.each((t==null?ha:typeof t=="function"?fa:da)(e,t)):this.node()[e]}function Ri(e){return e.trim().split(/^|\s+/)}function Hn(e){return e.classList||new Di(e)}function Di(e){this._node=e,this._names=Ri(e.getAttribute("class")||"")}Di.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Oi(e,t){for(var n=Hn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Bi(e,t){for(var n=Hn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ma(e){return function(){Oi(this,e)}}function ba(e){return function(){Bi(this,e)}}function ga(e,t){return function(){(t.apply(this,arguments)?Oi:Bi)(this,e)}}function _a(e,t){var n=Ri(e+"");if(arguments.length<2){for(var r=Hn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ga:t?ma:ba)(n,t))}function wa(){this.textContent=""}function ya(e){return function(){this.textContent=e}}function xa(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ca(e){return arguments.length?this.each(e==null?wa:(typeof e=="function"?xa:ya)(e)):this.node().textContent}function Pa(){this.innerHTML=""}function ka(e){return function(){this.innerHTML=e}}function Ea(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ma(e){return arguments.length?this.each(e==null?Pa:(typeof e=="function"?Ea:ka)(e)):this.node().innerHTML}function Va(){this.nextSibling&&this.parentNode.appendChild(this)}function Aa(){return this.each(Va)}function Sa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Na(){return this.each(Sa)}function Ta(e){var t=typeof e=="function"?e:Vi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function La(){return null}function Ra(e,t){var n=typeof e=="function"?e:Vi(e),r=t==null?La:typeof t=="function"?t:Un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Da(){var e=this.parentNode;e&&e.removeChild(this)}function Oa(){return this.each(Da)}function Ba(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ia(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $a(e){return this.select(e?Ia:Ba)}function Fa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ja(e){return function(t){e.call(this,t,this.__data__)}}function za(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ka(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Ua(e,t,n){return function(){var r=this.__on,i,o=ja(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ha(e,t,n){var r=za(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Ua:Ka,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Ii(e,t,n){var r=Li(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function qa(e,t){return function(){return Ii(this,e,t)}}function Ga(e,t){return function(){return Ii(this,e,t.apply(this,arguments))}}function Wa(e,t){return this.each((typeof t=="function"?Ga:qa)(e,t))}function*Ya(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var $i=[null];function Q(e,t){this._groups=e,this._parents=t}function ye(){return new Q([[document.documentElement]],$i)}function Xa(){return this}Q.prototype=ye.prototype={constructor:Q,select:xs,selectAll:Es,selectChild:Ss,selectChildren:Rs,filter:Ds,data:js,enter:Os,exit:Ks,join:Us,merge:Hs,selection:Xa,order:qs,sort:Gs,call:Ys,nodes:Xs,node:Js,size:Qs,empty:Zs,each:ta,attr:aa,style:pa,property:va,classed:_a,text:Ca,html:Ma,raise:Aa,lower:Na,append:Ta,insert:Ra,remove:Oa,clone:$a,datum:Fa,on:Ha,dispatch:Wa,[Symbol.iterator]:Ya};function Yt(e){return typeof e=="string"?new Q([[document.querySelector(e)]],[document.documentElement]):new Q([[e]],$i)}function Ja(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Tr(e,t){if(e=Ja(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Qa={passive:!1},pe={capture:!0,passive:!1};function mn(e){e.stopImmediatePropagation()}function Ut(e){e.preventDefault(),e.stopImmediatePropagation()}function Za(e){var t=e.document.documentElement,n=Yt(e).on("dragstart.drag",Ut,pe);"onselectstart"in t?n.on("selectstart.drag",Ut,pe):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function tl(e,t){var n=e.document.documentElement,r=Yt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ut,pe),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Le=e=>()=>e;function An(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}An.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function el(e){return!e.ctrlKey&&!e.button}function nl(){return this.parentNode}function rl(e,t){return t??{x:e.x,y:e.y}}function il(){return navigator.maxTouchPoints||"ontouchstart"in this}function ol(){var e=el,t=nl,n=rl,r=il,i={},o=an("start","drag","end"),s=0,a,u,l,c,p=0;function h(f){f.on("mousedown.drag",d).filter(r).on("touchstart.drag",b).on("touchmove.drag",_,Qa).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(f,x){if(!(c||!e.call(this,f,x))){var m=P(this,t.call(this,f,x),f,x,"mouse");m&&(Yt(f.view).on("mousemove.drag",g,pe).on("mouseup.drag",v,pe),Za(f.view),mn(f),l=!1,a=f.clientX,u=f.clientY,m("start",f))}}function g(f){if(Ut(f),!l){var x=f.clientX-a,m=f.clientY-u;l=x*x+m*m>p}i.mouse("drag",f)}function v(f){Yt(f.view).on("mousemove.drag mouseup.drag",null),tl(f.view,l),Ut(f),i.mouse("end",f)}function b(f,x){if(e.call(this,f,x)){var m=f.changedTouches,y=t.call(this,f,x),C=m.length,M,E;for(M=0;M<C;++M)(E=P(this,y,f,x,m[M].identifier,m[M]))&&(mn(f),E("start",f,m[M]))}}function _(f){var x=f.changedTouches,m=x.length,y,C;for(y=0;y<m;++y)(C=i[x[y].identifier])&&(Ut(f),C("drag",f,x[y]))}function w(f){var x=f.changedTouches,m=x.length,y,C;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),y=0;y<m;++y)(C=i[x[y].identifier])&&(mn(f),C("end",f,x[y]))}function P(f,x,m,y,C,M){var E=o.copy(),k=Tr(M||m,x),R,A,I;if((I=n.call(f,new An("beforestart",{sourceEvent:m,target:h,identifier:C,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:E}),y))!=null)return R=I.x-k[0]||0,A=I.y-k[1]||0,function it(j,J,lt){var z=k,xt;switch(j){case"start":i[C]=it,xt=s++;break;case"end":delete i[C],--s;case"drag":k=Tr(lt||J,x),xt=s;break}E.call(j,f,new An(j,{sourceEvent:J,subject:I,target:h,identifier:C,active:xt,x:k[0]+R,y:k[1]+A,dx:k[0]-z[0],dy:k[1]-z[1],dispatch:E}),y)}}return h.filter=function(f){return arguments.length?(e=typeof f=="function"?f:Le(!!f),h):e},h.container=function(f){return arguments.length?(t=typeof f=="function"?f:Le(f),h):t},h.subject=function(f){return arguments.length?(n=typeof f=="function"?f:Le(f),h):n},h.touchable=function(f){return arguments.length?(r=typeof f=="function"?f:Le(!!f),h):r},h.on=function(){var f=o.on.apply(o,arguments);return f===o?h:f},h.clickDistance=function(f){return arguments.length?(p=(f=+f)*f,h):Math.sqrt(p)},h}function qn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xe(){}var he=.7,Ge=1/he,Ht="\\s*([+-]?\\d+)\\s*",de="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sl=/^#([0-9a-f]{3,8})$/,al=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),ll=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),ul=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${de}\\)$`),cl=new RegExp(`^rgba\\(${ct},${ct},${ct},${de}\\)$`),pl=new RegExp(`^hsl\\(${de},${ct},${ct}\\)$`),hl=new RegExp(`^hsla\\(${de},${ct},${ct},${de}\\)$`),Lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qn(xe,Rt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rr,formatHex:Rr,formatHex8:dl,formatHsl:fl,formatRgb:Dr,toString:Dr});function Rr(){return this.rgb().formatHex()}function dl(){return this.rgb().formatHex8()}function fl(){return ji(this).formatHsl()}function Dr(){return this.rgb().formatRgb()}function Rt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Or(t):n===3?new W(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Re(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Re(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=al.exec(e))?new W(t[1],t[2],t[3],1):(t=ll.exec(e))?new W(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ul.exec(e))?Re(t[1],t[2],t[3],t[4]):(t=cl.exec(e))?Re(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pl.exec(e))?$r(t[1],t[2]/100,t[3]/100,1):(t=hl.exec(e))?$r(t[1],t[2]/100,t[3]/100,t[4]):Lr.hasOwnProperty(e)?Or(Lr[e]):e==="transparent"?new W(NaN,NaN,NaN,0):null}function Or(e){return new W(e>>16&255,e>>8&255,e&255,1)}function Re(e,t,n,r){return r<=0&&(e=t=n=NaN),new W(e,t,n,r)}function vl(e){return e instanceof xe||(e=Rt(e)),e?(e=e.rgb(),new W(e.r,e.g,e.b,e.opacity)):new W}function Sn(e,t,n,r){return arguments.length===1?vl(e):new W(e,t,n,r??1)}function W(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qn(W,Sn,Fi(xe,{brighter(e){return e=e==null?Ge:Math.pow(Ge,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?he:Math.pow(he,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new W(Tt(this.r),Tt(this.g),Tt(this.b),We(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Br,formatHex:Br,formatHex8:ml,formatRgb:Ir,toString:Ir}));function Br(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}`}function ml(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}${Nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ir(){const e=We(this.opacity);return`${e===1?"rgb(":"rgba("}${Tt(this.r)}, ${Tt(this.g)}, ${Tt(this.b)}${e===1?")":`, ${e})`}`}function We(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nt(e){return e=Tt(e),(e<16?"0":"")+e.toString(16)}function $r(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new st(e,t,n,r)}function ji(e){if(e instanceof st)return new st(e.h,e.s,e.l,e.opacity);if(e instanceof xe||(e=Rt(e)),!e)return new st;if(e instanceof st)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new st(s,a,u,e.opacity)}function bl(e,t,n,r){return arguments.length===1?ji(e):new st(e,t,n,r??1)}function st(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qn(st,bl,Fi(xe,{brighter(e){return e=e==null?Ge:Math.pow(Ge,e),new st(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?he:Math.pow(he,e),new st(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new W(bn(e>=240?e-240:e+120,i,r),bn(e,i,r),bn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new st(Fr(this.h),De(this.s),De(this.l),We(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=We(this.opacity);return`${e===1?"hsl(":"hsla("}${Fr(this.h)}, ${De(this.s)*100}%, ${De(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fr(e){return e=(e||0)%360,e<0?e+360:e}function De(e){return Math.max(0,Math.min(1,e||0))}function bn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gn=e=>()=>e;function gl(e,t){return function(n){return e+n*t}}function _l(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wl(e){return(e=+e)==1?zi:function(t,n){return n-t?_l(t,n,e):Gn(isNaN(t)?n:t)}}function zi(e,t){var n=t-e;return n?gl(e,n):Gn(isNaN(e)?t:e)}const Ye=function e(t){var n=wl(t);function r(i,o){var s=n((i=Sn(i)).r,(o=Sn(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=zi(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function yl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function xl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cl(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Wn(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Pl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function kl(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Wn(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Nn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gn=new RegExp(Nn.source,"g");function El(e){return function(){return e}}function Ml(e){return function(t){return e(t)+""}}function Ki(e,t){var n=Nn.lastIndex=gn.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Nn.exec(e))&&(i=gn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:ot(r,i)})),n=gn.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Ml(u[0].x):El(t):(t=u.length,function(l){for(var c=0,p;c<t;++c)a[(p=u[c]).i]=p.x(l);return a.join("")})}function Wn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Gn(t):(n==="number"?ot:n==="string"?(r=Rt(t))?(t=r,Ye):Ki:t instanceof Rt?Ye:t instanceof Date?Pl:xl(t)?yl:Array.isArray(t)?Cl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?kl:ot)(e,t)}function Vl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var jr=180/Math.PI,Tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ui(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*jr,skewX:Math.atan(u)*jr,scaleX:s,scaleY:a}}var Oe;function Al(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Tn:Ui(t.a,t.b,t.c,t.d,t.e,t.f)}function Sl(e){return e==null||(Oe||(Oe=document.createElementNS("http://www.w3.org/2000/svg","g")),Oe.setAttribute("transform",e),!(e=Oe.transform.baseVal.consolidate()))?Tn:(e=e.matrix,Ui(e.a,e.b,e.c,e.d,e.e,e.f))}function Hi(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,p,h,d,g){if(l!==p||c!==h){var v=d.push("translate(",null,t,null,n);g.push({i:v-4,x:ot(l,p)},{i:v-2,x:ot(c,h)})}else(p||h)&&d.push("translate("+p+t+h+n)}function s(l,c,p,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:p.push(i(p)+"rotate(",null,r)-2,x:ot(l,c)})):c&&p.push(i(p)+"rotate("+c+r)}function a(l,c,p,h){l!==c?h.push({i:p.push(i(p)+"skewX(",null,r)-2,x:ot(l,c)}):c&&p.push(i(p)+"skewX("+c+r)}function u(l,c,p,h,d,g){if(l!==p||c!==h){var v=d.push(i(d)+"scale(",null,",",null,")");g.push({i:v-4,x:ot(l,p)},{i:v-2,x:ot(c,h)})}else(p!==1||h!==1)&&d.push(i(d)+"scale("+p+","+h+")")}return function(l,c){var p=[],h=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,p,h),s(l.rotate,c.rotate,p,h),a(l.skewX,c.skewX,p,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,p,h),l=c=null,function(d){for(var g=-1,v=h.length,b;++g<v;)p[(b=h[g]).i]=b.x(d);return p.join("")}}}var Nl=Hi(Al,"px, ","px)","deg)"),Tl=Hi(Sl,", ",")",")"),Xt=0,le=0,re=0,qi=1e3,Xe,ue,Je=0,Dt=0,un=0,fe=typeof performance=="object"&&performance.now?performance:Date,Gi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yn(){return Dt||(Gi(Ll),Dt=fe.now()+un)}function Ll(){Dt=0}function Qe(){this._call=this._time=this._next=null}Qe.prototype=Xn.prototype={constructor:Qe,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Yn():+n)+(t==null?0:+t),!this._next&&ue!==this&&(ue?ue._next=this:Xe=this,ue=this),this._call=e,this._time=n,Ln()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ln())}};function Xn(e,t,n){var r=new Qe;return r.restart(e,t,n),r}function Rl(){Yn(),++Xt;for(var e=Xe,t;e;)(t=Dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xt}function zr(){Dt=(Je=fe.now())+un,Xt=le=0;try{Rl()}finally{Xt=0,Ol(),Dt=0}}function Dl(){var e=fe.now(),t=e-Je;t>qi&&(un-=t,Je=e)}function Ol(){for(var e,t=Xe,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Xe=n);ue=e,Ln(r)}function Ln(e){if(!Xt){le&&(le=clearTimeout(le));var t=e-Dt;t>24?(e<1/0&&(le=setTimeout(zr,e-fe.now()-un)),re&&(re=clearInterval(re))):(re||(Je=fe.now(),re=setInterval(Dl,qi)),Xt=1,Gi(zr))}}function Kr(e,t,n){var r=new Qe;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Bl=an("start","end","cancel","interrupt"),Il=[],Wi=0,Ur=1,Rn=2,je=3,Hr=4,Dn=5,ze=6;function cn(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;$l(e,n,{name:t,index:r,group:i,on:Bl,tween:Il,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Wi})}function Jn(e,t){var n=at(e,t);if(n.state>Wi)throw new Error("too late; already scheduled");return n}function dt(e,t){var n=at(e,t);if(n.state>je)throw new Error("too late; already running");return n}function at(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $l(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Xn(o,0,n.time);function o(l){n.state=Ur,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,p,h,d;if(n.state!==Ur)return u();for(c in r)if(d=r[c],d.name===n.name){if(d.state===je)return Kr(s);d.state===Hr?(d.state=ze,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=ze,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(Kr(function(){n.state===je&&(n.state=Hr,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Rn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rn){for(n.state=je,i=new Array(h=n.tween.length),c=0,p=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=d);i.length=p+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Dn,1),p=-1,h=i.length;++p<h;)i[p].call(e,c);n.state===Dn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=ze,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Fl(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Rn&&r.state<Dn,r.state=ze,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function jl(e){return this.each(function(){Fl(this,e)})}function zl(e,t){var n,r;return function(){var i=dt(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Kl(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=dt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function Ul(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=at(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?zl:Kl)(n,e,t))}function Qn(e,t,n){var r=e._id;return e.each(function(){var i=dt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return at(i,r).value[t]}}function Yi(e,t){var n;return(typeof t=="number"?ot:t instanceof Rt?Ye:(n=Rt(t))?(t=n,Ye):Ki)(e,t)}function Hl(e){return function(){this.removeAttribute(e)}}function ql(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gl(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Wl(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Yl(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Xl(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Jl(e,t){var n=ln(e),r=n==="transform"?Tl:Yi;return this.attrTween(e,typeof t=="function"?(n.local?Xl:Yl)(n,r,Qn(this,"attr."+e,t)):t==null?(n.local?ql:Hl)(n):(n.local?Wl:Gl)(n,r,t))}function Ql(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Zl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tu(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Zl(e,o)),n}return i._value=t,i}function eu(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Ql(e,o)),n}return i._value=t,i}function nu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ln(e);return this.tween(n,(r.local?tu:eu)(r,t))}function ru(e,t){return function(){Jn(this,e).delay=+t.apply(this,arguments)}}function iu(e,t){return t=+t,function(){Jn(this,e).delay=t}}function ou(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ru:iu)(t,e)):at(this.node(),t).delay}function su(e,t){return function(){dt(this,e).duration=+t.apply(this,arguments)}}function au(e,t){return t=+t,function(){dt(this,e).duration=t}}function lu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?su:au)(t,e)):at(this.node(),t).duration}function uu(e,t){if(typeof t!="function")throw new Error;return function(){dt(this,e).ease=t}}function cu(e){var t=this._id;return arguments.length?this.each(uu(t,e)):at(this.node(),t).ease}function pu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dt(this,e).ease=n}}function hu(e){if(typeof e!="function")throw new Error;return this.each(pu(this._id,e))}function du(e){typeof e!="function"&&(e=Si(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new gt(r,this._parents,this._name,this._id)}function fu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,p=s[a]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(p[d]=h);for(;a<r;++a)s[a]=t[a];return new gt(s,this._parents,this._name,this._id)}function vu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mu(e,t,n){var r,i,o=vu(t)?Jn:dt;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function bu(e,t){var n=this._id;return arguments.length<2?at(this.node(),n).on.on(e):this.each(mu(n,e,t))}function gu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _u(){return this.on("end.remove",gu(this._id))}function wu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Un(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,p,h=0;h<u;++h)(c=a[h])&&(p=e.call(c,c.__data__,h,a))&&("__data__"in c&&(p.__data__=c.__data__),l[h]=p,cn(l[h],t,n,h,l,at(c,n)));return new gt(o,this._parents,t,n)}function yu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ai(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,p=0;p<l;++p)if(c=u[p]){for(var h=e.call(c,c.__data__,p,u),d,g=at(c,n),v=0,b=h.length;v<b;++v)(d=h[v])&&cn(d,t,n,v,h,g);o.push(h),s.push(c)}return new gt(o,s,t,n)}var xu=ye.prototype.constructor;function Cu(){return new xu(this._groups,this._parents)}function Pu(e,t){var n,r,i;return function(){var o=Wt(this,e),s=(this.style.removeProperty(e),Wt(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Xi(e){return function(){this.style.removeProperty(e)}}function ku(e,t,n){var r,i=n+"",o;return function(){var s=Wt(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Eu(e,t,n){var r,i,o;return function(){var s=Wt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Wt(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function Mu(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=dt(this,e),l=u.on,c=u.value[o]==null?a||(a=Xi(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function Vu(e,t,n){var r=(e+="")=="transform"?Nl:Yi;return t==null?this.styleTween(e,Pu(e,r)).on("end.style."+e,Xi(e)):typeof t=="function"?this.styleTween(e,Eu(e,r,Qn(this,"style."+e,t))).each(Mu(this._id,e)):this.styleTween(e,ku(e,r,t),n).on("end.style."+e,null)}function Au(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Su(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Au(e,s,n)),r}return o._value=t,o}function Nu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Su(e,t,n??""))}function Tu(e){return function(){this.textContent=e}}function Lu(e){return function(){var t=e(this);this.textContent=t??""}}function Ru(e){return this.tween("text",typeof e=="function"?Lu(Qn(this,"text",e)):Tu(e==null?"":e+""))}function Du(e){return function(t){this.textContent=e.call(this,t)}}function Ou(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Du(i)),t}return r._value=e,r}function Bu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ou(e))}function Iu(){for(var e=this._name,t=this._id,n=Ji(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=at(u,t);cn(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new gt(r,this._parents,e,n)}function $u(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=dt(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var Fu=0;function gt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ji(){return++Fu}var ft=ye.prototype;gt.prototype={constructor:gt,select:wu,selectAll:yu,selectChild:ft.selectChild,selectChildren:ft.selectChildren,filter:du,merge:fu,selection:Cu,transition:Iu,call:ft.call,nodes:ft.nodes,node:ft.node,size:ft.size,empty:ft.empty,each:ft.each,on:bu,attr:Jl,attrTween:nu,style:Vu,styleTween:Nu,text:Ru,textTween:Bu,remove:_u,tween:Ul,delay:ou,duration:lu,ease:cu,easeVarying:hu,end:$u,[Symbol.iterator]:ft[Symbol.iterator]};function ju(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zu={time:null,delay:0,duration:250,ease:ju};function Ku(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Uu(e){var t,n;e instanceof gt?(t=e._id,e=e._name):(t=Ji(),(n=zu).time=Yn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&cn(u,e,t,l,s,n||Ku(u,t));return new gt(r,this._parents,e,t)}ye.prototype.interrupt=jl;ye.prototype.transition=Uu;function qr(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-e)*r,l=(l/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Hu(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Qi(this.cover(t,n),t,n,e)}function Qi(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,p,h,d,g,v,b,_,w;if(!o)return e._root=s,e;for(;o.length;)if((v=t>=(p=(a+l)/2))?a=p:l=p,(b=n>=(h=(u+c)/2))?u=h:c=h,i=o,!(o=o[_=b<<1|v]))return i[_]=s,e;if(d=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===d&&n===g)return s.next=o,i?i[_]=s:e._root=s,e;do i=i?i[_]=new Array(4):e._root=new Array(4),(v=t>=(p=(a+l)/2))?a=p:l=p,(b=n>=(h=(u+c)/2))?u=h:c=h;while((_=b<<1|v)===(w=(g>=h)<<1|d>=p));return i[w]=o,i[_]=s,e}function qu(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,p=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>p&&(p=o));if(u>c||l>p)return this;for(this.cover(u,l).cover(c,p),n=0;n<r;++n)Qi(this,s[n],a[n],e[n]);return this}function Gu(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Wu(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Yu(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function K(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Xu(e,t,n){var r,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,p=this._y1,h=[],d=this._root,g,v;for(d&&h.push(new K(d,i,o,c,p)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,p=t+n,n*=n);g=h.pop();)if(!(!(d=g.node)||(s=g.x0)>c||(a=g.y0)>p||(u=g.x1)<i||(l=g.y1)<o))if(d.length){var b=(s+u)/2,_=(a+l)/2;h.push(new K(d[3],b,_,u,l),new K(d[2],s,_,b,l),new K(d[1],b,a,u,_),new K(d[0],s,a,b,_)),(v=(t>=_)<<1|e>=b)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=g)}else{var w=e-+this._x.call(null,d.data),P=t-+this._y.call(null,d.data),f=w*w+P*P;if(f<n){var x=Math.sqrt(n=f);i=e-x,o=t-x,c=e+x,p=t+x,r=d.data}}return r}function Ju(e){if(isNaN(c=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,p,h,d,g,v,b,_;if(!n)return this;if(n.length)for(;;){if((g=c>=(h=(s+u)/2))?s=h:u=h,(v=p>=(d=(a+l)/2))?a=d:l=d,t=n,!(n=n[b=v<<1|g]))return this;if(!n.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(r=t,_=b)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[b]=o:delete t[b],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=o,this)}function Qu(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Zu(){return this._root}function tc(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ec(e){var t=[],n,r=this._root,i,o,s,a,u;for(r&&t.push(new K(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(o+a)/2,c=(s+u)/2;(i=r[3])&&t.push(new K(i,l,c,a,u)),(i=r[2])&&t.push(new K(i,o,c,l,u)),(i=r[1])&&t.push(new K(i,l,s,a,c)),(i=r[0])&&t.push(new K(i,o,s,l,c))}return this}function nc(e){var t=[],n=[],r;for(this._root&&t.push(new K(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,p=(a+l)/2;(o=i[0])&&t.push(new K(o,s,a,c,p)),(o=i[1])&&t.push(new K(o,c,a,u,p)),(o=i[2])&&t.push(new K(o,s,p,c,l)),(o=i[3])&&t.push(new K(o,c,p,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function rc(e){return e[0]}function ic(e){return arguments.length?(this._x=e,this):this._x}function oc(e){return e[1]}function sc(e){return arguments.length?(this._y=e,this):this._y}function Zn(e,t,n){var r=new tr(t??rc,n??oc,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function tr(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Gr(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var q=Zn.prototype=tr.prototype;q.copy=function(){var e=new tr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Gr(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Gr(r));return e};q.add=Hu;q.addAll=qu;q.cover=Gu;q.data=Wu;q.extent=Yu;q.find=Xu;q.remove=Ju;q.removeAll=Qu;q.root=Zu;q.size=tc;q.visit=ec;q.visitAfter=nc;q.x=ic;q.y=sc;function U(e){return function(){return e}}function Et(e){return(e()-.5)*1e-6}function ac(e){return e.x+e.vx}function lc(e){return e.y+e.vy}function uc(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=U(e==null?1:+e));function s(){for(var l,c=t.length,p,h,d,g,v,b,_=0;_<o;++_)for(p=Zn(t,ac,lc).visitAfter(a),l=0;l<c;++l)h=t[l],v=n[h.index],b=v*v,d=h.x+h.vx,g=h.y+h.vy,p.visit(w);function w(P,f,x,m,y){var C=P.data,M=P.r,E=v+M;if(C){if(C.index>h.index){var k=d-C.x-C.vx,R=g-C.y-C.vy,A=k*k+R*R;A<E*E&&(k===0&&(k=Et(r),A+=k*k),R===0&&(R=Et(r),A+=R*R),A=(E-(A=Math.sqrt(A)))/A*i,h.vx+=(k*=A)*(E=(M*=M)/(b+M)),h.vy+=(R*=A)*E,C.vx-=k*(E=1-E),C.vy-=R*E)}return}return f>d+E||m<d-E||x>g+E||y<g-E}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,p;for(n=new Array(c),l=0;l<c;++l)p=t[l],n[p.index]=+e(p,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:U(+l),u(),s):e},s}function cc(e){return e.index}function Wr(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function pc(e){var t=cc,n=p,r,i=U(30),o,s,a,u,l,c=1;e==null&&(e=[]);function p(b){return 1/Math.min(a[b.source.index],a[b.target.index])}function h(b){for(var _=0,w=e.length;_<c;++_)for(var P=0,f,x,m,y,C,M,E;P<w;++P)f=e[P],x=f.source,m=f.target,y=m.x+m.vx-x.x-x.vx||Et(l),C=m.y+m.vy-x.y-x.vy||Et(l),M=Math.sqrt(y*y+C*C),M=(M-o[P])/M*b*r[P],y*=M,C*=M,m.vx-=y*(E=u[P]),m.vy-=C*E,x.vx+=y*(E=1-E),x.vy+=C*E}function d(){if(s){var b,_=s.length,w=e.length,P=new Map(s.map((x,m)=>[t(x,m,s),x])),f;for(b=0,a=new Array(_);b<w;++b)f=e[b],f.index=b,typeof f.source!="object"&&(f.source=Wr(P,f.source)),typeof f.target!="object"&&(f.target=Wr(P,f.target)),a[f.source.index]=(a[f.source.index]||0)+1,a[f.target.index]=(a[f.target.index]||0)+1;for(b=0,u=new Array(w);b<w;++b)f=e[b],u[b]=a[f.source.index]/(a[f.source.index]+a[f.target.index]);r=new Array(w),g(),o=new Array(w),v()}}function g(){if(s)for(var b=0,_=e.length;b<_;++b)r[b]=+n(e[b],b,e)}function v(){if(s)for(var b=0,_=e.length;b<_;++b)o[b]=+i(e[b],b,e)}return h.initialize=function(b,_){s=b,l=_,d()},h.links=function(b){return arguments.length?(e=b,d(),h):e},h.id=function(b){return arguments.length?(t=b,h):t},h.iterations=function(b){return arguments.length?(c=+b,h):c},h.strength=function(b){return arguments.length?(n=typeof b=="function"?b:U(+b),g(),h):n},h.distance=function(b){return arguments.length?(i=typeof b=="function"?b:U(+b),v(),h):i},h}const hc=1664525,dc=1013904223,Yr=4294967296;function fc(){let e=1;return()=>(e=(hc*e+dc)%Yr)/Yr}function vc(e){return e.x}function mc(e){return e.y}var bc=10,gc=Math.PI*(3-Math.sqrt(5));function _c(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=Xn(p),l=an("tick","end"),c=fc();e==null&&(e=[]);function p(){h(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function h(v){var b,_=e.length,w;v===void 0&&(v=1);for(var P=0;P<v;++P)for(n+=(o-n)*i,a.forEach(function(f){f(n)}),b=0;b<_;++b)w=e[b],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function d(){for(var v=0,b=e.length,_;v<b;++v){if(_=e[v],_.index=v,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=bc*Math.sqrt(.5+v),P=v*gc;_.x=w*Math.cos(P),_.y=w*Math.sin(P)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function g(v){return v.initialize&&v.initialize(e,c),v}return d(),t={tick:h,restart:function(){return u.restart(p),t},stop:function(){return u.stop(),t},nodes:function(v){return arguments.length?(e=v,d(),a.forEach(g),t):e},alpha:function(v){return arguments.length?(n=+v,t):n},alphaMin:function(v){return arguments.length?(r=+v,t):r},alphaDecay:function(v){return arguments.length?(i=+v,t):+i},alphaTarget:function(v){return arguments.length?(o=+v,t):o},velocityDecay:function(v){return arguments.length?(s=1-v,t):1-s},randomSource:function(v){return arguments.length?(c=v,a.forEach(g),t):c},force:function(v,b){return arguments.length>1?(b==null?a.delete(v):a.set(v,g(b)),t):a.get(v)},find:function(v,b,_){var w=0,P=e.length,f,x,m,y,C;for(_==null?_=1/0:_*=_,w=0;w<P;++w)y=e[w],f=v-y.x,x=b-y.y,m=f*f+x*x,m<_&&(C=y,_=m);return C},on:function(v,b){return arguments.length>1?(l.on(v,b),t):l.on(v)}}}function wc(){var e,t,n,r,i=U(-30),o,s=1,a=1/0,u=.81;function l(d){var g,v=e.length,b=Zn(e,vc,mc).visitAfter(p);for(r=d,g=0;g<v;++g)t=e[g],b.visit(h)}function c(){if(e){var d,g=e.length,v;for(o=new Array(g),d=0;d<g;++d)v=e[d],o[v.index]=+i(v,d,e)}}function p(d){var g=0,v,b,_=0,w,P,f;if(d.length){for(w=P=f=0;f<4;++f)(v=d[f])&&(b=Math.abs(v.value))&&(g+=v.value,_+=b,w+=b*v.x,P+=b*v.y);d.x=w/_,d.y=P/_}else{v=d,v.x=v.data.x,v.y=v.data.y;do g+=o[v.data.index];while(v=v.next)}d.value=g}function h(d,g,v,b){if(!d.value)return!0;var _=d.x-t.x,w=d.y-t.y,P=b-g,f=_*_+w*w;if(P*P/u<f)return f<a&&(_===0&&(_=Et(n),f+=_*_),w===0&&(w=Et(n),f+=w*w),f<s&&(f=Math.sqrt(s*f)),t.vx+=_*d.value*r/f,t.vy+=w*d.value*r/f),!0;if(d.length||f>=a)return;(d.data!==t||d.next)&&(_===0&&(_=Et(n),f+=_*_),w===0&&(w=Et(n),f+=w*w),f<s&&(f=Math.sqrt(s*f)));do d.data!==t&&(P=o[d.data.index]*r/f,t.vx+=_*P,t.vy+=w*P);while(d=d.next)}return l.initialize=function(d,g){e=d,n=g,c()},l.strength=function(d){return arguments.length?(i=typeof d=="function"?d:U(+d),c(),l):i},l.distanceMin=function(d){return arguments.length?(s=d*d,l):Math.sqrt(s)},l.distanceMax=function(d){return arguments.length?(a=d*d,l):Math.sqrt(a)},l.theta=function(d){return arguments.length?(u=d*d,l):Math.sqrt(u)},l}function yc(e){var t=U(.1),n,r,i;typeof e!="function"&&(e=U(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:U(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:U(+a),s(),o):e},o}function xc(e){var t=U(.1),n,r,i;typeof e!="function"&&(e=U(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:U(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:U(+a),s(),o):e},o}function Cc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ze(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Jt(e){return e=Ze(Math.abs(e)),e?e[1]:NaN}function Pc(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function kc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ec=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tn(e){if(!(t=Ec.exec(e)))throw new Error("invalid format: "+e);var t;return new er({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}tn.prototype=er.prototype;function er(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}er.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mc(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Zi;function Vc(e,t){var n=Ze(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Zi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ze(e,Math.max(0,t+o-1))[0]}function Xr(e,t){var n=Ze(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Jr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Cc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Xr(e*100,t),r:Xr,s:Vc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Qr(e){return e}var Zr=Array.prototype.map,ti=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ac(e){var t=e.grouping===void 0||e.thousands===void 0?Qr:Pc(Zr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Qr:kc(Zr.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(p){p=tn(p);var h=p.fill,d=p.align,g=p.sign,v=p.symbol,b=p.zero,_=p.width,w=p.comma,P=p.precision,f=p.trim,x=p.type;x==="n"?(w=!0,x="g"):Jr[x]||(P===void 0&&(P=12),f=!0,x="g"),(b||h==="0"&&d==="=")&&(b=!0,h="0",d="=");var m=v==="$"?n:v==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",y=v==="$"?r:/[%p]/.test(x)?s:"",C=Jr[x],M=/[defgprs%]/.test(x);P=P===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function E(k){var R=m,A=y,I,it,j;if(x==="c")A=C(k)+A,k="";else{k=+k;var J=k<0||1/k<0;if(k=isNaN(k)?u:C(Math.abs(k),P),f&&(k=Mc(k)),J&&+k==0&&g!=="+"&&(J=!1),R=(J?g==="("?g:a:g==="-"||g==="("?"":g)+R,A=(x==="s"?ti[8+Zi/3]:"")+A+(J&&g==="("?")":""),M){for(I=-1,it=k.length;++I<it;)if(j=k.charCodeAt(I),48>j||j>57){A=(j===46?i+k.slice(I+1):k.slice(I))+A,k=k.slice(0,I);break}}}w&&!b&&(k=t(k,1/0));var lt=R.length+k.length+A.length,z=lt<_?new Array(_-lt+1).join(h):"";switch(w&&b&&(k=t(z+k,z.length?_-A.length:1/0),z=""),d){case"<":k=R+k+A+z;break;case"=":k=R+z+k+A;break;case"^":k=z.slice(0,lt=z.length>>1)+R+k+A+z.slice(lt);break;default:k=z+R+k+A;break}return o(k)}return E.toString=function(){return p+""},E}function c(p,h){var d=l((p=tn(p),p.type="f",p)),g=Math.max(-8,Math.min(8,Math.floor(Jt(h)/3)))*3,v=Math.pow(10,-g),b=ti[8+g/3];return function(_){return d(v*_)+b}}return{format:l,formatPrefix:c}}var Be,to,eo;Sc({thousands:",",grouping:[3],currency:["$",""]});function Sc(e){return Be=Ac(e),to=Be.format,eo=Be.formatPrefix,Be}function Nc(e){return Math.max(0,-Jt(Math.abs(e)))}function Tc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jt(t)/3)))*3-Jt(Math.abs(e)))}function Lc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jt(t)-Jt(e))+1}function Rc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Dc(e){return function(){return e}}function Oc(e){return+e}var ei=[0,1];function Kt(e){return e}function On(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Dc(isNaN(t)?NaN:.5)}function Bc(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ic(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=On(i,r),o=n(s,o)):(r=On(r,i),o=n(o,s)),function(a){return o(r(a))}}function $c(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=On(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=cs(e,a,1,r)-1;return o[u](i[u](a))}}function Fc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jc(){var e=ei,t=ei,n=Wn,r,i,o,s=Kt,a,u,l;function c(){var h=Math.min(e.length,t.length);return s!==Kt&&(s=Bc(e[0],e[h-1])),a=h>2?$c:Ic,u=l=null,p}function p(h){return h==null||isNaN(h=+h)?o:(u||(u=a(e.map(r),t,n)))(r(s(h)))}return p.invert=function(h){return s(i((l||(l=a(t,e.map(r),ot)))(h)))},p.domain=function(h){return arguments.length?(e=Array.from(h,Oc),c()):e.slice()},p.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},p.rangeRound=function(h){return t=Array.from(h),n=Vl,c()},p.clamp=function(h){return arguments.length?(s=h?!0:Kt,c()):s!==Kt},p.interpolate=function(h){return arguments.length?(n=h,c()):n},p.unknown=function(h){return arguments.length?(o=h,p):o},function(h,d){return r=h,i=d,c()}}function zc(){return jc()(Kt,Kt)}function Kc(e,t,n,r){var i=vs(e,t,n),o;switch(r=tn(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=Tc(i,s))&&(r.precision=o),eo(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Lc(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Nc(i))&&(r.precision=o-(r.type==="%")*2);break}}return to(r)}function Uc(e){var t=e.domain;return e.ticks=function(n){var r=t();return fs(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Kc(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=Mn(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function no(){var e=zc();return e.copy=function(){return Fc(e,no())},Rc.apply(e,arguments),Uc(e)}function ce(e,t,n){this.k=e,this.x=t,this.y=n}ce.prototype={constructor:ce,scale:function(e){return e===1?this:new ce(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ce(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ce.prototype;/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function L(e){return e==null}function nr(e){return e!==null&&typeof e=="object"}function Bn(e){return e!==null&&typeof e=="object"}function Hc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ot(e,t){return Array.from(new Set([...Object.keys(e),...Object.keys(t)])).reduce((r,i)=>{const o=e[i],s=t[i];return Bn(o)&&Bn(s)?Object.assign(Object.assign({},r),{[i]:Ot(o,s)}):Object.assign(Object.assign({},r),{[i]:i in t?s:o})},{})}function rr(e){return nr(e)?"target"in e:!1}const qc={alreadydisposed:()=>"View has been already disposed",invalidparams:e=>`Invalid parameters for '${e.name}'`,nomatchingcontroller:e=>`No matching controller for '${e.key}'`,nomatchingview:e=>`No matching view for '${JSON.stringify(e.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:e=>`Not compatible with  plugin '${e.id}'`,propertynotfound:e=>`Property '${e.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class B{static alreadyDisposed(){return new B({type:"alreadydisposed"})}static notBindable(){return new B({type:"notbindable"})}static notCompatible(t,n){return new B({type:"notcompatible",context:{id:`${t}.${n}`}})}static propertyNotFound(t){return new B({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new B({type:"shouldneverhappen"})}constructor(t){var n;this.message=(n=qc[t.type](t.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class en{constructor(t,n){this.obj_=t,this.key=n}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,n){const r=this.read();if(!en.isBindable(r))throw B.notBindable();if(!(t in r))throw B.propertyNotFound(t);r[t]=n}}class ${constructor(){this.observers_={}}on(t,n,r){var i;let o=this.observers_[t];return o||(o=this.observers_[t]=[]),o.push({handler:n,key:(i=r==null?void 0:r.key)!==null&&i!==void 0?i:n}),this}off(t,n){const r=this.observers_[t];return r&&(this.observers_[t]=r.filter(i=>i.key!==n)),this}emit(t,n){const r=this.observers_[t];r&&r.forEach(i=>{i.handler(n)})}}class Gc{constructor(t,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new $,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}}class Wc{constructor(t){this.emitter=new $,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===t&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class Yc{constructor(t){this.emitter=new $,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function D(e,t){const n=t==null?void 0:t.constraint,r=t==null?void 0:t.equals;return!n&&!r?new Wc(e):new Gc(e,t)}function Xc(e){return[new Yc(e),(t,n)=>{e.setRawValue(t,n)}]}class V{constructor(t){this.emitter=new $,this.valMap_=t;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(t){return Object.keys(t).reduce((r,i)=>Object.assign(r,{[i]:D(t[i])}),{})}static fromObject(t){const n=this.createCore(t);return new V(n)}get(t){return this.valMap_[t].rawValue}set(t,n){this.valMap_[t].rawValue=n}value(t){return this.valMap_[t]}}class Ce{constructor(t){this.values=V.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(t,r),n)}}class Jc{constructor(t){this.values=V.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");let i=t;return L(r)||(i=Math.max(i,r)),L(n)||(i=Math.min(i,n)),i}}class Qc{constructor(t,n=0){this.step=t,this.origin=n}constrain(t){const n=this.origin%this.step,r=Math.round((t-n)/this.step);return n+r*this.step}}class Zc{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const tp={"**":(e,t)=>Math.pow(e,t),"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t,"&":(e,t)=>e&t,"^":(e,t)=>e^t,"|":(e,t)=>e|t};class ep{constructor(t,n,r){this.left=n,this.operator=t,this.right=r}evaluate(){const t=tp[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const np={"+":e=>e,"-":e=>-e,"~":e=>~e};class rp{constructor(t,n){this.operator=t,this.expression=n}evaluate(){const t=np[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function ir(e){return(t,n)=>{for(let r=0;r<e.length;r++){const i=e[r](t,n);if(i!=="")return i}return""}}function ve(e,t){var n;const r=e.substr(t).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function ip(e,t){const n=e.substr(t,1);return n.match(/^[1-9]$/)?n:""}function me(e,t){var n;const r=e.substr(t).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function op(e,t){const n=me(e,t);if(n!=="")return n;const r=e.substr(t,1);if(t+=1,r!=="-"&&r!=="+")return"";const i=me(e,t);return i===""?"":r+i}function or(e,t){const n=e.substr(t,1);if(t+=1,n.toLowerCase()!=="e")return"";const r=op(e,t);return r===""?"":n+r}function ro(e,t){const n=e.substr(t,1);if(n==="0")return n;const r=ip(e,t);return t+=r.length,r===""?"":r+me(e,t)}function sp(e,t){const n=ro(e,t);if(t+=n.length,n==="")return"";const r=e.substr(t,1);if(t+=r.length,r!==".")return"";const i=me(e,t);return t+=i.length,n+r+i+or(e,t)}function ap(e,t){const n=e.substr(t,1);if(t+=n.length,n!==".")return"";const r=me(e,t);return t+=r.length,r===""?"":n+r+or(e,t)}function lp(e,t){const n=ro(e,t);return t+=n.length,n===""?"":n+or(e,t)}const up=ir([sp,ap,lp]);function cp(e,t){var n;const r=e.substr(t).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function pp(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0b")return"";const r=cp(e,t);return r===""?"":n+r}function hp(e,t){var n;const r=e.substr(t).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function dp(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0o")return"";const r=hp(e,t);return r===""?"":n+r}function fp(e,t){var n;const r=e.substr(t).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function vp(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0x")return"";const r=fp(e,t);return r===""?"":n+r}const mp=ir([pp,dp,vp]),bp=ir([mp,up]);function gp(e,t){const n=bp(e,t);return t+=n.length,n===""?null:{evaluable:new Zc(n),cursor:t}}function _p(e,t){const n=e.substr(t,1);if(t+=n.length,n!=="(")return null;const r=oo(e,t);if(!r)return null;t=r.cursor,t+=ve(e,t).length;const i=e.substr(t,1);return t+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:t}}function wp(e,t){var n;return(n=gp(e,t))!==null&&n!==void 0?n:_p(e,t)}function io(e,t){const n=wp(e,t);if(n)return n;const r=e.substr(t,1);if(t+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=io(e,t);return i?(t=i.cursor,{cursor:t,evaluable:new rp(r,i.evaluable)}):null}function yp(e,t,n){n+=ve(t,n).length;const r=e.filter(i=>t.startsWith(i,n))[0];return r?(n+=r.length,n+=ve(t,n).length,{cursor:n,operator:r}):null}function xp(e,t){return(n,r)=>{const i=e(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const s=yp(t,n,r);if(!s)break;r=s.cursor;const a=e(n,r);if(!a)return null;r=a.cursor,o=new ep(s.operator,o,a.evaluable)}return o?{cursor:r,evaluable:o}:null}}const Cp=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((e,t)=>xp(e,t),io);function oo(e,t){return t+=ve(e,t).length,Cp(e,t)}function Pp(e){const t=oo(e,0);return!t||t.cursor+ve(e,t.cursor).length!==e.length?null:t.evaluable}function _t(e){var t;const n=Pp(e);return(t=n==null?void 0:n.evaluate())!==null&&t!==void 0?t:null}function so(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=_t(e);if(!L(t))return t}return 0}function kp(e){return String(e)}function X(e){return t=>t.toFixed(Math.max(Math.min(e,20),0))}function T(e,t,n,r,i){const o=(e-t)/(n-t);return r+o*(i-r)}function ni(e){return String(e.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function F(e,t,n){return Math.min(Math.max(e,t),n)}function ao(e,t){return(e%t+t)%t}function Ep(e,t){return L(e.step)?Math.max(ni(t),2):ni(e.step)}function lo(e){var t;return(t=e.step)!==null&&t!==void 0?t:1}function uo(e,t){var n;const r=Math.abs((n=e.step)!==null&&n!==void 0?n:t);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function co(e,t){return L(e.step)?null:new Qc(e.step,t)}function po(e){return!L(e.max)&&!L(e.min)?new Ce({max:e.max,min:e.min}):!L(e.max)||!L(e.min)?new Jc({max:e.max,min:e.min}):null}function ho(e,t){var n,r,i;return{formatter:(n=e.format)!==null&&n!==void 0?n:X(Ep(e,t)),keyScale:(r=e.keyScale)!==null&&r!==void 0?r:lo(e),pointerScale:(i=e.pointerScale)!==null&&i!==void 0?i:uo(e,t)}}function fo(e){return{format:e.optional.function,keyScale:e.optional.number,max:e.optional.number,min:e.optional.number,pointerScale:e.optional.number,step:e.optional.number}}function sr(e){return{constraint:e.constraint,textProps:V.fromObject(ho(e.params,e.initialValue))}}class $t{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class pn{constructor(t){this.target=t}}class Pe extends pn{constructor(t,n,r){super(t),this.value=n,this.last=r??!0}}class Mp extends pn{constructor(t,n){super(t),this.expanded=n}}class Vp extends pn{constructor(t,n){super(t),this.index=n}}class Ap extends pn{constructor(t,n){super(t),this.native=n}}class be extends $t{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new $,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const n=this.controller.value;this.emitter_.emit("change",new Pe(this,n.binding.target.read(),t.options.last))}}class Sp{constructor(t,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new $}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Np(e){if(!("binding"in e))return!1;const t=e.binding;return rr(t)&&"read"in t&&"write"in t}function Tp(e,t){const r=Object.keys(t).reduce((i,o)=>{if(i===void 0)return;const s=t[o],a=s(e[o]);return a.succeeded?Object.assign(Object.assign({},i),{[o]:a.value}):void 0},{});return r}function Lp(e,t){return e.reduce((n,r)=>{if(n===void 0)return;const i=t(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function Rp(e){return e===null?!1:typeof e=="object"}function vt(e){return t=>n=>{if(!t&&n===void 0)return{succeeded:!1,value:void 0};if(t&&n===void 0)return{succeeded:!0,value:void 0};const r=e(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function ri(e){return{custom:t=>vt(t)(e),boolean:vt(t=>typeof t=="boolean"?t:void 0)(e),number:vt(t=>typeof t=="number"?t:void 0)(e),string:vt(t=>typeof t=="string"?t:void 0)(e),function:vt(t=>typeof t=="function"?t:void 0)(e),constant:t=>vt(n=>n===t?t:void 0)(e),raw:vt(t=>t)(e),object:t=>vt(n=>{if(Rp(n))return Tp(n,t)})(e),array:t=>vt(n=>{if(Array.isArray(n))return Lp(n,t)})(e)}}const In={optional:ri(!0),required:ri(!1)};function O(e,t){const n=t(In),r=In.required.object(n)(e);return r.succeeded?r.value:void 0}function Z(e,t,n,r){if(t&&!t(e))return!1;const i=O(e,n);return i?r(i):!1}function tt(e,t){var n;return Ot((n=e==null?void 0:e())!==null&&n!==void 0?n:{},t)}function Lt(e){return"value"in e}function vo(e){if(!nr(e)||!("binding"in e))return!1;const t=e.binding;return rr(t)}const ut="http://www.w3.org/2000/svg";function nn(e){e.offsetHeight}function Dp(e,t){const n=e.style.transition;e.style.transition="none",t(),e.style.transition=n}function ar(e){return e.ontouchstart!==void 0}function Op(){return globalThis}function Bp(){return Op().document}function Ip(e){const t=e.ownerDocument.defaultView;return t&&"document"in t?e.getContext("2d",{willReadFrequently:!0}):null}const $p={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function hn(e,t){const n=e.createElementNS(ut,"svg");return n.innerHTML=$p[t],n}function mo(e,t,n){e.insertBefore(t,e.children[n])}function lr(e){e.parentElement&&e.parentElement.removeChild(e)}function bo(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function Fp(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])}function go(e){return e.relatedTarget?e.relatedTarget:"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}function bt(e,t){e.emitter.on("change",n=>{t(n.rawValue)}),t(e.rawValue)}function pt(e,t,n){bt(e.value(t),n)}const jp="tp";function S(e){return(n,r)=>[jp,"-",e,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const ie=S("lbl");function zp(e,t){const n=e.createDocumentFragment();return t.split(`
`).map(i=>e.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(e.createElement("br")),n.appendChild(i)}),n}class _o{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ie()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(ie("l")),pt(n.props,"label",o=>{L(o)?this.element.classList.add(ie(void 0,"nol")):(this.element.classList.remove(ie(void 0,"nol")),Fp(r),r.appendChild(zp(t,o)))}),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("div");i.classList.add(ie("v")),this.element.appendChild(i),this.valueElement=i}}class wo{constructor(t,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new _o(t,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return Z(t,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return tt(null,{label:this.props.get("label")})}}function Kp(){return["veryfirst","first","last","verylast"]}const ii=S(""),oi={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class dn{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Kp().forEach(r=>{n.classList.remove(ii(void 0,oi[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(ii(void 0,oi[r]))})}),this.viewProps.handleDispose(()=>{lr(n)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return Z(t,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return tt(null,Object.assign({},this.viewProps.exportState()))}}class Bt extends dn{constructor(t,n){if(n.value!==n.valueController.value)throw B.shouldNeverHappen();const r=n.valueController.viewProps,i=new wo(t,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new _o(t,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return Z(t,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,t))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var t,n,r;return tt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(t=this.valueController).exportProps)===null||n===void 0?void 0:n.call(t))!==null&&r!==void 0?r:{}))}}function si(e){const t=Object.assign({},e);return delete t.value,t}class yo extends Bt{constructor(t,n){super(t,n),this.tag=n.tag}importState(t){return Z(t,n=>super.importState(si(t)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return tt(()=>si(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Up(e){return Lt(e)&&vo(e.value)}class Hp extends yo{importState(t){return Z(t,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function qp(e){return Lt(e)&&Np(e.value)}function xo(e,t){for(;e.length<t;)e.push(void 0)}function Gp(e){const t=[];return xo(t,e),t}function Wp(e){const t=e.indexOf(void 0);return t<0?e:e.slice(0,t)}function Yp(e,t){const n=[...Wp(e),t];return n.length>e.length?n.splice(0,n.length-e.length):xo(n,e.length),n}class Xp{constructor(t){this.emitter=new $,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=D(Gp(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=Yp(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Jp(e){if(!("binding"in e))return!1;const t=e.binding;return rr(t)&&"read"in t&&!("write"in t)}class Qp extends yo{exportState(){return tt(()=>super.exportState(),{binding:{readonly:!0}})}}function Zp(e){return Lt(e)&&Jp(e.value)}class th extends $t{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(t,o=>{r(new Ap(this,o.nativeEvent))}),this}off(t,n){return this.controller.buttonController.emitter.off(t,n),this}}function eh(e,t,n){n?e.classList.add(t):e.classList.remove(t)}function Zt(e,t){return n=>{eh(e,t,n)}}function ur(e,t){bt(e,n=>{t.textContent=n??""})}const _n=S("btn");class nh{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(_n()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("button");r.classList.add(_n("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(_n("t")),ur(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class rh{constructor(t,n){this.emitter=new $,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new nh(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return Z(t,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return tt(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class ai extends dn{constructor(t,n){const r=new rh(t,{props:n.buttonProps,viewProps:n.viewProps}),i=new wo(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(t){return Z(t,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return tt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Co{constructor(t){const[n,r]=t.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}const te=new Co("2.0.5");function G(e){return Object.assign({core:te},e)}const ih=G({id:"button",type:"blade",accept(e){const t=O(e,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return t?{params:t}:null},controller(e){return new ai(e.document,{blade:e.blade,buttonProps:V.fromObject({title:e.params.title}),labelProps:V.fromObject({label:e.params.label}),viewProps:e.viewProps})},api(e){return e.controller instanceof ai?new th(e.controller):null}});function oh(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function sh(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function ah(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function lh(e){return nr(e)?"refresh"in e&&typeof e.refresh=="function":!1}function uh(e,t){if(!en.isBindable(e))throw B.notBindable();return new en(e,t)}class ch{constructor(t,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new $,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,n,r){const i=r??{},o=this.controller_.element.ownerDocument,s=this.pool_.createBinding(o,uh(t,n),i),a=this.pool_.createBindingApi(s);return this.add(a,i.index)}addFolder(t){return sh(this,t)}addButton(t){return oh(this,t)}addTab(t){return ah(this,t)}add(t,n){const r=t.controller;return this.controller_.rack.add(r,n),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,t),i=this.pool_.createApi(r);return this.add(i,t.index)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.children.forEach(t=>{lh(t)&&t.refresh()})}onRackValueChange_(t){const n=t.bladeController,r=this.pool_.createApi(n),i=vo(n.value)?n.value.binding:null;this.emitter_.emit("change",new Pe(r,i?i.target.read():n.value.rawValue,t.options.last))}}class cr extends $t{constructor(t,n){super(t),this.rackApi_=new ch(t.rackController,n)}refresh(){this.rackApi_.refresh()}}class pr extends dn{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return Z(t,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return tt(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}}function $n(e){return"rackController"in e}class ph{constructor(t){this.emitter=new $,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const n of this.allItems())if(t(n))return n;return null}includes(t){return this.cache_.has(t)}add(t,n){if(this.includes(t))throw B.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:t,root:this,target:this})}remove(t){const n=this.items_.indexOf(t);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(t);const r=this.extract_(t);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function hh(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(Lt(r)&&r.value===t)return r}return null}function dh(e){return $n(e)?e.rackController.rack.bcSet_:null}class fh{constructor(t){var n,r;this.emitter=new $,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=t.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new ph(dh),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,n){var r;(r=t.parent)===null||r===void 0||r.remove(t),t.parent=this,this.bcSet_.add(t,n)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:n,sender:this}),!n)return;const r=t.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),Lt(r))r.value.emitter.on("change",this.onChildValueChange_);else if($n(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:n,sender:this}),!n)return;const r=t.item;if(Lt(r))r.value.emitter.off("change",this.onChildValueChange_);else if($n(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=t[0],r=t[t.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(t){const n=hh(this.find(Lt),t.sender);if(!n)throw B.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class hr{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const n=new fh({blade:t.root?void 0:t.blade,viewProps:t.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&mo(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&lr(t.bladeController.view.element)}}function ee(){return new V({positions:D([],{equals:Hc})})}class ke extends V{constructor(t){super(t)}static create(t){const n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=V.createCore(n);return new ke(r)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!L(t)?`${t}px`:"auto"}bindExpandedClass(t,n){const r=()=>{this.styleExpanded?t.classList.add(n):t.classList.remove(n)};pt(this,"expanded",r),pt(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function vh(e,t){let n=0;return Dp(t,()=>{e.set("expandedHeight",null),e.set("temporaryExpanded",!0),nn(t),n=t.clientHeight,e.set("temporaryExpanded",null),nn(t)}),n}function li(e,t){t.style.height=e.styleHeight}function dr(e,t){e.value("expanded").emitter.on("beforechange",()=>{if(e.set("completed",!1),L(e.get("expandedHeight"))){const n=vh(e,t);n>0&&e.set("expandedHeight",n)}e.set("shouldFixHeight",!0),nn(t)}),e.emitter.on("change",()=>{li(e,t)}),li(e,t),t.addEventListener("transitionend",n=>{n.propertyName==="height"&&e.cleanUpTransition()})}class Po extends cr{constructor(t,n){super(t,n),this.emitter_=new $,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new Mp(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){return this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const ko=S("cnt");class mh{constructor(t,n){var r;this.className_=S((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),ko()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),pt(this.foldable_,"completed",Zt(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),pt(n.props,"title",l=>{L(l)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=t.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const s=t.createElement("div");s.classList.add(this.className_("t")),ur(n.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const u=t.createElement("div");u.classList.add(this.className_("c")),this.element.appendChild(u),this.containerElement=u}}class Fn extends pr{constructor(t,n){var r;const i=ke.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new mh(t,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new hr({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,dr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return Z(t,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return tt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const bh=G({id:"folder",type:"blade",accept(e){const t=O(e,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return t?{params:t}:null},controller(e){return new Fn(e.document,{blade:e.blade,expanded:e.params.expanded,props:V.fromObject({title:e.params.title}),viewProps:e.viewProps})},api(e){return e.controller instanceof Fn?new Po(e.controller,e.pool):null}}),gh=S("");function ui(e,t){return Zt(e,gh(void 0,t))}class yt extends V{constructor(t){var n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Xc(D(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var n,r,i;const o=t??{};return new yt(V.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){bt(this.globalDisabled_,ui(t,"disabled")),pt(this,"hidden",ui(t,"hidden"))}bindDisabled(t){bt(this.globalDisabled_,n=>{t.disabled=n})}bindTabIndex(t){bt(this.globalDisabled_,n=>{t.tabIndex=n?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",n=>{n&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var n;const r=t.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const ci=S("tbp");class _h{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ci()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(ci("c")),this.element.appendChild(r),this.containerElement=r}}const oe=S("tbi");class wh{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(oe()),n.viewProps.bindClassModifiers(this.element),pt(n.props,"selected",o=>{o?this.element.classList.add(oe(void 0,"sel")):this.element.classList.remove(oe(void 0,"sel"))});const r=t.createElement("button");r.classList.add(oe("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(oe("t")),ur(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class yh{constructor(t,n){this.emitter=new $,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new wh(t,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class jn extends pr{constructor(t,n){const r=new _h(t,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new hr({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new yh(t,{props:n.itemProps,viewProps:yt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,pt(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(t){return Z(t,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return tt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class xh extends cr{constructor(t,n){super(t,n),this.emitter_=new $,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const n=this.controller.view.element.ownerDocument,r=new jn(n,{blade:ee(),itemProps:V.fromObject({selected:!1,title:t.title}),props:V.fromObject({selected:!1}),viewProps:yt.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}onSelect_(t){this.emitter_.emit("select",new Vp(this,t.rawValue))}}class Ch extends cr{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addBlade(t){return this.rackApi_.addBlade(t)}}const pi=-1;class Ph{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=D(!0),this.selectedIndex=D(pi),this.items_=[]}add(t,n){const r=n??this.items_.length;this.items_.splice(r,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const n=this.items_.indexOf(t);n<0||(this.items_.splice(n,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=pi,this.empty.rawValue=!0;return}const t=this.items_.findIndex(n=>n.rawValue);t<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const n=this.items_.findIndex(r=>r===t.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const se=S("tab");class kh{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(se(),ko()),n.viewProps.bindClassModifiers(this.element),bt(n.empty,Zt(this.element,se(void 0,"nop")));const r=t.createElement("div");r.classList.add(se("t")),this.element.appendChild(r),this.itemsElement=r;const i=t.createElement("div");i.classList.add(se("i")),this.element.appendChild(i);const o=t.createElement("div");o.classList.add(se("c")),this.element.appendChild(o),this.contentsElement=o}}class hi extends pr{constructor(t,n){const r=new Ph,i=new kh(t,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new hr({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(t,n){this.rackController.rack.add(t,n)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const n=t.bladeController;mo(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const n=t.bladeController;lr(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}const Eo=G({id:"tab",type:"blade",accept(e){const t=O(e,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(e){const t=new hi(e.document,{blade:e.blade,viewProps:e.viewProps});return e.params.pages.forEach(n=>{const r=new jn(e.document,{blade:ee(),itemProps:V.fromObject({selected:!1,title:n.title}),props:V.fromObject({selected:!1}),viewProps:yt.create()});t.add(r)}),t},api(e){return e.controller instanceof hi?new xh(e.controller,e.pool):e.controller instanceof jn?new Ch(e.controller,e.pool):null}});function Eh(e,t){const n=e.accept(t.params);if(!n)return null;const r=O(t.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return e.controller({blade:ee(),document:t.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:yt.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}class fr extends be{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class Mh{constructor(){this.disabled=!1,this.emitter=new $}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Vh{constructor(t,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new $,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Ee{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((n,r)=>r.constrain(n),t)}}function rn(e,t){if(e instanceof t)return e;if(e instanceof Ee){const n=e.constraints.reduce((r,i)=>r||(i instanceof t?i:null),null);if(n)return n}return null}class Me{constructor(t){this.values=V.fromObject({options:t})}constrain(t){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===t).length>0?t:n[0].value}}function Ve(e){var t;const n=In;if(Array.isArray(e))return(t=O({items:e},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof e=="object")return n.required.raw(e).value}function vr(e){if(Array.isArray(e))return e;const t=[];return Object.keys(e).forEach(n=>{t.push({text:n,value:e[n]})}),t}function mr(e){return L(e)?null:new Me(vr(e))}const wn=S("lst");class Ah{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=t.createElement("div"),this.element.classList.add(wn()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("select");r.classList.add(wn("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=t.createElement("div");i.classList.add(wn("m")),i.appendChild(hn(t,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,pt(this.props_,"options",o=>{bo(this.selectElement),o.forEach(s=>{const a=t.createElement("option");a.textContent=s.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const t=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class At{constructor(t,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Ah(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const n=t.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(t){return Z(t,null,n=>({options:n.required.custom(Ve)}),n=>(this.props.set("options",vr(n.options)),!0))}exportProps(){return tt(null,{options:this.props.get("options")})}}const di=S("pop");class Sh{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(di()),n.viewProps.bindClassModifiers(this.element),bt(n.shows,Zt(this.element,di(void 0,"v")))}}class Mo{constructor(t,n){this.shows=D(!1),this.viewProps=n.viewProps,this.view=new Sh(t,{shows:this.shows,viewProps:this.viewProps})}}const fi=S("txt");class Nh{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(fi()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=t.createElement("input");r.classList.add(fi("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class ge{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Nh(t,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);L(i)||(this.value.rawValue=i),this.view.refresh()}}function Th(e){return String(e)}function Vo(e){return e==="false"?!1:!!e}function vi(e){return Th(e)}function Lh(e){return t=>e.reduce((n,r)=>n!==null?n:r(t),null)}const Rh=X(0);function on(e){return Rh(e)+"%"}function Ao(e){return String(e)}function zn(e){return e}function ne({primary:e,secondary:t,forward:n,backward:r}){let i=!1;function o(s){i||(i=!0,s(),i=!1)}e.emitter.on("change",s=>{o(()=>{t.setRawValue(n(e.rawValue,t.rawValue),s.options)})}),t.emitter.on("change",s=>{o(()=>{e.setRawValue(r(e.rawValue,t.rawValue),s.options)}),o(()=>{t.setRawValue(n(e.rawValue,t.rawValue),s.options)})}),o(()=>{t.setRawValue(n(e.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function Y(e,t){const n=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function _e(e){return{altKey:e.altKey,downKey:e.key==="ArrowDown",shiftKey:e.shiftKey,upKey:e.key==="ArrowUp"}}function wt(e){return{altKey:e.altKey,downKey:e.key==="ArrowLeft",shiftKey:e.shiftKey,upKey:e.key==="ArrowRight"}}function Dh(e){return e==="ArrowUp"||e==="ArrowDown"}function So(e){return Dh(e)||e==="ArrowLeft"||e==="ArrowRight"}function yn(e,t){var n,r;const i=t.ownerDocument.defaultView,o=t.getBoundingClientRect();return{x:e.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:e.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}class Ft{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new $,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var n;t.preventDefault(),(n=t.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(yn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(yn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(yn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchMove_(t){const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchEnd_(t){var n;const r=(n=t.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const et=S("txt");class Oh{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(et(),et(void 0,"num")),n.arrayPosition&&this.element.classList.add(et(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(et("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(et()),this.inputElement.classList.add(et("i"));const i=t.createElement("div");i.classList.add(et("k")),this.element.appendChild(i),this.knobElement=i;const o=t.createElementNS(ut,"svg");o.classList.add(et("g")),this.knobElement.appendChild(o);const s=t.createElementNS(ut,"path");s.classList.add(et("gb")),o.appendChild(s),this.guideBodyElem_=s;const a=t.createElementNS(ut,"path");a.classList.add(et("gh")),o.appendChild(a),this.guideHeadElem_=a;const u=t.createElement("div");u.classList.add(S("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(et(void 0,"drg"));return}this.element.classList.add(et(void 0,"drg"));const n=t.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=F(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Ae{constructor(t,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=D(null),this.view=new Oh(t,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Ft(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let s=t;return i!==void 0&&(s=Math.max(s,i)),o!==void 0&&(s=Math.min(s,o)),s}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);L(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const n=Y(this.props.get("keyScale"),_e(t));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(t){Y(this.props.get("keyScale"),_e(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const n=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const xn=S("sld");class Bh{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(xn()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(xn("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=t.createElement("div");i.classList.add(xn("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const t=F(T(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class Ih{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Bh(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ft(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){t.point&&this.value.setRawValue(T(F(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=Y(this.props.get("keyScale"),wt(t));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(t){Y(this.props.get("keyScale"),wt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Cn=S("sldtxt");class $h{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Cn());const r=t.createElement("div");r.classList.add(Cn("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Cn("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class sn{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new Ih(t,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new Ae(t,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new $h(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return Z(t,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const t=this.sliderC_.props;return tt(null,{max:t.get("max"),min:t.get("min")})}}function No(e){return{sliderProps:new V({keyScale:e.keyScale,max:e.max,min:e.min}),textProps:new V({formatter:D(e.formatter),keyScale:e.keyScale,pointerScale:D(e.pointerScale)})}}const Fh={containerUnitSize:"cnt-usz"};function To(e){return`--${Fh[e]}`}function we(e){return fo(e)}function Mt(e){if(Bn(e))return O(e,we)}function mt(e,t){if(!e)return;const n=[],r=co(e,t);r&&n.push(r);const i=po(e);return i&&n.push(i),new Ee(n)}function jh(e){return e?e.major===te.major:!1}function Lo(e){if(e==="inline"||e==="popup")return e}function Se(e,t){e.write(t)}const Ie=S("ckb");class zh{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ie()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("label");r.classList.add(Ie("l")),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("input");i.classList.add(Ie("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=t.createElement("div");o.classList.add(Ie("w")),this.labelElement.appendChild(o);const s=hn(t,"check");o.appendChild(s),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Kh{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new zh(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const n=t.currentTarget;this.value.rawValue=n.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}function Uh(e){const t=[],n=mr(e.options);return n&&t.push(n),new Ee(t)}const Hh=G({id:"input-bool",type:"input",accept:(e,t)=>{if(typeof e!="boolean")return null;const n=O(t,r=>({options:r.optional.custom(Ve),readonly:r.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Vo,constraint:e=>Uh(e.params),writer:e=>Se},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&rn(r,Me);return i?new At(t,{props:new V({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new Kh(t,{value:n,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="boolean"?null:e.controller.valueController instanceof At?new fr(e.controller):null}}),St=S("col");class qh{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(St()),n.foldable.bindExpandedClass(this.element,St(void 0,"expanded")),pt(n.foldable,"completed",Zt(this.element,St(void 0,"cpl")));const r=t.createElement("div");r.classList.add(St("h")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(St("s")),r.appendChild(i),this.swatchElement=i;const o=t.createElement("div");if(o.classList.add(St("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const s=t.createElement("div");s.classList.add(St("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null}}function Gh(e,t,n){const r=F(e/255,0,1),i=F(t/255,0,1),o=F(n/255,0,1),s=Math.max(r,i,o),a=Math.min(r,i,o),u=s-a;let l=0,c=0;const p=(a+s)/2;return u!==0&&(c=u/(1-Math.abs(s+a-1)),r===s?l=(i-o)/u:i===s?l=2+(o-r)/u:l=4+(r-i)/u,l=l/6+(l<0?1:0)),[l*360,c*100,p*100]}function Wh(e,t,n){const r=(e%360+360)%360,i=F(t/100,0,1),o=F(n/100,0,1),s=(1-Math.abs(2*o-1))*i,a=s*(1-Math.abs(r/60%2-1)),u=o-s/2;let l,c,p;return r>=0&&r<60?[l,c,p]=[s,a,0]:r>=60&&r<120?[l,c,p]=[a,s,0]:r>=120&&r<180?[l,c,p]=[0,s,a]:r>=180&&r<240?[l,c,p]=[0,a,s]:r>=240&&r<300?[l,c,p]=[a,0,s]:[l,c,p]=[s,0,a],[(l+u)*255,(c+u)*255,(p+u)*255]}function Yh(e,t,n){const r=F(e/255,0,1),i=F(t/255,0,1),o=F(n/255,0,1),s=Math.max(r,i,o),a=Math.min(r,i,o),u=s-a;let l;u===0?l=0:s===r?l=60*(((i-o)/u%6+6)%6):s===i?l=60*((o-r)/u+2):l=60*((r-i)/u+4);const c=s===0?0:u/s,p=s;return[l,c*100,p*100]}function Ro(e,t,n){const r=ao(e,360),i=F(t/100,0,1),o=F(n/100,0,1),s=o*i,a=s*(1-Math.abs(r/60%2-1)),u=o-s;let l,c,p;return r>=0&&r<60?[l,c,p]=[s,a,0]:r>=60&&r<120?[l,c,p]=[a,s,0]:r>=120&&r<180?[l,c,p]=[0,s,a]:r>=180&&r<240?[l,c,p]=[0,a,s]:r>=240&&r<300?[l,c,p]=[a,0,s]:[l,c,p]=[s,0,a],[(l+u)*255,(c+u)*255,(p+u)*255]}function Xh(e,t,n){const r=n+t*(100-Math.abs(2*n-100))/200;return[e,r!==0?t*(100-Math.abs(2*n-100))/r:0,n+t*(100-Math.abs(2*n-100))/(2*100)]}function Jh(e,t,n){const r=100-Math.abs(n*(200-t)/100-100);return[e,r!==0?t*n/r:0,n*(200-t)/(2*100)]}function ht(e){return[e[0],e[1],e[2]]}function fn(e,t){return[e[0],e[1],e[2],t]}const Qh={hsl:{hsl:(e,t,n)=>[e,t,n],hsv:Xh,rgb:Wh},hsv:{hsl:Jh,hsv:(e,t,n)=>[e,t,n],rgb:Ro},rgb:{hsl:Gh,hsv:Yh,rgb:(e,t,n)=>[e,t,n]}};function Qt(e,t){return[t==="float"?1:e==="rgb"?255:360,t==="float"?1:e==="rgb"?255:100,t==="float"?1:e==="rgb"?255:100]}function Zh(e,t){return e===t?t:ao(e,t)}function Do(e,t,n){var r;const i=Qt(t,n);return[t==="rgb"?F(e[0],0,i[0]):Zh(e[0],i[0]),F(e[1],0,i[1]),F(e[2],0,i[2]),F((r=e[3])!==null&&r!==void 0?r:1,0,1)]}function mi(e,t,n,r){const i=Qt(t,n),o=Qt(t,r);return e.map((s,a)=>s/i[a]*o[a])}function Oo(e,t,n){const r=mi(e,t.mode,t.type,"int"),i=Qh[t.mode][n.mode](...r);return mi(i,n.mode,"int",n.type)}class N{static black(){return new N([0,0,0],"rgb")}constructor(t,n){this.type="int",this.mode=n,this.comps_=Do(t,n,this.type)}getComponents(t){return fn(Oo(ht(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const Ct=S("colp");class td{constructor(t,n){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Ct()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Ct("hsv"));const i=t.createElement("div");i.classList.add(Ct("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=t.createElement("div");o.classList.add(Ct("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const s=t.createElement("div");if(s.classList.add(Ct("rgb")),this.textsView_=n.textsView,s.appendChild(this.textsView_.element),this.element.appendChild(s),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const a=t.createElement("div");a.classList.add(Ct("a"));const u=t.createElement("div");u.classList.add(Ct("ap")),u.appendChild(this.alphaViews_.palette.element),a.appendChild(u);const l=t.createElement("div");l.classList.add(Ct("at")),l.appendChild(this.alphaViews_.text.element),a.appendChild(l),this.element.appendChild(a)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function ed(e){return e==="int"?"int":e==="float"?"float":void 0}function br(e){return O(e,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(ed)}),expanded:t.optional.boolean,picker:t.optional.custom(Lo),readonly:t.optional.constant(!1)}))}function It(e){return e?.1:1}function Bo(e){var t;return(t=e.color)===null||t===void 0?void 0:t.type}class gr{constructor(t,n){this.type="float",this.mode=n,this.comps_=Do(t,n,this.type)}getComponents(t){return fn(Oo(ht(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const nd={int:(e,t)=>new N(e,t),float:(e,t)=>new gr(e,t)};function _r(e,t,n){return nd[n](e,t)}function rd(e){return e.type==="float"}function id(e){return e.type==="int"}function od(e){const t=e.getComponents(),n=Qt(e.mode,"int");return new N([Math.round(T(t[0],0,1,0,n[0])),Math.round(T(t[1],0,1,0,n[1])),Math.round(T(t[2],0,1,0,n[2])),t[3]],e.mode)}function sd(e){const t=e.getComponents(),n=Qt(e.mode,"int");return new gr([T(t[0],0,n[0],0,1),T(t[1],0,n[1],0,1),T(t[2],0,n[2],0,1),t[3]],e.mode)}function H(e,t){if(e.type===t)return e;if(id(e)&&t==="float")return sd(e);if(rd(e)&&t==="int")return od(e);throw B.shouldNeverHappen()}function ad(e,t){return e.alpha===t.alpha&&e.mode===t.mode&&e.notation===t.notation&&e.type===t.type}function rt(e,t){const n=e.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*t:parseFloat(e),t)}const ld={deg:e=>e,grad:e=>e*360/400,rad:e=>e*360/(2*Math.PI),turn:e=>e*360};function Io(e){const t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);const n=parseFloat(t[1]),r=t[2];return ld[r](n)}function $o(e){const t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[rt(t[1],255),rt(t[2],255),rt(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function ud(e){const t=$o(e);return t?new N(t,"rgb"):null}function Fo(e){const t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[rt(t[1],255),rt(t[2],255),rt(t[3],255),rt(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function cd(e){const t=Fo(e);return t?new N(t,"rgb"):null}function jo(e){const t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Io(t[1]),rt(t[2],100),rt(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function pd(e){const t=jo(e);return t?new N(t,"hsl"):null}function zo(e){const t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Io(t[1]),rt(t[2],100),rt(t[3],100),rt(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function hd(e){const t=zo(e);return t?new N(t,"hsl"):null}function Ko(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const n=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function dd(e){const t=Ko(e);return t?new N(t,"rgb"):null}function Uo(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),T(parseInt(t[4]+t[4],16),0,255,0,1)];const n=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),T(parseInt(n[4],16),0,255,0,1)]:null}function fd(e){const t=Uo(e);return t?new N(t,"rgb"):null}function Ho(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function vd(e){return t=>{const n=Ho(t);return n?_r(n,"rgb",e):null}}function qo(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function md(e){return t=>{const n=qo(t);return n?_r(n,"rgb",e):null}}const bd=[{parser:Ko,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Uo,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:$o,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Fo,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:jo,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:zo,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Ho,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:qo,result:{alpha:!0,mode:"rgb",notation:"object"}}];function gd(e){return bd.reduce((t,{parser:n,result:r})=>t||(n(e)?r:null),null)}function _d(e,t="int"){const n=gd(e);return n?n.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:t}):null:null}function Ne(e){const t=[dd,fd,ud,cd,pd,hd];t.push(vd("int"),md("int"));const n=Lh(t);return r=>{const i=n(r);return i?H(i,e):null}}function wd(e){const t=Ne("int");if(typeof e!="string")return N.black();const n=t(e);return n??N.black()}function Go(e){const t=F(Math.floor(e),0,255).toString(16);return t.length===1?`0${t}`:t}function wr(e,t="#"){const n=ht(e.getComponents("rgb")).map(Go).join("");return`${t}${n}`}function yr(e,t="#"){const n=e.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(Go).join("");return`${t}${r}`}function Wo(e){const t=X(0),n=H(e,"int");return`rgb(${ht(n.getComponents("rgb")).map(i=>t(i)).join(", ")})`}function Ke(e){const t=X(2),n=X(0);return`rgba(${H(e,"int").getComponents("rgb").map((o,s)=>(s===3?t:n)(o)).join(", ")})`}function yd(e){const t=[X(0),on,on],n=H(e,"int");return`hsl(${ht(n.getComponents("hsl")).map((i,o)=>t[o](i)).join(", ")})`}function xd(e){const t=[X(0),on,on,X(2)];return`hsla(${H(e,"int").getComponents("hsl").map((i,o)=>t[o](i)).join(", ")})`}function Yo(e,t){const n=X(t==="float"?2:0),r=["r","g","b"],i=H(e,t);return`{${ht(i.getComponents("rgb")).map((s,a)=>`${r[a]}: ${n(s)}`).join(", ")}}`}function Cd(e){return t=>Yo(t,e)}function Xo(e,t){const n=X(2),r=X(t==="float"?2:0),i=["r","g","b","a"];return`{${H(e,t).getComponents("rgb").map((a,u)=>{const l=u===3?n:r;return`${i[u]}: ${l(a)}`}).join(", ")}}`}function Pd(e){return t=>Xo(t,e)}const kd=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:wr},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:yr},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Wo},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Ke},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:yd},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:xd},...["int","float"].reduce((e,t)=>[...e,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:Cd(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:Pd(t)}],[])];function Jo(e){return kd.reduce((t,n)=>t||(ad(n.format,e)?n.stringifier:null),null)}const ae=S("apl");class Ed{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(ae()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(ae("b")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(ae("c")),r.appendChild(i),this.colorElem_=i;const o=t.createElement("div");o.classList.add(ae("m")),this.element.appendChild(o),this.markerElem_=o;const s=t.createElement("div");s.classList.add(ae("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}update_(){const t=this.value.rawValue,n=t.getComponents("rgb"),r=new N([n[0],n[1],n[2],0],"rgb"),i=new N([n[0],n[1],n[2],255],"rgb"),o=["to right",Ke(r),Ke(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=Ke(t);const s=T(n[3],0,1,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class Md{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Ed(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ft(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=t.point.x/t.bounds.width,i=this.value.rawValue,[o,s,a]=i.getComponents("hsv");this.value.setRawValue(new N([o,s,a,r],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=Y(It(!0),wt(t));if(n===0)return;const r=this.value.rawValue,[i,o,s,a]=r.getComponents("hsv");this.value.setRawValue(new N([i,o,s,a+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){Y(It(!0),wt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const jt=S("coltxt");function Vd(e){const t=e.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(n.reduce((r,i)=>{const o=e.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},e.createDocumentFragment())),t}class Ad{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(jt()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(jt("m")),this.modeElem_=Vd(t),this.modeElem_.classList.add(jt("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(jt("mm")),i.appendChild(hn(t,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=t.createElement("div");o.classList.add(jt("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),bt(n.mode,s=>{this.modeElem_.value=s})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){bo(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=t.createElement("div");r.classList.add(jt("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function Sd(e){return X(e==="float"?2:0)}function Nd(e,t,n){const r=Qt(e,t)[n];return new Ce({min:0,max:r})}function Td(e,t,n){return new Ae(e,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:t.parser,props:V.fromObject({formatter:Sd(t.colorType),keyScale:It(!1),pointerScale:t.colorType==="float"?.01:1}),value:D(0,{constraint:Nd(t.colorMode,t.colorType,n)}),viewProps:t.viewProps})}function Ld(e,t){const n={colorMode:t.colorMode,colorType:t.colorType,parser:_t,viewProps:t.viewProps};return[0,1,2].map(r=>{const i=Td(e,n,r);return ne({primary:t.value,secondary:i.value,forward(o){return H(o,t.colorType).getComponents(t.colorMode)[r]},backward(o,s){const a=t.colorMode,l=H(o,t.colorType).getComponents(a);l[r]=s;const c=_r(fn(ht(l),l[3]),a,t.colorType);return H(c,"int")}}),i})}function Rd(e,t){const n=new ge(e,{parser:Ne("int"),props:V.fromObject({formatter:wr}),value:D(N.black()),viewProps:t.viewProps});return ne({primary:t.value,secondary:n.value,forward:r=>new N(ht(r.getComponents()),r.mode),backward:(r,i)=>new N(fn(ht(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function Dd(e){return e!=="hex"}class Od{constructor(t,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=D(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Ad(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const n=this.colorMode.rawValue;return Dd(n)?Ld(t,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Rd(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const n=t.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const Pn=S("hpl");class Bd{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Pn()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(Pn("c")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Pn("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[n]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Wo(new N([n,100,100],"hsv"));const r=T(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class Id{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Bd(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ft(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=T(F(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,o,s,a]=i.getComponents("hsv");this.value.setRawValue(new N([r,o,s,a],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=Y(It(!1),wt(t));if(n===0)return;const r=this.value.rawValue,[i,o,s,a]=r.getComponents("hsv");this.value.setRawValue(new N([i+n,o,s,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){Y(It(!1),wt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const kn=S("svp"),bi=64;class $d{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(kn()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("canvas");r.height=bi,r.width=bi,r.classList.add(kn("c")),this.element.appendChild(r),this.canvasElement=r;const i=t.createElement("div");i.classList.add(kn("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=Ip(this.canvasElement);if(!t)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,s=t.getImageData(0,0,i,o),a=s.data;for(let c=0;c<o;c++)for(let p=0;p<i;p++){const h=T(p,0,i,0,100),d=T(c,0,o,100,0),g=Ro(r[0],h,d),v=(c*i+p)*4;a[v]=g[0],a[v+1]=g[1],a[v+2]=g[2],a[v+3]=255}t.putImageData(s,0,0);const u=T(r[1],0,100,0,100);this.markerElem_.style.left=`${u}%`;const l=T(r[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}}class Fd{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new $d(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ft(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=T(t.point.x,0,t.bounds.width,0,100),i=T(t.point.y,0,t.bounds.height,100,0),[o,,,s]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new N([o,r,i,s],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){So(t.key)&&t.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),s=It(!1),a=Y(s,wt(t)),u=Y(s,_e(t));a===0&&u===0||this.value.setRawValue(new N([n,r+a,i+u,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const n=It(!1),r=Y(n,wt(t)),i=Y(n,_e(t));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class jd{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new Id(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Fd(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Md(t,{value:this.value,viewProps:this.viewProps}),text:new Ae(t,{parser:_t,props:V.fromObject({pointerScale:.01,keyScale:.1,formatter:X(2)}),value:D(0,{constraint:new Ce({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ne({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new N(o,r.mode)}}),this.textsC_=new Od(t,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new td(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const En=S("colsw");class zd{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(En()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(En("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=t.createElement("button");i.classList.add(En("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=yr(t)}onValueChange_(){this.update_()}}class Kd{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new zd(t,{value:this.value,viewProps:this.viewProps})}}class xr{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ke.create(n.expanded),this.swatchC_=new Kd(t,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new ge(t,{parser:n.parser,props:V.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new qh(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Mo(t,{viewProps:this.viewProps}):null;const i=new jd(t,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ne({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,s)=>s})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=go(t);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!ar(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Ud(e){return ht(e.getComponents("rgb")).reduce((t,n)=>t<<8|Math.floor(n)&255,0)}function Hd(e){return e.getComponents("rgb").reduce((t,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return t<<8|i},0)>>>0}function qd(e){return new N([e>>16&255,e>>8&255,e&255],"rgb")}function Gd(e){return new N([e>>24&255,e>>16&255,e>>8&255,T(e&255,0,255,0,1)],"rgb")}function Wd(e){return typeof e!="number"?N.black():qd(e)}function Yd(e){return typeof e!="number"?N.black():Gd(e)}function Ue(e,t){return typeof e!="object"||L(e)?!1:t in e&&typeof e[t]=="number"}function Qo(e){return Ue(e,"r")&&Ue(e,"g")&&Ue(e,"b")}function Zo(e){return Qo(e)&&Ue(e,"a")}function ts(e){return Qo(e)}function Cr(e,t){if(e.mode!==t.mode||e.type!==t.type)return!1;const n=e.getComponents(),r=t.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function gi(e){return"a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b]}function Xd(e){const t=Jo(e);return t?(n,r)=>{Se(n,t(r))}:null}function Jd(e){const t=e?Hd:Ud;return(n,r)=>{Se(n,t(r))}}function Qd(e,t,n){const i=H(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b),e.writeProperty("a",i.a)}function Zd(e,t,n){const i=H(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b)}function tf(e,t){return(n,r)=>{e?Qd(n,r,t):Zd(n,r,t)}}function ef(e){var t;return!!(!((t=e==null?void 0:e.color)===null||t===void 0)&&t.alpha)}function nf(e){return e?t=>yr(t,"0x"):t=>wr(t,"0x")}function rf(e){return"color"in e||e.view==="color"}const of=G({id:"input-color-number",type:"input",accept:(e,t)=>{if(typeof e!="number"||!rf(t))return null;const n=br(t);return n?{initialValue:e,params:Object.assign(Object.assign({},n),{supportsAlpha:ef(t)})}:null},binding:{reader:e=>e.params.supportsAlpha?Yd:Wd,equals:Cr,writer:e=>Jd(e.params.supportsAlpha)},controller:e=>{var t,n;return new xr(e.document,{colorType:"int",expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:nf(e.params.supportsAlpha),parser:Ne("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:e.params.supportsAlpha,value:e.value,viewProps:e.viewProps})}});function sf(e,t){if(!ts(e))return H(N.black(),t);if(t==="int"){const n=gi(e);return new N(n,"rgb")}if(t==="float"){const n=gi(e);return new gr(n,"rgb")}return H(N.black(),"int")}function af(e){return Zo(e)}function lf(e){return t=>{const n=sf(t,e);return H(n,"int")}}function uf(e,t){return n=>e?Xo(n,t):Yo(n,t)}const cf=G({id:"input-color-object",type:"input",accept:(e,t)=>{var n;if(!ts(e))return null;const r=br(t);return r?{initialValue:e,params:Object.assign(Object.assign({},r),{colorType:(n=Bo(t))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:e=>lf(e.params.colorType),equals:Cr,writer:e=>tf(af(e.initialValue),e.params.colorType)},controller:e=>{var t,n;const r=Zo(e.initialValue);return new xr(e.document,{colorType:e.params.colorType,expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:uf(r,e.params.colorType),parser:Ne("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:e.value,viewProps:e.viewProps})}}),pf=G({id:"input-color-string",type:"input",accept:(e,t)=>{if(typeof e!="string"||t.view==="text")return null;const n=_d(e,Bo(t));if(!n)return null;const r=Jo(n);if(!r)return null;const i=br(t);return i?{initialValue:e,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>wd,equals:Cr,writer:e=>{const t=Xd(e.params.format);if(!t)throw B.notBindable();return t}},controller:e=>{var t,n;return new xr(e.document,{colorType:e.params.format.type,expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:e.params.stringifier,parser:Ne("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:e.params.format.alpha,value:e.value,viewProps:e.viewProps})}});class Pr{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const n=this.asm_.toComponents(t).map((r,i)=>{var o,s;return(s=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&s!==void 0?s:r});return this.asm_.fromComponents(n)}}const _i=S("pndtxt");class hf{constructor(t,n){this.textViews=n.textViews,this.element=t.createElement("div"),this.element.classList.add(_i()),this.textViews.forEach(r=>{const i=t.createElement("div");i.classList.add(_i("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function df(e,t,n){return new Ae(e,{arrayPosition:n===0?"fst":n===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[n].textProps,value:D(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}class kr{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>df(t,n,i)),this.acs_.forEach((r,i)=>{ne({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,s)=>{const a=n.assembly.toComponents(o);return a[i]=s,n.assembly.fromComponents(a)}})}),this.view=new hf(t,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class ff extends be{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}function vf(e,t){const n=[],r=co(e,t);r&&n.push(r);const i=po(e);i&&n.push(i);const o=mr(e.options);return o&&n.push(o),new Ee(n)}const mf=G({id:"input-number",type:"input",accept:(e,t)=>{if(typeof e!="number")return null;const n=O(t,r=>Object.assign(Object.assign({},fo(r)),{options:r.optional.custom(Ve),readonly:r.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>so,constraint:e=>vf(e.params,e.initialValue),writer:e=>Se},controller:e=>{const t=e.value,n=e.constraint,r=n&&rn(n,Me);if(r)return new At(e.document,{props:new V({options:r.values.value("options")}),value:t,viewProps:e.viewProps});const i=ho(e.params,t.rawValue),o=n&&rn(n,Ce);return o?new sn(e.document,Object.assign(Object.assign({},No(Object.assign(Object.assign({},i),{keyScale:D(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:_t,value:t,viewProps:e.viewProps})):new Ae(e.document,{parser:_t,props:V.fromObject(i),value:t,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="number"?null:e.controller.valueController instanceof sn?new ff(e.controller):e.controller.valueController instanceof At?new fr(e.controller):null}});class Vt{constructor(t=0,n=0){this.x=t,this.y=n}getComponents(){return[this.x,this.y]}static isObject(t){if(L(t))return!1;const n=t.x,r=t.y;return!(typeof n!="number"||typeof r!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y}toObject(){return{x:this.x,y:this.y}}}const es={toComponents:e=>e.getComponents(),fromComponents:e=>new Vt(...e)},zt=S("p2d");class bf{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(zt()),n.viewProps.bindClassModifiers(this.element),bt(n.expanded,Zt(this.element,zt(void 0,"expanded")));const r=t.createElement("div");r.classList.add(zt("h")),this.element.appendChild(r);const i=t.createElement("button");i.classList.add(zt("b")),i.appendChild(hn(t,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=t.createElement("div");if(o.classList.add(zt("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const s=t.createElement("div");s.classList.add(zt("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null}}const Pt=S("p2dp");class gf{constructor(t,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Pt()),n.layout==="popup"&&this.element.classList.add(Pt(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Pt("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=t.createElementNS(ut,"svg");i.classList.add(Pt("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=t.createElementNS(ut,"line");o.classList.add(Pt("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const s=t.createElementNS(ut,"line");s.classList.add(Pt("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);const a=t.createElementNS(ut,"line");a.classList.add(Pt("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const u=t.createElement("div");u.classList.add(Pt("m")),this.padElement.appendChild(u),this.markerElem_=u,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=T(t,-r,+r,0,100),o=T(n,-r,+r,0,100),s=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${s}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function wi(e,t,n){return[Y(t[0],wt(e)),Y(t[1],_e(e))*(n?1:-1)]}class _f{constructor(t,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new gf(t,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ft(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=this.props.get("max"),i=T(t.point.x,0,t.bounds.width,-r,+r),o=T(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-r,+r);this.value.setRawValue(new Vt(i,o),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){So(t.key)&&t.preventDefault();const[n,r]=wi(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Vt(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[n,r]=wi(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class wf{constructor(t,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ke.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Mo(t,{viewProps:this.viewProps}):null;const o=new _f(t,{layout:n.pickerLayout,props:new V({invertsY:D(n.invertsY),max:D(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new kr(t,{assembly:es,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new bf(t,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ne({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),dr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=go(t);r&&n.contains(r)||r&&r===this.view.buttonElement&&!ar(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function yf(e){return Vt.isObject(e)?new Vt(e.x,e.y):new Vt}function xf(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y)}function Cf(e,t){return new Pr({assembly:es,components:[mt(Object.assign(Object.assign({},e),e.x),t.x),mt(Object.assign(Object.assign({},e),e.y),t.y)]})}function yi(e,t){var n,r;if(!L(e.min)||!L(e.max))return Math.max(Math.abs((n=e.min)!==null&&n!==void 0?n:0),Math.abs((r=e.max)!==null&&r!==void 0?r:0));const i=lo(e);return Math.max(Math.abs(i)*10,Math.abs(t)*10)}function Pf(e,t){var n,r;const i=yi(Ot(e,(n=e.x)!==null&&n!==void 0?n:{}),t.x),o=yi(Ot(e,(r=e.y)!==null&&r!==void 0?r:{}),t.y);return Math.max(i,o)}function kf(e){if(!("y"in e))return!1;const t=e.y;return t&&"inverted"in t?!!t.inverted:!1}const Ef=G({id:"input-point2d",type:"input",accept:(e,t)=>{if(!Vt.isObject(e))return null;const n=O(t,r=>Object.assign(Object.assign({},we(r)),{expanded:r.optional.boolean,picker:r.optional.custom(Lo),readonly:r.optional.constant(!1),x:r.optional.custom(Mt),y:r.optional.object(Object.assign(Object.assign({},we(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:e,params:n}:null},binding:{reader:()=>yf,constraint:e=>Cf(e.params,e.initialValue),equals:Vt.equals,writer:()=>xf},controller:e=>{var t,n;const r=e.document,i=e.value,o=e.constraint,s=[e.params.x,e.params.y];return new wf(r,{axes:i.rawValue.getComponents().map((a,u)=>{var l;return sr({constraint:o.components[u],initialValue:a,params:Ot(e.params,(l=s[u])!==null&&l!==void 0?l:{})})}),expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,invertsY:kf(e.params),max:Pf(e.params,i.rawValue),parser:_t,pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:e.viewProps})}});class qt{constructor(t=0,n=0,r=0){this.x=t,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(L(t))return!1;const n=t.x,r=t.y,i=t.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ns={toComponents:e=>e.getComponents(),fromComponents:e=>new qt(...e)};function Mf(e){return qt.isObject(e)?new qt(e.x,e.y,e.z):new qt}function Vf(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}function Af(e,t){return new Pr({assembly:ns,components:[mt(Object.assign(Object.assign({},e),e.x),t.x),mt(Object.assign(Object.assign({},e),e.y),t.y),mt(Object.assign(Object.assign({},e),e.z),t.z)]})}const Sf=G({id:"input-point3d",type:"input",accept:(e,t)=>{if(!qt.isObject(e))return null;const n=O(t,r=>Object.assign(Object.assign({},we(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Mt),y:r.optional.custom(Mt),z:r.optional.custom(Mt)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Mf,constraint:e=>Af(e.params,e.initialValue),equals:qt.equals,writer:e=>Vf},controller:e=>{const t=e.value,n=e.constraint,r=[e.params.x,e.params.y,e.params.z];return new kr(e.document,{assembly:ns,axes:t.rawValue.getComponents().map((i,o)=>{var s;return sr({constraint:n.components[o],initialValue:i,params:Ot(e.params,(s=r[o])!==null&&s!==void 0?s:{})})}),parser:_t,value:t,viewProps:e.viewProps})}});class Gt{constructor(t=0,n=0,r=0,i=0){this.x=t,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(L(t))return!1;const n=t.x,r=t.y,i=t.z,o=t.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z&&t.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const rs={toComponents:e=>e.getComponents(),fromComponents:e=>new Gt(...e)};function Nf(e){return Gt.isObject(e)?new Gt(e.x,e.y,e.z,e.w):new Gt}function Tf(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}function Lf(e,t){return new Pr({assembly:rs,components:[mt(Object.assign(Object.assign({},e),e.x),t.x),mt(Object.assign(Object.assign({},e),e.y),t.y),mt(Object.assign(Object.assign({},e),e.z),t.z),mt(Object.assign(Object.assign({},e),e.w),t.w)]})}const Rf=G({id:"input-point4d",type:"input",accept:(e,t)=>{if(!Gt.isObject(e))return null;const n=O(t,r=>Object.assign(Object.assign({},we(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Mt),x:r.optional.custom(Mt),y:r.optional.custom(Mt),z:r.optional.custom(Mt)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Nf,constraint:e=>Lf(e.params,e.initialValue),equals:Gt.equals,writer:e=>Tf},controller:e=>{const t=e.value,n=e.constraint,r=[e.params.x,e.params.y,e.params.z,e.params.w];return new kr(e.document,{assembly:rs,axes:t.rawValue.getComponents().map((i,o)=>{var s;return sr({constraint:n.components[o],initialValue:i,params:Ot(e.params,(s=r[o])!==null&&s!==void 0?s:{})})}),parser:_t,value:t,viewProps:e.viewProps})}});function Df(e){const t=[],n=mr(e.options);return n&&t.push(n),new Ee(t)}const Of=G({id:"input-string",type:"input",accept:(e,t)=>{if(typeof e!="string")return null;const n=O(t,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(Ve)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ao,constraint:e=>Df(e.params),writer:e=>Se},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&rn(r,Me);return i?new At(t,{props:new V({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new ge(t,{parser:o=>o,props:V.fromObject({formatter:zn}),value:n,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="string"?null:e.controller.valueController instanceof At?new fr(e.controller):null}}),Te={monitor:{defaultInterval:200,defaultRows:3}},xi=S("mll");class Bf{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(xi()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("textarea");r.classList.add(xi("i")),r.style.height=`calc(var(${To("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class Er{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Bf(t,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const Ci=S("sgl");class If{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Ci()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(Ci("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.value.rawValue,n=t[t.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class Mr{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new If(t,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}const $f=G({id:"monitor-bool",type:"monitor",accept:(e,t)=>{if(typeof e!="boolean")return null;const n=O(t,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Vo},controller:e=>{var t;return e.value.rawValue.length===1?new Mr(e.document,{formatter:vi,value:e.value,viewProps:e.viewProps}):new Er(e.document,{formatter:vi,rows:(t=e.params.rows)!==null&&t!==void 0?t:Te.monitor.defaultRows,value:e.value,viewProps:e.viewProps})}});class Ff extends be{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const kt=S("grl");class jf{constructor(t,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(kt()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=t.createElementNS(ut,"svg");r.classList.add(kt("g")),r.style.height=`calc(var(${To("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(ut,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=t.createElement("div");o.classList.add(kt("t"),S("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:n}=this.element,r=this.value.rawValue.length-1,i=this.props_.get("min"),o=this.props_.get("max"),s=[];this.value.rawValue.forEach((p,h)=>{if(p===void 0)return;const d=T(h,0,r,0,t),g=T(p,i,o,n,0);s.push([d,g].join(","))}),this.lineElem_.setAttributeNS(null,"points",s.join(" "));const a=this.tooltipElem_,u=this.value.rawValue[this.cursor_.rawValue];if(u===void 0){a.classList.remove(kt("t","a"));return}const l=T(this.cursor_.rawValue,0,r,0,t),c=T(u,i,o,n,0);a.style.left=`${l}px`,a.style.top=`${c}px`,a.textContent=`${this.formatter_(u)}`,a.classList.contains(kt("t","a"))||(a.classList.add(kt("t","a"),kt("t","in")),nn(a),a.classList.remove(kt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class is{constructor(t,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=D(-1),this.view=new jf(t,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!ar(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Ft(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return Z(t,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return tt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(T(t.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(T(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Kn(e){return L(e.format)?X(2):e.format}function zf(e){var t;return e.value.rawValue.length===1?new Mr(e.document,{formatter:Kn(e.params),value:e.value,viewProps:e.viewProps}):new Er(e.document,{formatter:Kn(e.params),rows:(t=e.params.rows)!==null&&t!==void 0?t:Te.monitor.defaultRows,value:e.value,viewProps:e.viewProps})}function Kf(e){var t,n,r;return new is(e.document,{formatter:Kn(e.params),rows:(t=e.params.rows)!==null&&t!==void 0?t:Te.monitor.defaultRows,props:V.fromObject({max:(n=e.params.max)!==null&&n!==void 0?n:100,min:(r=e.params.min)!==null&&r!==void 0?r:0}),value:e.value,viewProps:e.viewProps})}function Pi(e){return e.view==="graph"}const Uf=G({id:"monitor-number",type:"monitor",accept:(e,t)=>{if(typeof e!="number")return null;const n=O(t,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:e,params:n}:null},binding:{defaultBufferSize:e=>Pi(e)?64:1,reader:e=>so},controller:e=>Pi(e.params)?Kf(e):zf(e),api:e=>e.controller.valueController instanceof is?new Ff(e.controller):null}),Hf=G({id:"monitor-string",type:"monitor",accept:(e,t)=>{if(typeof e!="string")return null;const n=O(t,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ao},controller:e=>{var t;const n=e.value;return n.rawValue.length>1||e.params.multiline?new Er(e.document,{formatter:zn,rows:(t=e.params.rows)!==null&&t!==void 0?t:Te.monitor.defaultRows,value:n,viewProps:e.viewProps}):new Mr(e.document,{formatter:zn,value:n,viewProps:e.viewProps})}});class qf{constructor(){this.map_=new Map}get(t){var n;return(n=this.map_.get(t))!==null&&n!==void 0?n:null}has(t){return this.map_.has(t)}add(t,n){return this.map_.set(t,n),t.viewProps.handleDispose(()=>{this.map_.delete(t)}),n}}class Gf{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}function Wf(e,t){var n;const r=e.accept(t.target.read(),t.params);if(L(r))return null;const i={target:t.target,initialValue:r.initialValue,params:r.params},o=O(t.params,p=>({disabled:p.optional.boolean,hidden:p.optional.boolean,label:p.optional.string,tag:p.optional.string})),s=e.binding.reader(i),a=e.binding.constraint?e.binding.constraint(i):void 0,u=new Gf({reader:s,target:t.target,writer:e.binding.writer(i)}),l=new Sp(D(s(r.initialValue),{constraint:a,equals:e.binding.equals}),u),c=e.controller({constraint:a,document:t.document,initialValue:r.initialValue,params:r.params,value:l,viewProps:yt.create({disabled:o==null?void 0:o.disabled,hidden:o==null?void 0:o.hidden})});return new Hp(t.document,{blade:ee(),props:V.fromObject({label:"label"in t.params?(n=o==null?void 0:o.label)!==null&&n!==void 0?n:null:t.target.key}),tag:o==null?void 0:o.tag,value:l,valueController:c})}class Yf{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}function Xf(e,t){return t===0?new Mh:new Vh(e,t??Te.monitor.defaultInterval)}function Jf(e,t){var n,r,i;const o=e.accept(t.target.read(),t.params);if(L(o))return null;const s={target:t.target,initialValue:o.initialValue,params:o.params},a=O(t.params,h=>({bufferSize:h.optional.number,disabled:h.optional.boolean,hidden:h.optional.boolean,interval:h.optional.number,label:h.optional.string})),u=e.binding.reader(s),l=(r=(n=a==null?void 0:a.bufferSize)!==null&&n!==void 0?n:e.binding.defaultBufferSize&&e.binding.defaultBufferSize(o.params))!==null&&r!==void 0?r:1,c=new Xp({binding:new Yf({reader:u,target:t.target}),bufferSize:l,ticker:Xf(t.document,a==null?void 0:a.interval)}),p=e.controller({document:t.document,params:o.params,value:c,viewProps:yt.create({disabled:a==null?void 0:a.disabled,hidden:a==null?void 0:a.hidden})});return p.viewProps.bindDisabled(c.ticker),p.viewProps.handleDispose(()=>{c.ticker.dispose()}),new Qp(t.document,{blade:ee(),props:V.fromObject({label:"label"in t.params?(i=a==null?void 0:a.label)!==null&&i!==void 0?i:null:t.target.key}),value:c,valueController:p})}class Qf{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,n){if(!jh(n.core))throw B.notCompatible(t,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(t,n,r){return this.pluginsMap_.inputs.reduce((i,o)=>i??Wf(o,{document:t,target:n,params:r}),null)}createMonitor_(t,n,r){return this.pluginsMap_.monitors.reduce((i,o)=>i??Jf(o,{document:t,params:r,target:n}),null)}createBinding(t,n,r){const i=n.read();if(L(i))throw new B({context:{key:n.key},type:"nomatchingcontroller"});const o=this.createInput_(t,n,r);if(o)return o;const s=this.createMonitor_(t,n,r);if(s)return s;throw new B({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(t,n){const r=this.pluginsMap_.blades.reduce((i,o)=>i??Eh(o,{document:t,params:n}),null);if(!r)throw new B({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(t){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var o,s;return r||((s=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:t}))!==null&&s!==void 0?s:null)},null);return this.apiCache_.add(t,n??new be(t))}createMonitorBindingApi_(t){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var o,s;return r||((s=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:t}))!==null&&s!==void 0?s:null)},null);return this.apiCache_.add(t,n??new be(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(qp(t))return this.createInputBindingApi_(t);if(Zp(t))return this.createMonitorBindingApi_(t);throw B.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(Up(t))return this.createBindingApi(t);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:t,pool:this}),null);if(!n)throw B.shouldNeverHappen();return this.apiCache_.add(t,n)}}const Zf=new qf;function tv(){const e=new Qf(Zf);return[Ef,Sf,Rf,Of,mf,pf,cf,of,Hh,$f,Hf,Uf,ih,bh,Eo].forEach(t=>{e.register("core",t)}),e}class ev extends $t{constructor(t){super(t),this.emitter_=new $,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Pe(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class nv extends $t{}class rv extends $t{constructor(t){super(t),this.emitter_=new $,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Pe(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class iv extends $t{constructor(t){super(t),this.emitter_=new $,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Pe(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const ov=function(){return{id:"list",type:"blade",core:te,accept(e){const t=O(e,n=>({options:n.required.custom(Ve),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return t?{params:t}:null},controller(e){const t=new Me(vr(e.params.options)),n=D(e.params.value,{constraint:t}),r=new At(e.document,{props:new V({options:t.values.value("options")}),value:n,viewProps:e.viewProps});return new Bt(e.document,{blade:e.blade,props:V.fromObject({label:e.params.label}),value:n,valueController:r})},api(e){return!(e.controller instanceof Bt)||!(e.controller.valueController instanceof At)?null:new ev(e.controller)}}}();class sv extends Po{constructor(t,n){super(t,n)}get element(){return this.controller.view.element}}class av extends Fn{constructor(t,n){super(t,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const ki=S("spr");class lv{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ki()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("hr");r.classList.add(ki("r")),this.element.appendChild(r)}}class Ei extends dn{constructor(t,n){super(Object.assign(Object.assign({},n),{view:new lv(t,{viewProps:n.viewProps})}))}}const uv={id:"separator",type:"blade",core:te,accept(e){const t=O(e,n=>({view:n.required.constant("separator")}));return t?{params:t}:null},controller(e){return new Ei(e.document,{blade:e.blade,viewProps:e.viewProps})},api(e){return e.controller instanceof Ei?new nv(e.controller):null}},cv={id:"slider",type:"blade",core:te,accept(e){const t=O(e,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return t?{params:t}:null},controller(e){var t,n;const r=(t=e.params.value)!==null&&t!==void 0?t:0,i=new Ce({max:e.params.max,min:e.params.min}),o=D(r,{constraint:i}),s=new sn(e.document,Object.assign(Object.assign({},No({formatter:(n=e.params.format)!==null&&n!==void 0?n:kp,keyScale:D(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:uo(e.params,r)})),{parser:_t,value:o,viewProps:e.viewProps}));return new Bt(e.document,{blade:e.blade,props:V.fromObject({label:e.params.label}),value:o,valueController:s})},api(e){return!(e.controller instanceof Bt)||!(e.controller.valueController instanceof sn)?null:new rv(e.controller)}},pv=function(){return{id:"text",type:"blade",core:te,accept(e){const t=O(e,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return t?{params:t}:null},controller(e){var t;const n=D(e.params.value),r=new ge(e.document,{parser:e.params.parse,props:V.fromObject({formatter:(t=e.params.format)!==null&&t!==void 0?t:i=>String(i)}),value:n,viewProps:e.viewProps});return new Bt(e.document,{blade:e.blade,props:V.fromObject({label:e.params.label}),value:n,valueController:r})},api(e){return!(e.controller instanceof Bt)||!(e.controller.valueController instanceof ge)?null:new iv(e.controller)}}}();function hv(e){const t=e.createElement("div");return t.classList.add(S("dfw")()),e.body&&e.body.appendChild(t),t}function dv(e,t,n){if(e.querySelector(`style[data-tp-style=${t}]`))return;const r=e.createElement("style");r.dataset.tpStyle=t,r.textContent=n,e.head.appendChild(r)}class fv extends sv{constructor(t){var n,r;const i=t??{},o=(n=i.document)!==null&&n!==void 0?n:Bp(),s=tv(),a=new av(o,{expanded:i.expanded,blade:ee(),props:V.fromObject({title:i.title}),viewProps:yt.create()});super(a,s),this.pool_=s,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:hv(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw B.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw B.alreadyDisposed();if(this.usesDefaultWrapper_){const n=t.parentElement;n&&n.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&dv(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(r=>{this.pool_.register(t.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[ov,uv,cv,Eo,pv]})}}new Co("4.0.5");const vv=[{id:"Joshua Goldberg",level:0},{id:"Australi Witness",level:0},{id:"Moon Metropolis",level:0},{id:"Michael Slay",level:0},{id:"Tanya Cohen",level:0},{id:"European88",level:0},{id:"Metropolis Forever",level:0},{id:"Ryoko Tamada",level:0},{id:"Emily Goldstein",level:0},{id:"Elton Simpson",parent:"Australi Witness",level:1},{id:"Nadir Soofi",parent:"Australi Witness",level:1},{id:"Mariam Veiszadeh",parent:"Michael Slay",level:1},{id:"Andrew Anglin",parent:"Michael Slay",level:1},{id:"Milo Yiannopoulos",parent:"Moon Metropolis",level:1},{id:"Reddit",parent:"European88",level:1},{id:"Josh Bornstein",parent:"Joshua Goldberg",level:1},{id:"Lindsay Campbell",parent:"Joshua Goldberg",level:1},{id:"Shaun King",parent:"Moon Metropolis",level:1},{id:"Gamergate",parent:"Moon Metropolis",level:1},{id:"Elise Potaka",parent:"Joshua Goldberg",level:1},{id:"Luke McMahon",parent:"Joshua Goldberg",level:1},{id:"Pamela Geller",parent:"Australi Witness",level:1},{id:"James Taranto (WSJ)",parent:"Tanya Cohen",level:1},{id:"Amnesty International",parent:"Australi Witness",level:1},{id:"Junaid Thorne",parent:"Australi Witness",level:1},{id:"Mike Wendling",parent:"Moon Metropolis",level:1},{id:"Jim Berry",parent:"Australi Witness",level:1},{id:"Weev (Andrew Auernheimer)",parent:"Moon Metropolis",level:1},{id:"Ben Garrison",parent:"Joshua Goldberg",level:1},{id:"Bindi Cole",parent:"Australi Witness",level:1},{id:"Bill Leak",parent:"Australi Witness",level:1},{id:"Caitlin Roper",parent:"Joshua Goldberg",level:1},{id:"Chiara Zaffino",parent:"Moon Metropolis",level:1},{id:"Cyndi Lavrenci",parent:"Metropolis Forever",level:1},{id:"Grant Taylor",parent:"Metropolis Forever",level:1},{id:"Jilian C. York",parent:"Ryoko Tamada",level:1},{id:"Larry Pickering",parent:"Australi Witness",level:1},{id:"Tom Minear",parent:"Metropolis Forever",level:1},{id:"Alice Pooley",parent:"Moon Metropolis",level:1},{id:"Peter Wallace",parent:"Moon Metropolis",level:1},{id:"Rita Katz",parent:"Australi Witness",level:1},{id:"Rita Panahi",parent:"Moon Metropolis",level:1},{id:"Nikki",parent:"Moon Metropolis",level:1},{id:"Elon Musk",parent:"Emily Goldstein",level:1},{id:"AFP Federal Agent as Mohamadmo7",parent:"Australi Witness",level:1},{id:"FBI as Wilayahks",parent:"Australi Witness",level:1}],mv=[{source:"Australi Witness",target:"Elton Simpson",type:"Incitation terroriste",direction:"inbound",linkType:"direct",impact:10},{source:"Australi Witness",target:"Nadir Soofi",type:"Incitation terroriste",direction:"inbound",linkType:"direct",impact:10},{source:"Michael Slay",target:"Mariam Veiszadeh",type:"Ciblage & harclement",direction:"inbound",linkType:"indirect",impact:9},{source:"Tanya Cohen",target:"Mariam Veiszadeh",type:"Instrumentalisation",direction:"inbound",linkType:"direct",impact:0},{source:"Michael Slay",target:"Andrew Anglin",type:"Infiltration",direction:"inbound",linkType:"direct",impact:7},{source:"Moon Metropolis",target:"Milo Yiannopoulos",type:"Collaboration dsinformation",direction:"inbound",linkType:"direct",impact:7},{source:"European88",target:"Reddit",type:"modration",direction:"inbound",linkType:"direct",impact:8},{source:"Joshua Goldberg",target:"Josh Bornstein",type:"Usurpation d'identit",direction:"inbound",linkType:"direct",impact:10},{source:"Joshua Goldberg",target:"Lindsay Campbell",type:"Enqute FBI",direction:"outbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Shaun King",type:"Dsinformation mdiatique",direction:"inbound",linkType:"indirect",impact:6},{source:"Moon Metropolis",target:"Gamergate",type:"Trolling politique",direction:"inbound",linkType:"indirect",impact:6},{source:"Joshua Goldberg",target:"Elise Potaka",type:"Impersonation",direction:"inbound",linkType:"direct",impact:9},{source:"Joshua Goldberg",target:"Luke McMahon",type:"Ennemi",direction:"outbound",linkType:"direct",impact:9},{source:"Australi Witness",target:"Pamela Geller",type:"Menace de mort",direction:"inbound",linkType:"indirect",impact:7},{source:"Tanya Cohen",target:"James Taranto (WSJ)",type:"Dsinformation mdiatique",direction:"inbound",linkType:"indirect",impact:5},{source:"Australi Witness",target:"Amnesty International",type:"dsinformation",direction:"inbound",linkType:"direct",impact:7},{source:"Australi Witness",target:"Junaid Thorne",type:"Usurpation d'identit",direction:"inbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Mike Wendling",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Australi Witness",target:"Jim Berry",type:"Enquteur",direction:"outbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Weev (Andrew Auernheimer)",type:"Collaboration dsinformation",direction:"inbound",linkType:"direct",impact:6},{source:"Joshua Goldberg",target:"Ben Garrison",type:"impersonation",direction:"inbound",linkType:"direct",impact:6},{source:"Australi Witness",target:"Bindi Cole",type:"Ciblage & harclement",direction:"inbound",linkType:"direct",impact:4},{source:"Australi Witness",target:"Bill Leak",type:"Menace de mort",direction:"inbound",linkType:"direct",impact:5},{source:"Joshua Goldberg",target:"Caitlin Roper",type:"Impersonnation",direction:"inbound",linkType:"direct",impact:5},{source:"Moon Metropolis",target:"Chiara Zaffino",type:"manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Metropolis Forever",target:"Cyndi Lavrenci",type:"manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Metropolis Forever",target:"Grant Taylor",type:"Journaliste exposant Goldberg",direction:"inbound",linkType:"direct",impact:8},{source:"Ryoko Tamada",target:"Jilian C. York",type:"Manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Australi Witness",target:"Larry Pickering",type:"Menaces de mort",direction:"inbound",linkType:"direct",impact:5},{source:"Metropolis Forever",target:"Tom Minear",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Moon Metropolis",target:"Alice Pooley",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Moon Metropolis",target:"Peter Wallace",type:"Dsinformation mdiatique",direction:"inbound",linkType:"direct",impact:8},{source:"Australi Witness",target:"Rita Katz",type:"Dsinformation mdiatique",direction:"inbound",linkType:"indirect",impact:9},{source:"Moon Metropolis",target:"Rita Panahi",type:"Manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Moon Metropolis",target:"Nikki",type:"amie",direction:"inbound",linkType:"direct",impact:5},{source:"Emily Goldstein",target:"Elon Musk",type:"Amplification de fake news",direction:"inbound",linkType:"indirect",impact:9},{source:"Australi Witness",target:"AFP Federal Agent as Mohamadmo7",type:"Infiltration",direction:"outbound",linkType:"direct",impact:0},{source:"Australi Witness",target:"FBI as Wilayahks",type:"Infiltration",direction:"outbound",linkType:"direct",impact:0}],nt={nodes:vv,edges:mv};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("graph"),t=e.clientWidth,n=e.clientHeight,r=30,i=no().domain([0,1,2,3,4,5,6,7,8,9,10]).range(["red","#f1f1f1","#dedede","#c6c6c6","#a7a7a7","#878787","#686868","#474747","#222222","#000000"]),o=Yt("#graph").append("svg").attr("width",t).attr("height",n).style("background","#F2EFDD");o.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#666");const a=o.append("g").attr("class","text-layer").style("z-index","1"),u=o.append("g").attr("class","text-layer").style("z-index","1"),l=o.append("g").attr("class","link-layer").style("z-index","2"),c=o.append("g").attr("class","node-layer").style("z-index","3"),p=_c(nt.nodes).force("link",pc(nt.edges).id(m=>m.id).distance(m=>150+(m.impact||0)*10).strength(.7)).force("charge",wc().strength(m=>m.level===0?-1e3:-500)).force("center",qr(t/2,n/2)).force("x",yc(t/2).strength(.1)).force("y",xc(n/2).strength(.1)).force("collision",uc().radius(r*1.5)),h=l.selectAll("path").data(nt.edges).join("path").attr("class","link").attr("stroke",m=>i(m.impact||0)).attr("stroke-width",1).attr("stroke-dasharray",m=>m.linkType==="direct"?null:"5,5").attr("marker-end","url(#arrowhead)").attr("fill","none"),d=u.selectAll("text").data(nt.edges).join("text").text(m=>m.type).attr("text-anchor","left").attr("dominant-baseline","middle").style("font-size","10px").style("font-family","Arial, sans-serif").style("pointer-events","none").style("user-select","none").style("fill","#333").call(b,r*2),g=a.selectAll("text").data(nt.nodes).join("text").text(m=>m.id).attr("x",m=>m.x).attr("y",m=>m.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",m=>m.level===0?"12px":"10px").style("font-family","Arial, sans-serif").style("pointer-events","none").style("user-select","none").style("fill","#333").call(b,r*2),v=c.selectAll("g").data(nt.nodes).join("g").style("pointer-events","all").call(ol().on("start",(m,y)=>{m.active||p.alphaTarget(.3).restart(),y.fx=y.x,y.fy=y.y}).on("drag",(m,y)=>{y.fx=m.x,y.fy=m.y}).on("end",(m,y)=>{m.active||p.alphaTarget(0),y.fx=null,y.fy=null})).on("mouseover",_).on("mouseout",w);v.append("circle").attr("r",m=>m.level===0?r*1.2:r).attr("fill","none").attr("stroke",m=>m.level===0?"#666":"#999").attr("stroke-width",m=>m.level===0?2:1).style("pointer-events","all");function b(m,y){m.each(function(){const C=Yt(this),M=C.text().split(/\s+/).reverse(),E=1.2,k=0,R=0;let A,I=[],it=0,j=C.text(null).append("tspan").attr("x",0).attr("y",k).attr("dy",`${R}em`);for(;A=M.pop();)I.push(A),j.text(I.join(" ")),j.node().getComputedTextLength()>y&&(I.pop(),j.text(I.join(" ")),I=[A],j=C.append("tspan").attr("x",0).attr("y",k).attr("dy",`${++it*E}em`).text(A));const J=C.selectAll("tspan"),xt=-((J.size()-1)*E)/2;J.attr("dy",(Vr,vn)=>`${xt+vn*E}em`)})}function _(m,y){const C=new Set;C.add(y.id),nt.edges.forEach(M=>{M.source.id===y.id&&C.add(M.target.id),M.target.id===y.id&&C.add(M.source.id)}),v.transition().duration(300).style("opacity",M=>C.has(M.id)?1:.1),g.transition().duration(300).style("opacity",M=>C.has(M.id)?1:.1),h.transition().duration(300).style("opacity",M=>C.has(M.source.id)&&C.has(M.target.id)?1:.1)}function w(){v.transition().duration(300).style("opacity",1),g.transition().duration(300).style("opacity",1),h.transition().duration(300).style("opacity",1)}p.on("tick",()=>{h.attr("d",m=>{const y=m.target.x-m.source.x,C=m.target.y-m.source.y,M=Math.sqrt(y*y+C*C),E=Math.atan2(C,y),k=m.source.level===0?r*1.2:r,R=m.target.level===0?r*1.2:r,A=-Math.sin(E),I=Math.cos(E),it=15,j=m.source.x+k*Math.cos(E)+A*it,J=m.source.y+k*Math.sin(E)+I*it,lt=15,z=m.target.x-(R+lt)*Math.cos(E)+A*it,xt=m.target.y-(R+lt)*Math.sin(E)+I*it,Vr=.2,vn=(j+z)/2,os=(J+xt)/2,Ar=M*Vr;return`M${j},${J} Q${vn+A*Ar},${os+I*Ar} ${z},${xt}`}),d.attr("transform",m=>{const y=(m.target.x+m.source.x)/2,C=(m.target.y+m.source.y)/2;return`translate(${y},${C})`}),v.attr("transform",m=>`translate(${m.x},${m.y})`),g.attr("transform",m=>`translate(${m.x},${m.y})`)});const P=new fv({title:"Graph Controls"});P.addButton({title:"Download SVG"}).on("click",()=>{const y=new XMLSerializer().serializeToString(o.node()),C=document.createElement("a"),M=new Blob([y],{type:"image/svg+xml;charset=utf-8"});C.href=URL.createObjectURL(M),C.download="visualization.svg",document.body.appendChild(C),C.click(),document.body.removeChild(C)}),P.addButton({title:"Refresh data"}).on("click",()=>{nt.nodes.forEach(m=>{p.nodes().forEach(y=>{y.id===m.id&&Object.assign(y,m)})}),p.alpha(.3).restart(),x()});const f={linkDistance:150,linkStrength:.7,charge:-500,collisionRadius:80};P.addBinding(f,"linkDistance",{min:50,max:300,step:1}).on("change",m=>{p.force("link").distance(m.value),p.alpha(.3).restart()}),P.addBinding(f,"linkStrength",{min:0,max:2,step:.1}).on("change",m=>{p.force("link").strength(m.value),p.alpha(.3).restart()}),P.addBinding(f,"charge",{min:-1e3,max:100,step:10}).on("change",m=>{p.force("charge").strength(m.value),p.alpha(.3).restart()}),P.addBinding(f,"collisionRadius",{min:30,max:150,step:1}).on("change",m=>{p.force("collision").radius(m.value),p.alpha(.3).restart()}),P.addButton({title:"Reset Simulation"}).on("click",()=>{Object.assign(f,{linkDistance:150,linkStrength:.7,charge:-500,collisionRadius:80}),p.force("link").distance(f.linkDistance),p.force("link").strength(f.linkStrength),p.force("charge").strength(f.charge),p.force("collision").radius(f.collisionRadius),p.alpha(1).restart(),P.refresh()});function x(){const m=c.selectAll(".node").data(nt.nodes,E=>E.id),y=l.selectAll(".link").data(nt.edges,E=>E.source.id+"-"+E.target.id),C=a.selectAll(".node-label").data(nt.nodes,E=>E.id),M=u.selectAll(".link-label").data(nt.edges,E=>E.type);m.attr("fill",E=>E.color||"#69b3a2"),y.attr("stroke","#666").attr("marker-end","url(#arrowhead)"),C.style("font-size","12px").style("fill","#333"),M.style("font-size","12px").style("fill","#333")}window.addEventListener("resize",()=>{const m=e.clientWidth,y=e.clientHeight;o.attr("width",m).attr("height",y),p.force("center",qr(m/2,y/2)).alpha(.3).restart()})});
