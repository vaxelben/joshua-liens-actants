import*as L from"https://cdn.jsdelivr.net/npm/d3@7/+esm";import{P as ie}from"./vendor-ByTJSjIS.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();const oe=[{id:"Joshua Goldberg",level:0},{id:"Australi Witness",level:0},{id:"Moon Metropolis",level:0},{id:"Michael Slay",level:0},{id:"Tanya Cohen",level:0},{id:"European88",level:0},{id:"Metropolis Forever",level:0},{id:"Ryoko Tamada",level:0},{id:"Emily Goldstein",level:0},{id:"Elton Simpson",parent:"Australi Witness",level:1},{id:"Nadir Soofi",parent:"Australi Witness",level:1},{id:"Mariam Veiszadeh",parent:"Michael Slay",level:1},{id:"Andrew Anglin",parent:"Michael Slay",level:1},{id:"Milo Yiannopoulos",parent:"Moon Metropolis",level:1},{id:"Reddit",parent:"European88",level:1},{id:"Josh Bornstein",parent:"Joshua Goldberg",level:1},{id:"Lindsay Campbell",parent:"Joshua Goldberg",level:1},{id:"Shaun King",parent:"Moon Metropolis",level:1},{id:"Gamergate",parent:"Moon Metropolis",level:1},{id:"Elise Potaka",parent:"Joshua Goldberg",level:1},{id:"Luke McMahon",parent:"Joshua Goldberg",level:1},{id:"Pamela Geller",parent:"Australi Witness",level:1},{id:"James Taranto (WSJ)",parent:"Tanya Cohen",level:1},{id:"Amnesty International",parent:"Australi Witness",level:1},{id:"Junaid Thorne",parent:"Australi Witness",level:1},{id:"Mike Wendling",parent:"Moon Metropolis",level:1},{id:"Jim Berry",parent:"Australi Witness",level:1},{id:"Weev (Andrew Auernheimer)",parent:"Moon Metropolis",level:1},{id:"Ben Garrison",parent:"Joshua Goldberg",level:1},{id:"Bindi Cole",parent:"Australi Witness",level:1},{id:"Bill Leak",parent:"Australi Witness",level:1},{id:"Caitlin Roper",parent:"Joshua Goldberg",level:1},{id:"Chiara Zaffino",parent:"Moon Metropolis",level:1},{id:"Cyndi Lavrenci",parent:"Metropolis Forever",level:1},{id:"Grant Taylor",parent:"Metropolis Forever",level:1},{id:"Jilian C. York",parent:"Ryoko Tamada",level:1},{id:"Larry Pickering",parent:"Australi Witness",level:1},{id:"Tom Minear",parent:"Metropolis Forever",level:1},{id:"Alice Pooley",parent:"Moon Metropolis",level:1},{id:"Peter Wallace",parent:"Moon Metropolis",level:1},{id:"Rita Katz",parent:"Australi Witness",level:1},{id:"Rita Panahi",parent:"Moon Metropolis",level:1},{id:"Nikki",parent:"Moon Metropolis",level:1},{id:"Elon Musk",parent:"Emily Goldstein",level:1},{id:"AFP Federal Agent as Mohamadmo7",parent:"Australi Witness",level:1},{id:"FBI as Wilayahks",parent:"Australi Witness",level:1}],ae=[{source:"Australi Witness",target:"Elton Simpson",type:"Incitation terroriste",direction:"inbound",linkType:"direct",impact:10},{source:"Australi Witness",target:"Nadir Soofi",type:"Incitation terroriste",direction:"inbound",linkType:"direct",impact:10},{source:"Michael Slay",target:"Mariam Veiszadeh",type:"Ciblage & harcèlement",direction:"inbound",linkType:"indirect",impact:9},{source:"Tanya Cohen",target:"Mariam Veiszadeh",type:"Instrumentalisation",direction:"inbound",linkType:"direct",impact:0},{source:"Michael Slay",target:"Andrew Anglin",type:"Infiltration",direction:"inbound",linkType:"direct",impact:7},{source:"Moon Metropolis",target:"Milo Yiannopoulos",type:"Collaboration désinformation",direction:"inbound",linkType:"direct",impact:7},{source:"European88",target:"Reddit",type:"modération",direction:"inbound",linkType:"direct",impact:8},{source:"Joshua Goldberg",target:"Josh Bornstein",type:"Usurpation d'identité",direction:"inbound",linkType:"direct",impact:10},{source:"Joshua Goldberg",target:"Lindsay Campbell",type:"Enquête FBI",direction:"outbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Shaun King",type:"Désinformation médiatique",direction:"inbound",linkType:"indirect",impact:6},{source:"Moon Metropolis",target:"Gamergate",type:"Trolling politique",direction:"inbound",linkType:"indirect",impact:6},{source:"Joshua Goldberg",target:"Elise Potaka",type:"Impersonation",direction:"inbound",linkType:"direct",impact:9},{source:"Joshua Goldberg",target:"Luke McMahon",type:"Ennemi",direction:"outbound",linkType:"direct",impact:9},{source:"Australi Witness",target:"Pamela Geller",type:"Menace de mort",direction:"inbound",linkType:"indirect",impact:7},{source:"Tanya Cohen",target:"James Taranto (WSJ)",type:"Désinformation médiatique",direction:"inbound",linkType:"indirect",impact:5},{source:"Australi Witness",target:"Amnesty International",type:"désinformation",direction:"inbound",linkType:"direct",impact:7},{source:"Australi Witness",target:"Junaid Thorne",type:"Usurpation d'identité",direction:"inbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Mike Wendling",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Australi Witness",target:"Jim Berry",type:"Enquêteur",direction:"outbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Weev (Andrew Auernheimer)",type:"Collaboration désinformation",direction:"inbound",linkType:"direct",impact:6},{source:"Joshua Goldberg",target:"Ben Garrison",type:"impersonation",direction:"inbound",linkType:"direct",impact:6},{source:"Australi Witness",target:"Bindi Cole",type:"Ciblage & harcèlement",direction:"inbound",linkType:"direct",impact:4},{source:"Australi Witness",target:"Bill Leak",type:"Menace de mort",direction:"inbound",linkType:"direct",impact:5},{source:"Joshua Goldberg",target:"Caitlin Roper",type:"Impersonnation",direction:"inbound",linkType:"direct",impact:5},{source:"Moon Metropolis",target:"Chiara Zaffino",type:"manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Metropolis Forever",target:"Cyndi Lavrenci",type:"manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Metropolis Forever",target:"Grant Taylor",type:"Journaliste exposant Goldberg",direction:"inbound",linkType:"direct",impact:8},{source:"Ryoko Tamada",target:"Jilian C. York",type:"Manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Australi Witness",target:"Larry Pickering",type:"Menaces de mort",direction:"inbound",linkType:"direct",impact:5},{source:"Metropolis Forever",target:"Tom Minear",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Moon Metropolis",target:"Alice Pooley",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Moon Metropolis",target:"Peter Wallace",type:"Désinformation médiatique",direction:"inbound",linkType:"direct",impact:8},{source:"Australi Witness",target:"Rita Katz",type:"Désinformation médiatique",direction:"inbound",linkType:"indirect",impact:9},{source:"Moon Metropolis",target:"Rita Panahi",type:"Manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Moon Metropolis",target:"Nikki",type:"amie",direction:"inbound",linkType:"direct",impact:5},{source:"Emily Goldstein",target:"Elon Musk",type:"Amplification de fake news",direction:"inbound",linkType:"indirect",impact:9},{source:"Australi Witness",target:"AFP Federal Agent as Mohamadmo7",type:"Infiltration",direction:"outbound",linkType:"direct",impact:0},{source:"Australi Witness",target:"FBI as Wilayahks",type:"Infiltration",direction:"outbound",linkType:"direct",impact:0}],z={nodes:oe,edges:ae};function se(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var j={},nt,vt;function le(){return vt||(vt=1,nt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),nt}var rt={},G={},kt;function V(){if(kt)return G;kt=1;let r;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return G.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},G.getSymbolTotalCodewords=function(n){return i[n]},G.getBCHDigit=function(o){let n=0;for(;o!==0;)n++,o>>>=1;return n},G.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},G.isKanjiModeEnabled=function(){return typeof r<"u"},G.toSJIS=function(n){return r(n)},G}var it={},Rt;function Bt(){return Rt||(Rt=1,function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+o)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,t){if(r.isValid(n))return n;try{return i(n)}catch{return t}}}(it)),it}var ot,Pt;function ce(){if(Pt)return ot;Pt=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(i){const o=Math.floor(i/8);return(this.buffer[o]>>>7-i%8&1)===1},put:function(i,o){for(let n=0;n<o;n++)this.putBit((i>>>o-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),i&&(this.buffer[o]|=128>>>this.length%8),this.length++}},ot=r,ot}var at,St;function ue(){if(St)return at;St=1;function r(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return r.prototype.set=function(i,o,n,t){const e=i*this.size+o;this.data[e]=n,t&&(this.reservedBit[e]=!0)},r.prototype.get=function(i,o){return this.data[i*this.size+o]},r.prototype.xor=function(i,o,n){this.data[i*this.size+o]^=n},r.prototype.isReserved=function(i,o){return this.reservedBit[i*this.size+o]},at=r,at}var st={},It;function de(){return It||(It=1,function(r){const i=V().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const t=Math.floor(n/7)+2,e=i(n),a=e===145?26:Math.ceil((e-13)/(2*t-2))*2,l=[e-7];for(let c=1;c<t-1;c++)l[c]=l[c-1]-a;return l.push(6),l.reverse()},r.getPositions=function(n){const t=[],e=r.getRowColCoords(n),a=e.length;for(let l=0;l<a;l++)for(let c=0;c<a;c++)l===0&&c===0||l===0&&c===a-1||l===a-1&&c===0||t.push([e[l],e[c]]);return t}}(st)),st}var lt={},Nt;function fe(){if(Nt)return lt;Nt=1;const r=V().getSymbolSize,i=7;return lt.getPositions=function(n){const t=r(n);return[[0,0],[t-i,0],[0,t-i]]},lt}var ct={},Lt;function ge(){return Lt||(Lt=1,function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};r.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},r.from=function(t){return r.isValid(t)?parseInt(t,10):void 0},r.getPenaltyN1=function(t){const e=t.size;let a=0,l=0,c=0,h=null,C=null;for(let B=0;B<e;B++){l=c=0,h=C=null;for(let E=0;E<e;E++){let p=t.get(B,E);p===h?l++:(l>=5&&(a+=i.N1+(l-5)),h=p,l=1),p=t.get(E,B),p===C?c++:(c>=5&&(a+=i.N1+(c-5)),C=p,c=1)}l>=5&&(a+=i.N1+(l-5)),c>=5&&(a+=i.N1+(c-5))}return a},r.getPenaltyN2=function(t){const e=t.size;let a=0;for(let l=0;l<e-1;l++)for(let c=0;c<e-1;c++){const h=t.get(l,c)+t.get(l,c+1)+t.get(l+1,c)+t.get(l+1,c+1);(h===4||h===0)&&a++}return a*i.N2},r.getPenaltyN3=function(t){const e=t.size;let a=0,l=0,c=0;for(let h=0;h<e;h++){l=c=0;for(let C=0;C<e;C++)l=l<<1&2047|t.get(h,C),C>=10&&(l===1488||l===93)&&a++,c=c<<1&2047|t.get(C,h),C>=10&&(c===1488||c===93)&&a++}return a*i.N3},r.getPenaltyN4=function(t){let e=0;const a=t.data.length;for(let c=0;c<a;c++)e+=t.data[c];return Math.abs(Math.ceil(e*100/a/5)-10)*i.N4};function o(n,t,e){switch(n){case r.Patterns.PATTERN000:return(t+e)%2===0;case r.Patterns.PATTERN001:return t%2===0;case r.Patterns.PATTERN010:return e%3===0;case r.Patterns.PATTERN011:return(t+e)%3===0;case r.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case r.Patterns.PATTERN101:return t*e%2+t*e%3===0;case r.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case r.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(t,e){const a=e.size;for(let l=0;l<a;l++)for(let c=0;c<a;c++)e.isReserved(c,l)||e.xor(c,l,o(t,c,l))},r.getBestMask=function(t,e){const a=Object.keys(r.Patterns).length;let l=0,c=1/0;for(let h=0;h<a;h++){e(h),r.applyMask(h,t);const C=r.getPenaltyN1(t)+r.getPenaltyN2(t)+r.getPenaltyN3(t)+r.getPenaltyN4(t);r.applyMask(h,t),C<c&&(c=C,l=h)}return l}}(ct)),ct}var tt={},qt;function te(){if(qt)return tt;qt=1;const r=Bt(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return tt.getBlocksCount=function(t,e){switch(e){case r.L:return i[(t-1)*4+0];case r.M:return i[(t-1)*4+1];case r.Q:return i[(t-1)*4+2];case r.H:return i[(t-1)*4+3];default:return}},tt.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return o[(t-1)*4+0];case r.M:return o[(t-1)*4+1];case r.Q:return o[(t-1)*4+2];case r.H:return o[(t-1)*4+3];default:return}},tt}var ut={},Z={},Dt;function he(){if(Dt)return Z;Dt=1;const r=new Uint8Array(512),i=new Uint8Array(256);return function(){let n=1;for(let t=0;t<255;t++)r[t]=n,i[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)r[t]=r[t-255]}(),Z.log=function(n){if(n<1)throw new Error("log("+n+")");return i[n]},Z.exp=function(n){return r[n]},Z.mul=function(n,t){return n===0||t===0?0:r[i[n]+i[t]]},Z}var xt;function pe(){return xt||(xt=1,function(r){const i=he();r.mul=function(n,t){const e=new Uint8Array(n.length+t.length-1);for(let a=0;a<n.length;a++)for(let l=0;l<t.length;l++)e[a+l]^=i.mul(n[a],t[l]);return e},r.mod=function(n,t){let e=new Uint8Array(n);for(;e.length-t.length>=0;){const a=e[0];for(let c=0;c<t.length;c++)e[c]^=i.mul(t[c],a);let l=0;for(;l<e.length&&e[l]===0;)l++;e=e.slice(l)}return e},r.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let e=0;e<n;e++)t=r.mul(t,new Uint8Array([1,i.exp(e)]));return t}}(ut)),ut}var dt,Ft;function ye(){if(Ft)return dt;Ft=1;const r=pe();function i(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(n.length+this.degree);t.set(n);const e=r.mod(t,this.genPoly),a=this.degree-e.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(e,a),l}return e},dt=i,dt}var ft={},gt={},ht={},Ut;function ee(){return Ut||(Ut=1,ht.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),ht}var x={},_t;function ne(){if(_t)return x;_t=1;const r="[0-9]+",i="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;x.KANJI=new RegExp(o,"g"),x.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),x.BYTE=new RegExp(n,"g"),x.NUMERIC=new RegExp(r,"g"),x.ALPHANUMERIC=new RegExp(i,"g");const t=new RegExp("^"+o+"$"),e=new RegExp("^"+r+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return x.testKanji=function(c){return t.test(c)},x.testNumeric=function(c){return e.test(c)},x.testAlphanumeric=function(c){return a.test(c)},x}var zt;function O(){return zt||(zt=1,function(r){const i=ee(),o=ne();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(e,a){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!i.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?e.ccBits[0]:a<27?e.ccBits[1]:e.ccBits[2]},r.getBestModeForData=function(e){return o.testNumeric(e)?r.NUMERIC:o.testAlphanumeric(e)?r.ALPHANUMERIC:o.testKanji(e)?r.KANJI:r.BYTE},r.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},r.isValid=function(e){return e&&e.bit&&e.ccBits};function n(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+t)}}r.from=function(e,a){if(r.isValid(e))return e;try{return n(e)}catch{return a}}}(gt)),gt}var Gt;function me(){return Gt||(Gt=1,function(r){const i=V(),o=te(),n=Bt(),t=O(),e=ee(),a=7973,l=i.getBCHDigit(a);function c(E,p,k){for(let w=1;w<=40;w++)if(p<=r.getCapacity(w,k,E))return w}function h(E,p){return t.getCharCountIndicator(E,p)+4}function C(E,p){let k=0;return E.forEach(function(w){const P=h(w.mode,p);k+=P+w.getBitsLength()}),k}function B(E,p){for(let k=1;k<=40;k++)if(C(E,k)<=r.getCapacity(k,p,t.MIXED))return k}r.from=function(p,k){return e.isValid(p)?parseInt(p,10):k},r.getCapacity=function(p,k,w){if(!e.isValid(p))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=t.BYTE);const P=i.getSymbolTotalCodewords(p),v=o.getTotalCodewordsCount(p,k),R=(P-v)*8;if(w===t.MIXED)return R;const b=R-h(w,p);switch(w){case t.NUMERIC:return Math.floor(b/10*3);case t.ALPHANUMERIC:return Math.floor(b/11*2);case t.KANJI:return Math.floor(b/13);case t.BYTE:default:return Math.floor(b/8)}},r.getBestVersionForData=function(p,k){let w;const P=n.from(k,n.M);if(Array.isArray(p)){if(p.length>1)return B(p,P);if(p.length===0)return 1;w=p[0]}else w=p;return c(w.mode,w.getLength(),P)},r.getEncodedBits=function(p){if(!e.isValid(p)||p<7)throw new Error("Invalid QR Code version");let k=p<<12;for(;i.getBCHDigit(k)-l>=0;)k^=a<<i.getBCHDigit(k)-l;return p<<12|k}}(ft)),ft}var pt={},Jt;function we(){if(Jt)return pt;Jt=1;const r=V(),i=1335,o=21522,n=r.getBCHDigit(i);return pt.getEncodedBits=function(e,a){const l=e.bit<<3|a;let c=l<<10;for(;r.getBCHDigit(c)-n>=0;)c^=i<<r.getBCHDigit(c)-n;return(l<<10|c)^o},pt}var yt={},mt,Wt;function Me(){if(Wt)return mt;Wt=1;const r=O();function i(o){this.mode=r.NUMERIC,this.data=o.toString()}return i.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){let t,e,a;for(t=0;t+3<=this.data.length;t+=3)e=this.data.substr(t,3),a=parseInt(e,10),n.put(a,10);const l=this.data.length-t;l>0&&(e=this.data.substr(t),a=parseInt(e,10),n.put(a,l*3+1))},mt=i,mt}var wt,Ht;function Ce(){if(Ht)return wt;Ht=1;const r=O(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(n){this.mode=r.ALPHANUMERIC,this.data=n}return o.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let a=i.indexOf(this.data[e])*45;a+=i.indexOf(this.data[e+1]),t.put(a,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},wt=o,wt}var Mt,Vt;function Ee(){if(Vt)return Mt;Vt=1;const r=O();function i(o){this.mode=r.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return i.getBitsLength=function(n){return n*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(o){for(let n=0,t=this.data.length;n<t;n++)o.put(this.data[n],8)},Mt=i,Mt}var Ct,Ot;function be(){if(Ot)return Ct;Ot=1;const r=O(),i=V();function o(n){this.mode=r.KANJI,this.data=n}return o.getBitsLength=function(t){return t*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(n){let t;for(t=0;t<this.data.length;t++){let e=i.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),n.put(e,13)}},Ct=o,Ct}var Et={exports:{}},Kt;function Ae(){return Kt||(Kt=1,function(r){var i={single_source_shortest_paths:function(o,n,t){var e={},a={};a[n]=0;var l=i.PriorityQueue.make();l.push(n,0);for(var c,h,C,B,E,p,k,w,P;!l.empty();){c=l.pop(),h=c.value,B=c.cost,E=o[h]||{};for(C in E)E.hasOwnProperty(C)&&(p=E[C],k=B+p,w=a[C],P=typeof a[C]>"u",(P||w>k)&&(a[C]=k,l.push(C,k),e[C]=h))}if(typeof t<"u"&&typeof a[t]>"u"){var v=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(v)}return e},extract_shortest_path_from_predecessor_list:function(o,n){for(var t=[],e=n;e;)t.push(e),o[e],e=o[e];return t.reverse(),t},find_path:function(o,n,t){var e=i.single_source_shortest_paths(o,n,t);return i.extract_shortest_path_from_predecessor_list(e,t)},PriorityQueue:{make:function(o){var n=i.PriorityQueue,t={},e;o=o||{};for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t.queue=[],t.sorter=o.sorter||n.default_sorter,t},default_sorter:function(o,n){return o.cost-n.cost},push:function(o,n){var t={value:o,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=i}(Et)),Et.exports}var Yt;function Te(){return Yt||(Yt=1,function(r){const i=O(),o=Me(),n=Ce(),t=Ee(),e=be(),a=ne(),l=V(),c=Ae();function h(v){return unescape(encodeURIComponent(v)).length}function C(v,R,b){const A=[];let S;for(;(S=v.exec(b))!==null;)A.push({data:S[0],index:S.index,mode:R,length:S[0].length});return A}function B(v){const R=C(a.NUMERIC,i.NUMERIC,v),b=C(a.ALPHANUMERIC,i.ALPHANUMERIC,v);let A,S;return l.isKanjiModeEnabled()?(A=C(a.BYTE,i.BYTE,v),S=C(a.KANJI,i.KANJI,v)):(A=C(a.BYTE_KANJI,i.BYTE,v),S=[]),R.concat(b,A,S).sort(function(y,s){return y.index-s.index}).map(function(y){return{data:y.data,mode:y.mode,length:y.length}})}function E(v,R){switch(R){case i.NUMERIC:return o.getBitsLength(v);case i.ALPHANUMERIC:return n.getBitsLength(v);case i.KANJI:return e.getBitsLength(v);case i.BYTE:return t.getBitsLength(v)}}function p(v){return v.reduce(function(R,b){const A=R.length-1>=0?R[R.length-1]:null;return A&&A.mode===b.mode?(R[R.length-1].data+=b.data,R):(R.push(b),R)},[])}function k(v){const R=[];for(let b=0;b<v.length;b++){const A=v[b];switch(A.mode){case i.NUMERIC:R.push([A,{data:A.data,mode:i.ALPHANUMERIC,length:A.length},{data:A.data,mode:i.BYTE,length:A.length}]);break;case i.ALPHANUMERIC:R.push([A,{data:A.data,mode:i.BYTE,length:A.length}]);break;case i.KANJI:R.push([A,{data:A.data,mode:i.BYTE,length:h(A.data)}]);break;case i.BYTE:R.push([{data:A.data,mode:i.BYTE,length:h(A.data)}])}}return R}function w(v,R){const b={},A={start:{}};let S=["start"];for(let M=0;M<v.length;M++){const y=v[M],s=[];for(let u=0;u<y.length;u++){const f=y[u],d=""+M+u;s.push(d),b[d]={node:f,lastCount:0},A[d]={};for(let g=0;g<S.length;g++){const m=S[g];b[m]&&b[m].node.mode===f.mode?(A[m][d]=E(b[m].lastCount+f.length,f.mode)-E(b[m].lastCount,f.mode),b[m].lastCount+=f.length):(b[m]&&(b[m].lastCount=f.length),A[m][d]=E(f.length,f.mode)+4+i.getCharCountIndicator(f.mode,R))}}S=s}for(let M=0;M<S.length;M++)A[S[M]].end=0;return{map:A,table:b}}function P(v,R){let b;const A=i.getBestModeForData(v);if(b=i.from(R,A),b!==i.BYTE&&b.bit<A.bit)throw new Error('"'+v+'" cannot be encoded with mode '+i.toString(b)+`.
 Suggested mode is: `+i.toString(A));switch(b===i.KANJI&&!l.isKanjiModeEnabled()&&(b=i.BYTE),b){case i.NUMERIC:return new o(v);case i.ALPHANUMERIC:return new n(v);case i.KANJI:return new e(v);case i.BYTE:return new t(v)}}r.fromArray=function(R){return R.reduce(function(b,A){return typeof A=="string"?b.push(P(A,null)):A.data&&b.push(P(A.data,A.mode)),b},[])},r.fromString=function(R,b){const A=B(R,l.isKanjiModeEnabled()),S=k(A),M=w(S,b),y=c.find_path(M.map,"start","end"),s=[];for(let u=1;u<y.length-1;u++)s.push(M.table[y[u]].node);return r.fromArray(p(s))},r.rawSplit=function(R){return r.fromArray(B(R,l.isKanjiModeEnabled()))}}(yt)),yt}var jt;function Be(){if(jt)return rt;jt=1;const r=V(),i=Bt(),o=ce(),n=ue(),t=de(),e=fe(),a=ge(),l=te(),c=ye(),h=me(),C=we(),B=O(),E=Te();function p(M,y){const s=M.size,u=e.getPositions(y);for(let f=0;f<u.length;f++){const d=u[f][0],g=u[f][1];for(let m=-1;m<=7;m++)if(!(d+m<=-1||s<=d+m))for(let T=-1;T<=7;T++)g+T<=-1||s<=g+T||(m>=0&&m<=6&&(T===0||T===6)||T>=0&&T<=6&&(m===0||m===6)||m>=2&&m<=4&&T>=2&&T<=4?M.set(d+m,g+T,!0,!0):M.set(d+m,g+T,!1,!0))}}function k(M){const y=M.size;for(let s=8;s<y-8;s++){const u=s%2===0;M.set(s,6,u,!0),M.set(6,s,u,!0)}}function w(M,y){const s=t.getPositions(y);for(let u=0;u<s.length;u++){const f=s[u][0],d=s[u][1];for(let g=-2;g<=2;g++)for(let m=-2;m<=2;m++)g===-2||g===2||m===-2||m===2||g===0&&m===0?M.set(f+g,d+m,!0,!0):M.set(f+g,d+m,!1,!0)}}function P(M,y){const s=M.size,u=h.getEncodedBits(y);let f,d,g;for(let m=0;m<18;m++)f=Math.floor(m/3),d=m%3+s-8-3,g=(u>>m&1)===1,M.set(f,d,g,!0),M.set(d,f,g,!0)}function v(M,y,s){const u=M.size,f=C.getEncodedBits(y,s);let d,g;for(d=0;d<15;d++)g=(f>>d&1)===1,d<6?M.set(d,8,g,!0):d<8?M.set(d+1,8,g,!0):M.set(u-15+d,8,g,!0),d<8?M.set(8,u-d-1,g,!0):d<9?M.set(8,15-d-1+1,g,!0):M.set(8,15-d-1,g,!0);M.set(u-8,8,1,!0)}function R(M,y){const s=M.size;let u=-1,f=s-1,d=7,g=0;for(let m=s-1;m>0;m-=2)for(m===6&&m--;;){for(let T=0;T<2;T++)if(!M.isReserved(f,m-T)){let I=!1;g<y.length&&(I=(y[g]>>>d&1)===1),M.set(f,m-T,I),d--,d===-1&&(g++,d=7)}if(f+=u,f<0||s<=f){f-=u,u=-u;break}}}function b(M,y,s){const u=new o;s.forEach(function(T){u.put(T.mode.bit,4),u.put(T.getLength(),B.getCharCountIndicator(T.mode,M)),T.write(u)});const f=r.getSymbolTotalCodewords(M),d=l.getTotalCodewordsCount(M,y),g=(f-d)*8;for(u.getLengthInBits()+4<=g&&u.put(0,4);u.getLengthInBits()%8!==0;)u.putBit(0);const m=(g-u.getLengthInBits())/8;for(let T=0;T<m;T++)u.put(T%2?17:236,8);return A(u,M,y)}function A(M,y,s){const u=r.getSymbolTotalCodewords(y),f=l.getTotalCodewordsCount(y,s),d=u-f,g=l.getBlocksCount(y,s),m=u%g,T=g-m,I=Math.floor(u/g),N=Math.floor(d/g),q=N+1,D=I-N,J=new c(D);let W=0;const _=new Array(g),H=new Array(g);let K=0;const $=new Uint8Array(M.buffer);for(let Y=0;Y<g;Y++){const et=Y<T?N:q;_[Y]=$.slice(W,W+et),H[Y]=J.encode(_[Y]),W+=et,K=Math.max(K,et)}const Q=new Uint8Array(u);let X=0,F,U;for(F=0;F<K;F++)for(U=0;U<g;U++)F<_[U].length&&(Q[X++]=_[U][F]);for(F=0;F<D;F++)for(U=0;U<g;U++)Q[X++]=H[U][F];return Q}function S(M,y,s,u){let f;if(Array.isArray(M))f=E.fromArray(M);else if(typeof M=="string"){let I=y;if(!I){const N=E.rawSplit(M);I=h.getBestVersionForData(N,s)}f=E.fromString(M,I||40)}else throw new Error("Invalid data");const d=h.getBestVersionForData(f,s);if(!d)throw new Error("The amount of data is too big to be stored in a QR Code");if(!y)y=d;else if(y<d)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+d+`.
`);const g=b(y,s,f),m=r.getSymbolSize(y),T=new n(m);return p(T,y),k(T),w(T,y),v(T,s,0),y>=7&&P(T,y),R(T,g),isNaN(u)&&(u=a.getBestMask(T,v.bind(null,T,s))),a.applyMask(u,T),v(T,s,u),{modules:T,version:y,errorCorrectionLevel:s,maskPattern:u,segments:f}}return rt.create=function(y,s){if(typeof y>"u"||y==="")throw new Error("No input text");let u=i.M,f,d;return typeof s<"u"&&(u=i.from(s.errorCorrectionLevel,i.M),f=h.from(s.version),d=a.from(s.maskPattern),s.toSJISFunc&&r.setToSJISFunction(s.toSJISFunc)),S(y,f,u,d)},rt}var bt={},At={},$t;function re(){return $t||($t=1,function(r){function i(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let n=o.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+o);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(e){return[e,e]}))),n.length===6&&n.push("F","F");const t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,e=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:e,scale:e?4:a,margin:t,color:{dark:i(n.color.dark||"#000000ff"),light:i(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale},r.getImageWidth=function(n,t){const e=r.getScale(n,t);return Math.floor((n+t.margin*2)*e)},r.qrToImageData=function(n,t,e){const a=t.modules.size,l=t.modules.data,c=r.getScale(a,e),h=Math.floor((a+e.margin*2)*c),C=e.margin*c,B=[e.color.light,e.color.dark];for(let E=0;E<h;E++)for(let p=0;p<h;p++){let k=(E*h+p)*4,w=e.color.light;if(E>=C&&p>=C&&E<h-C&&p<h-C){const P=Math.floor((E-C)/c),v=Math.floor((p-C)/c);w=B[l[P*a+v]?1:0]}n[k++]=w.r,n[k++]=w.g,n[k++]=w.b,n[k]=w.a}}}(At)),At}var Qt;function ve(){return Qt||(Qt=1,function(r){const i=re();function o(t,e,a){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=a,e.width=a,e.style.height=a+"px",e.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(e,a,l){let c=l,h=a;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),a||(h=n()),c=i.getOptions(c);const C=i.getImageWidth(e.modules.size,c),B=h.getContext("2d"),E=B.createImageData(C,C);return i.qrToImageData(E.data,e,c),o(B,h,C),B.putImageData(E,0,0),h},r.renderToDataURL=function(e,a,l){let c=l;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),c||(c={});const h=r.render(e,a,c),C=c.type||"image/png",B=c.rendererOpts||{};return h.toDataURL(C,B.quality)}}(bt)),bt}var Tt={},Xt;function ke(){if(Xt)return Tt;Xt=1;const r=re();function i(t,e){const a=t.a/255,l=e+'="'+t.hex+'"';return a<1?l+" "+e+'-opacity="'+a.toFixed(2).slice(1)+'"':l}function o(t,e,a){let l=t+e;return typeof a<"u"&&(l+=" "+a),l}function n(t,e,a){let l="",c=0,h=!1,C=0;for(let B=0;B<t.length;B++){const E=Math.floor(B%e),p=Math.floor(B/e);!E&&!h&&(h=!0),t[B]?(C++,B>0&&E>0&&t[B-1]||(l+=h?o("M",E+a,.5+p+a):o("m",c,0),c=0,h=!1),E+1<e&&t[B+1]||(l+=o("h",C),C=0)):c++}return l}return Tt.render=function(e,a,l){const c=r.getOptions(a),h=e.modules.size,C=e.modules.data,B=h+c.margin*2,E=c.color.light.a?"<path "+i(c.color.light,"fill")+' d="M0 0h'+B+"v"+B+'H0z"/>':"",p="<path "+i(c.color.dark,"stroke")+' d="'+n(C,h,c.margin)+'"/>',k='viewBox="0 0 '+B+" "+B+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+k+' shape-rendering="crispEdges">'+E+p+`</svg>
`;return typeof l=="function"&&l(null,P),P},Tt}var Zt;function Re(){if(Zt)return j;Zt=1;const r=le(),i=Be(),o=ve(),n=ke();function t(e,a,l,c,h){const C=[].slice.call(arguments,1),B=C.length,E=typeof C[B-1]=="function";if(!E&&!r())throw new Error("Callback required as last argument");if(E){if(B<2)throw new Error("Too few arguments provided");B===2?(h=l,l=a,a=c=void 0):B===3&&(a.getContext&&typeof h>"u"?(h=c,c=void 0):(h=c,c=l,l=a,a=void 0))}else{if(B<1)throw new Error("Too few arguments provided");return B===1?(l=a,a=c=void 0):B===2&&!a.getContext&&(c=l,l=a,a=void 0),new Promise(function(p,k){try{const w=i.create(l,c);p(e(w,a,c))}catch(w){k(w)}})}try{const p=i.create(l,c);h(null,e(p,a,c))}catch(p){h(p)}}return j.create=i.create,j.toCanvas=t.bind(null,o.render),j.toDataURL=t.bind(null,o.renderToDataURL),j.toString=t.bind(null,function(e,a,l){return n.render(e,l)}),j}var Pe=Re();const Se=se(Pe);async function Ie(r){if(window.innerWidth<768)return;const o=window.location.hostname.includes("github.io"),n=o?"https://vaxelben.github.io/joshua-liens-actants/":window.location.href;console.log("URL for QR code:",n),console.log("isGitHubPages:",o),console.log("hostname:",window.location.hostname);try{const t=await Se.toDataURL(n,{width:100,height:100,margin:1,color:{dark:"#000000",light:"#00000000"},errorCorrectionLevel:"H"});r.append("g").attr("class","qr-code").attr("transform","translate(20, 20)").append("image").attr("href",t).attr("width",100).attr("height",100)}catch(t){console.error("Erreur lors de la génération du QR code:",t)}}document.addEventListener("DOMContentLoaded",async()=>{const r=document.getElementById("graph"),i=r.clientWidth,o=r.clientHeight,n=window.innerWidth<768,t=n?20:30,e=L.scaleLinear().domain([0,1,2,3,4,5,6,7,8,9,10]).range(["red","#f1f1f1","#dedede","#c6c6c6","#a7a7a7","#878787","#686868","#474747","#222222","#000000"]),a=L.select("#graph").append("svg").attr("width",i).attr("height",o).style("background","#F2EFDD");await Ie(a);const l=a.append("g").attr("class","legend").attr("transform",`translate(${i-(n?150:200)}, ${o-(n?100:120)}) ${n?"scale(0.8)":""}`);l.append("line").attr("x1",10).attr("y1",20).attr("x2",50).attr("y2",20).attr("stroke","#666").attr("stroke-width",1),l.append("line").attr("x1",10).attr("y1",40).attr("x2",50).attr("y2",40).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","5,5"),l.append("text").attr("x",60).attr("y",23).text("Lien direct").style("font-size","12px").style("font-family","Arial, sans-serif"),l.append("text").attr("x",60).attr("y",43).text("Lien indirect").style("font-size","12px").style("font-family","Arial, sans-serif"),l.append("text").attr("x",10).attr("y",70).text("Impact médiatique :").style("font-size","12px").style("font-family","Arial, sans-serif");const c=100,h=10;l.append("linearGradient").attr("id","legend-gradient").attr("x1","0%").attr("x2","100%").selectAll("stop").data([{offset:"0%",color:e(0)},{offset:"10%",color:e(1)},{offset:"20%",color:e(2)},{offset:"30%",color:e(3)},{offset:"40%",color:e(4)},{offset:"50%",color:e(5)},{offset:"60%",color:e(6)},{offset:"70%",color:e(7)},{offset:"80%",color:e(8)},{offset:"90%",color:e(9)},{offset:"100%",color:e(10)}]).join("stop").attr("offset",s=>s.offset).attr("stop-color",s=>s.color),l.append("rect").attr("x",10).attr("y",80).attr("width",c).attr("height",h).style("fill","url(#legend-gradient)"),l.append("text").attr("x",10).attr("y",100).text("NR").style("font-size","10px").style("font-family","Arial, sans-serif").style("fill","red"),l.append("text").attr("x",98).attr("y",100).text("10").style("font-size","10px").style("font-family","Arial, sans-serif"),a.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#666");const B=a.append("g").attr("class","text-layer").style("z-index","1"),E=a.append("g").attr("class","text-layer").style("z-index","1"),p=a.append("g").attr("class","link-layer").style("z-index","2"),k=a.append("g").attr("class","node-layer").style("z-index","3"),w=L.forceSimulation(z.nodes).force("link",L.forceLink(z.edges).id(s=>s.id).distance(s=>(n?100:150)+(s.impact||0)*10).strength(.7)).force("charge",L.forceManyBody().strength(s=>s.level===0?-800:-400)).force("center",L.forceCenter(i/2,o/2)).force("x",L.forceX(i/2).strength(.1)).force("y",L.forceY(o/2).strength(.1)).force("collision",L.forceCollide().radius(t*1.5)),P=p.selectAll("path").data(z.edges).join("path").attr("class","link").attr("stroke",s=>e(s.impact||0)).attr("stroke-width",1).attr("stroke-dasharray",s=>s.linkType==="direct"?null:"5,5").attr("marker-end","url(#arrowhead)").attr("fill","none"),v=E.selectAll("text").data(z.edges).join("text").text(s=>s.type).attr("text-anchor","left").attr("dominant-baseline","middle").style("font-size","10px").style("font-family","Arial, sans-serif").style("pointer-events","none").style("user-select","none").style("fill","#333").call(A,t*2),R=B.selectAll("text").data(z.nodes).join("text").text(s=>s.id).attr("x",s=>s.x).attr("y",s=>s.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",s=>s.level===0?"12px":"10px").style("font-family","Arial, sans-serif").style("pointer-events","none").style("user-select","none").style("fill","#333").call(A,t*2),b=k.selectAll("g").data(z.nodes).join("g").style("pointer-events","all").call(L.drag().on("start",(s,u)=>{s.active||w.alphaTarget(.3).restart(),u.fx=u.x,u.fy=u.y}).on("drag",(s,u)=>{u.fx=s.x,u.fy=s.y}).on("end",(s,u)=>{s.active||w.alphaTarget(0),u.fx=null,u.fy=null})).on("mouseover",S).on("mouseout",M);b.append("circle").attr("r",s=>s.level===0?t*1.2:t).attr("fill","none").attr("stroke",s=>s.level===0?"#666":"#999").attr("stroke-width",s=>s.level===0?2:1).style("pointer-events","all");function A(s,u){s.each(function(){const f=L.select(this),d=f.text().split(/\s+/).reverse(),g=1.2,m=0,T=0;let I,N=[],q=0,D=f.text(null).append("tspan").attr("x",0).attr("y",m).attr("dy",`${T}em`);for(;I=d.pop();)N.push(I),D.text(N.join(" ")),D.node().getComputedTextLength()>u&&(N.pop(),D.text(N.join(" ")),N=[I],D=f.append("tspan").attr("x",0).attr("y",m).attr("dy",`${++q*g}em`).text(I));const J=f.selectAll("tspan"),H=-((J.size()-1)*g)/2;J.attr("dy",(K,$)=>`${H+$*g}em`)})}function S(s,u){const f=new Set;f.add(u.id),z.edges.forEach(d=>{d.source.id===u.id&&f.add(d.target.id),d.target.id===u.id&&f.add(d.source.id)}),b.transition().duration(300).style("opacity",d=>f.has(d.id)?1:.1),R.transition().duration(300).style("opacity",d=>f.has(d.id)?1:.1),v.transition().duration(300).style("opacity",d=>f.has(d.source.id)&&f.has(d.target.id)?1:.1),P.transition().duration(300).style("opacity",d=>f.has(d.source.id)&&f.has(d.target.id)?1:.1)}function M(){b.transition().duration(300).style("opacity",1),R.transition().duration(300).style("opacity",1),P.transition().duration(300).style("opacity",1)}w.on("tick",()=>{z.nodes.forEach(s=>{const u=s.level===0?t*1.2:t;s.x=Math.max(u,Math.min(i-u,s.x)),s.y=Math.max(u,Math.min(o-u,s.y))}),P.attr("d",s=>{const u=s.target.x-s.source.x,f=s.target.y-s.source.y,d=Math.sqrt(u*u+f*f),g=Math.atan2(f,u),m=s.source.level===0?t*1.2:t,T=s.target.level===0?t*1.2:t,I=-Math.sin(g),N=Math.cos(g),q=15,D=s.source.x+m*Math.cos(g)+I*q,J=s.source.y+m*Math.sin(g)+N*q,W=15,_=s.target.x-(T+W)*Math.cos(g)+I*q,H=s.target.y-(T+W)*Math.sin(g)+N*q,K=.2,$=(D+_)/2,Q=(J+H)/2,X=d*K;return`M${D},${J} Q${$+I*X},${Q+N*X} ${_},${H}`}),v.attr("transform",s=>{const u=s.target.x-s.source.x,f=s.target.y-s.source.y,d=Math.atan2(f,u)*(180/Math.PI),g=(s.source.x+s.target.x)/2,m=(s.source.y+s.target.y)/2,T=-Math.sin(d*Math.PI/180),I=Math.cos(d*Math.PI/180),N=20,q=d>90||d<-90?d+180:d;return`translate(${g+T*N},${m+I*N}) rotate(${q})`}),b.attr("transform",s=>`translate(${s.x},${s.y})`),R.attr("transform",s=>`translate(${s.x},${s.y})`)});let y;if(!n){y=new ie({title:"Graph Controls"}),y.addButton({title:"Download SVG"}).on("click",()=>{const f=new XMLSerializer().serializeToString(a.node()),d=document.createElement("a"),g=new Blob([f],{type:"image/svg+xml;charset=utf-8"});d.href=URL.createObjectURL(g),d.download="visualization.svg",document.body.appendChild(d),d.click(),document.body.removeChild(d)});const s={linkDistance:150,linkStrength:.7,charge:-500,collisionRadius:80};y.addBinding(s,"linkDistance",{min:50,max:300,step:1}).on("change",u=>{w.force("link").distance(u.value),w.alpha(.3).restart()}),y.addBinding(s,"linkStrength",{min:0,max:2,step:.1}).on("change",u=>{w.force("link").strength(u.value),w.alpha(.3).restart()}),y.addBinding(s,"charge",{min:-1e3,max:100,step:10}).on("change",u=>{w.force("charge").strength(u.value),w.alpha(.3).restart()}),y.addBinding(s,"collisionRadius",{min:30,max:150,step:1}).on("change",u=>{w.force("collision").radius(u.value),w.alpha(.3).restart()}),y.addButton({title:"Reset Simulation"}).on("click",()=>{Object.assign(s,{linkDistance:150,linkStrength:.7,charge:-500,collisionRadius:80}),w.force("link").distance(s.linkDistance),w.force("link").strength(s.linkStrength),w.force("charge").strength(s.charge),w.force("collision").radius(s.collisionRadius),w.alpha(1).restart(),y.refresh()})}window.addEventListener("resize",()=>{const s=r.clientWidth,u=r.clientHeight,f=s<768;a.attr("width",s).attr("height",u);const d=a.select(".qr-code");if(d&&(f?d.style("display","none"):d.style("display",null)),y){const g=document.querySelector(".tp-dfwv");g&&(f?g.style.display="none":g.style.display="block")}l.attr("transform",`translate(${s-(f?150:200)}, ${u-(f?100:120)}) ${f?"scale(0.8)":""}`),w.force("center",L.forceCenter(s/2,u/2)).force("link").distance(g=>(f?100:150)+(g.impact||0)*10),w.alpha(.3).restart()})});
