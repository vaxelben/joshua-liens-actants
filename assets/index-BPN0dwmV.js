import*as q from"https://cdn.jsdelivr.net/npm/d3@7/+esm";import{P as ie}from"./vendor-ByTJSjIS.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();const oe=[{id:"Joshua Goldberg",level:0},{id:"Australi Witness",level:0},{id:"Moon Metropolis",level:0},{id:"Michael Slay",level:0},{id:"Tanya Cohen",level:0},{id:"European88",level:0},{id:"Metropolis Forever",level:0},{id:"Ryoko Tamada",level:0},{id:"Emily Goldstein",level:0},{id:"Elton Simpson",parent:"Australi Witness",level:1},{id:"Nadir Soofi",parent:"Australi Witness",level:1},{id:"Mariam Veiszadeh",parent:"Michael Slay",level:1},{id:"Andrew Anglin",parent:"Michael Slay",level:1},{id:"Milo Yiannopoulos",parent:"Moon Metropolis",level:1},{id:"Reddit",parent:"European88",level:1},{id:"Josh Bornstein",parent:"Joshua Goldberg",level:1},{id:"Lindsay Campbell",parent:"Joshua Goldberg",level:1},{id:"Shaun King",parent:"Moon Metropolis",level:1},{id:"Gamergate",parent:"Moon Metropolis",level:1},{id:"Elise Potaka",parent:"Joshua Goldberg",level:1},{id:"Luke McMahon",parent:"Joshua Goldberg",level:1},{id:"Pamela Geller",parent:"Australi Witness",level:1},{id:"James Taranto (WSJ)",parent:"Tanya Cohen",level:1},{id:"Amnesty International",parent:"Australi Witness",level:1},{id:"Junaid Thorne",parent:"Australi Witness",level:1},{id:"Mike Wendling",parent:"Moon Metropolis",level:1},{id:"Jim Berry",parent:"Australi Witness",level:1},{id:"Weev (Andrew Auernheimer)",parent:"Moon Metropolis",level:1},{id:"Ben Garrison",parent:"Joshua Goldberg",level:1},{id:"Bindi Cole",parent:"Australi Witness",level:1},{id:"Bill Leak",parent:"Australi Witness",level:1},{id:"Caitlin Roper",parent:"Joshua Goldberg",level:1},{id:"Chiara Zaffino",parent:"Moon Metropolis",level:1},{id:"Cyndi Lavrenci",parent:"Metropolis Forever",level:1},{id:"Grant Taylor",parent:"Metropolis Forever",level:1},{id:"Jilian C. York",parent:"Ryoko Tamada",level:1},{id:"Larry Pickering",parent:"Australi Witness",level:1},{id:"Tom Minear",parent:"Metropolis Forever",level:1},{id:"Alice Pooley",parent:"Moon Metropolis",level:1},{id:"Peter Wallace",parent:"Moon Metropolis",level:1},{id:"Rita Katz",parent:"Australi Witness",level:1},{id:"Rita Panahi",parent:"Moon Metropolis",level:1},{id:"Nikki",parent:"Moon Metropolis",level:1},{id:"Elon Musk",parent:"Emily Goldstein",level:1},{id:"AFP Federal Agent as Mohamadmo7",parent:"Australi Witness",level:1},{id:"FBI as Wilayahks",parent:"Australi Witness",level:1}],ae=[{source:"Australi Witness",target:"Elton Simpson",type:"Incitation terroriste",direction:"inbound",linkType:"direct",impact:10},{source:"Australi Witness",target:"Nadir Soofi",type:"Incitation terroriste",direction:"inbound",linkType:"direct",impact:10},{source:"Michael Slay",target:"Mariam Veiszadeh",type:"Ciblage & harcèlement",direction:"inbound",linkType:"indirect",impact:9},{source:"Tanya Cohen",target:"Mariam Veiszadeh",type:"Instrumentalisation",direction:"inbound",linkType:"direct",impact:0},{source:"Michael Slay",target:"Andrew Anglin",type:"Infiltration",direction:"inbound",linkType:"direct",impact:7},{source:"Moon Metropolis",target:"Milo Yiannopoulos",type:"Collaboration désinformation",direction:"inbound",linkType:"direct",impact:7},{source:"European88",target:"Reddit",type:"modération",direction:"inbound",linkType:"direct",impact:8},{source:"Joshua Goldberg",target:"Josh Bornstein",type:"Usurpation d'identité",direction:"inbound",linkType:"direct",impact:10},{source:"Joshua Goldberg",target:"Lindsay Campbell",type:"Enquête FBI",direction:"outbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Shaun King",type:"Désinformation médiatique",direction:"inbound",linkType:"indirect",impact:6},{source:"Moon Metropolis",target:"Gamergate",type:"Trolling politique",direction:"inbound",linkType:"indirect",impact:6},{source:"Joshua Goldberg",target:"Elise Potaka",type:"Impersonation",direction:"inbound",linkType:"direct",impact:9},{source:"Joshua Goldberg",target:"Luke McMahon",type:"Ennemi",direction:"outbound",linkType:"direct",impact:9},{source:"Australi Witness",target:"Pamela Geller",type:"Menace de mort",direction:"inbound",linkType:"indirect",impact:7},{source:"Tanya Cohen",target:"James Taranto (WSJ)",type:"Désinformation médiatique",direction:"inbound",linkType:"indirect",impact:5},{source:"Australi Witness",target:"Amnesty International",type:"désinformation",direction:"inbound",linkType:"direct",impact:7},{source:"Australi Witness",target:"Junaid Thorne",type:"Usurpation d'identité",direction:"inbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Mike Wendling",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Australi Witness",target:"Jim Berry",type:"Enquêteur",direction:"outbound",linkType:"direct",impact:8},{source:"Moon Metropolis",target:"Weev (Andrew Auernheimer)",type:"Collaboration désinformation",direction:"inbound",linkType:"direct",impact:6},{source:"Joshua Goldberg",target:"Ben Garrison",type:"impersonation",direction:"inbound",linkType:"direct",impact:6},{source:"Australi Witness",target:"Bindi Cole",type:"Ciblage & harcèlement",direction:"inbound",linkType:"direct",impact:4},{source:"Australi Witness",target:"Bill Leak",type:"Menace de mort",direction:"inbound",linkType:"direct",impact:5},{source:"Joshua Goldberg",target:"Caitlin Roper",type:"Impersonnation",direction:"inbound",linkType:"direct",impact:5},{source:"Moon Metropolis",target:"Chiara Zaffino",type:"manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Metropolis Forever",target:"Cyndi Lavrenci",type:"manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Metropolis Forever",target:"Grant Taylor",type:"Journaliste exposant Goldberg",direction:"inbound",linkType:"direct",impact:8},{source:"Ryoko Tamada",target:"Jilian C. York",type:"Manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Australi Witness",target:"Larry Pickering",type:"Menaces de mort",direction:"inbound",linkType:"direct",impact:5},{source:"Metropolis Forever",target:"Tom Minear",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Moon Metropolis",target:"Alice Pooley",type:"Manipulation",direction:"inbound",linkType:"direct",impact:6},{source:"Moon Metropolis",target:"Peter Wallace",type:"Désinformation médiatique",direction:"inbound",linkType:"direct",impact:8},{source:"Australi Witness",target:"Rita Katz",type:"Désinformation médiatique",direction:"inbound",linkType:"indirect",impact:9},{source:"Moon Metropolis",target:"Rita Panahi",type:"Manipulation",direction:"inbound",linkType:"direct",impact:7},{source:"Moon Metropolis",target:"Nikki",type:"amie",direction:"inbound",linkType:"direct",impact:5},{source:"Emily Goldstein",target:"Elon Musk",type:"Amplification de fake news",direction:"inbound",linkType:"indirect",impact:9},{source:"Australi Witness",target:"AFP Federal Agent as Mohamadmo7",type:"Infiltration",direction:"outbound",linkType:"direct",impact:0},{source:"Australi Witness",target:"FBI as Wilayahks",type:"Infiltration",direction:"outbound",linkType:"direct",impact:0}],W={nodes:oe,edges:ae};function se(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var $={},nt,vt;function le(){return vt||(vt=1,nt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),nt}var rt={},H={},kt;function O(){if(kt)return H;kt=1;let r;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return H.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},H.getSymbolTotalCodewords=function(n){return i[n]},H.getBCHDigit=function(o){let n=0;for(;o!==0;)n++,o>>>=1;return n},H.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},H.isKanjiModeEnabled=function(){return typeof r<"u"},H.toSJIS=function(n){return r(n)},H}var it={},Rt;function Bt(){return Rt||(Rt=1,function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+o)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,t){if(r.isValid(n))return n;try{return i(n)}catch{return t}}}(it)),it}var ot,Pt;function ce(){if(Pt)return ot;Pt=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(i){const o=Math.floor(i/8);return(this.buffer[o]>>>7-i%8&1)===1},put:function(i,o){for(let n=0;n<o;n++)this.putBit((i>>>o-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),i&&(this.buffer[o]|=128>>>this.length%8),this.length++}},ot=r,ot}var at,It;function ue(){if(It)return at;It=1;function r(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return r.prototype.set=function(i,o,n,t){const e=i*this.size+o;this.data[e]=n,t&&(this.reservedBit[e]=!0)},r.prototype.get=function(i,o){return this.data[i*this.size+o]},r.prototype.xor=function(i,o,n){this.data[i*this.size+o]^=n},r.prototype.isReserved=function(i,o){return this.reservedBit[i*this.size+o]},at=r,at}var st={},St;function de(){return St||(St=1,function(r){const i=O().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const t=Math.floor(n/7)+2,e=i(n),s=e===145?26:Math.ceil((e-13)/(2*t-2))*2,l=[e-7];for(let c=1;c<t-1;c++)l[c]=l[c-1]-s;return l.push(6),l.reverse()},r.getPositions=function(n){const t=[],e=r.getRowColCoords(n),s=e.length;for(let l=0;l<s;l++)for(let c=0;c<s;c++)l===0&&c===0||l===0&&c===s-1||l===s-1&&c===0||t.push([e[l],e[c]]);return t}}(st)),st}var lt={},Nt;function fe(){if(Nt)return lt;Nt=1;const r=O().getSymbolSize,i=7;return lt.getPositions=function(n){const t=r(n);return[[0,0],[t-i,0],[0,t-i]]},lt}var ct={},Lt;function ge(){return Lt||(Lt=1,function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};r.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},r.from=function(t){return r.isValid(t)?parseInt(t,10):void 0},r.getPenaltyN1=function(t){const e=t.size;let s=0,l=0,c=0,g=null,M=null;for(let B=0;B<e;B++){l=c=0,g=M=null;for(let E=0;E<e;E++){let p=t.get(B,E);p===g?l++:(l>=5&&(s+=i.N1+(l-5)),g=p,l=1),p=t.get(E,B),p===M?c++:(c>=5&&(s+=i.N1+(c-5)),M=p,c=1)}l>=5&&(s+=i.N1+(l-5)),c>=5&&(s+=i.N1+(c-5))}return s},r.getPenaltyN2=function(t){const e=t.size;let s=0;for(let l=0;l<e-1;l++)for(let c=0;c<e-1;c++){const g=t.get(l,c)+t.get(l,c+1)+t.get(l+1,c)+t.get(l+1,c+1);(g===4||g===0)&&s++}return s*i.N2},r.getPenaltyN3=function(t){const e=t.size;let s=0,l=0,c=0;for(let g=0;g<e;g++){l=c=0;for(let M=0;M<e;M++)l=l<<1&2047|t.get(g,M),M>=10&&(l===1488||l===93)&&s++,c=c<<1&2047|t.get(M,g),M>=10&&(c===1488||c===93)&&s++}return s*i.N3},r.getPenaltyN4=function(t){let e=0;const s=t.data.length;for(let c=0;c<s;c++)e+=t.data[c];return Math.abs(Math.ceil(e*100/s/5)-10)*i.N4};function o(n,t,e){switch(n){case r.Patterns.PATTERN000:return(t+e)%2===0;case r.Patterns.PATTERN001:return t%2===0;case r.Patterns.PATTERN010:return e%3===0;case r.Patterns.PATTERN011:return(t+e)%3===0;case r.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case r.Patterns.PATTERN101:return t*e%2+t*e%3===0;case r.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case r.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(t,e){const s=e.size;for(let l=0;l<s;l++)for(let c=0;c<s;c++)e.isReserved(c,l)||e.xor(c,l,o(t,c,l))},r.getBestMask=function(t,e){const s=Object.keys(r.Patterns).length;let l=0,c=1/0;for(let g=0;g<s;g++){e(g),r.applyMask(g,t);const M=r.getPenaltyN1(t)+r.getPenaltyN2(t)+r.getPenaltyN3(t)+r.getPenaltyN4(t);r.applyMask(g,t),M<c&&(c=M,l=g)}return l}}(ct)),ct}var tt={},Dt;function te(){if(Dt)return tt;Dt=1;const r=Bt(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return tt.getBlocksCount=function(t,e){switch(e){case r.L:return i[(t-1)*4+0];case r.M:return i[(t-1)*4+1];case r.Q:return i[(t-1)*4+2];case r.H:return i[(t-1)*4+3];default:return}},tt.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return o[(t-1)*4+0];case r.M:return o[(t-1)*4+1];case r.Q:return o[(t-1)*4+2];case r.H:return o[(t-1)*4+3];default:return}},tt}var ut={},Q={},qt;function he(){if(qt)return Q;qt=1;const r=new Uint8Array(512),i=new Uint8Array(256);return function(){let n=1;for(let t=0;t<255;t++)r[t]=n,i[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)r[t]=r[t-255]}(),Q.log=function(n){if(n<1)throw new Error("log("+n+")");return i[n]},Q.exp=function(n){return r[n]},Q.mul=function(n,t){return n===0||t===0?0:r[i[n]+i[t]]},Q}var xt;function pe(){return xt||(xt=1,function(r){const i=he();r.mul=function(n,t){const e=new Uint8Array(n.length+t.length-1);for(let s=0;s<n.length;s++)for(let l=0;l<t.length;l++)e[s+l]^=i.mul(n[s],t[l]);return e},r.mod=function(n,t){let e=new Uint8Array(n);for(;e.length-t.length>=0;){const s=e[0];for(let c=0;c<t.length;c++)e[c]^=i.mul(t[c],s);let l=0;for(;l<e.length&&e[l]===0;)l++;e=e.slice(l)}return e},r.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let e=0;e<n;e++)t=r.mul(t,new Uint8Array([1,i.exp(e)]));return t}}(ut)),ut}var dt,Ft;function ye(){if(Ft)return dt;Ft=1;const r=pe();function i(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(n.length+this.degree);t.set(n);const e=r.mod(t,this.genPoly),s=this.degree-e.length;if(s>0){const l=new Uint8Array(this.degree);return l.set(e,s),l}return e},dt=i,dt}var ft={},gt={},ht={},Ut;function ee(){return Ut||(Ut=1,ht.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),ht}var F={},_t;function ne(){if(_t)return F;_t=1;const r="[0-9]+",i="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;F.KANJI=new RegExp(o,"g"),F.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),F.BYTE=new RegExp(n,"g"),F.NUMERIC=new RegExp(r,"g"),F.ALPHANUMERIC=new RegExp(i,"g");const t=new RegExp("^"+o+"$"),e=new RegExp("^"+r+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return F.testKanji=function(c){return t.test(c)},F.testNumeric=function(c){return e.test(c)},F.testAlphanumeric=function(c){return s.test(c)},F}var zt;function K(){return zt||(zt=1,function(r){const i=ee(),o=ne();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(e,s){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!i.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?e.ccBits[0]:s<27?e.ccBits[1]:e.ccBits[2]},r.getBestModeForData=function(e){return o.testNumeric(e)?r.NUMERIC:o.testAlphanumeric(e)?r.ALPHANUMERIC:o.testKanji(e)?r.KANJI:r.BYTE},r.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},r.isValid=function(e){return e&&e.bit&&e.ccBits};function n(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+t)}}r.from=function(e,s){if(r.isValid(e))return e;try{return n(e)}catch{return s}}}(gt)),gt}var Jt;function me(){return Jt||(Jt=1,function(r){const i=O(),o=te(),n=Bt(),t=K(),e=ee(),s=7973,l=i.getBCHDigit(s);function c(E,p,k){for(let m=1;m<=40;m++)if(p<=r.getCapacity(m,k,E))return m}function g(E,p){return t.getCharCountIndicator(E,p)+4}function M(E,p){let k=0;return E.forEach(function(m){const P=g(m.mode,p);k+=P+m.getBitsLength()}),k}function B(E,p){for(let k=1;k<=40;k++)if(M(E,k)<=r.getCapacity(k,p,t.MIXED))return k}r.from=function(p,k){return e.isValid(p)?parseInt(p,10):k},r.getCapacity=function(p,k,m){if(!e.isValid(p))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=t.BYTE);const P=i.getSymbolTotalCodewords(p),v=o.getTotalCodewordsCount(p,k),R=(P-v)*8;if(m===t.MIXED)return R;const b=R-g(m,p);switch(m){case t.NUMERIC:return Math.floor(b/10*3);case t.ALPHANUMERIC:return Math.floor(b/11*2);case t.KANJI:return Math.floor(b/13);case t.BYTE:default:return Math.floor(b/8)}},r.getBestVersionForData=function(p,k){let m;const P=n.from(k,n.M);if(Array.isArray(p)){if(p.length>1)return B(p,P);if(p.length===0)return 1;m=p[0]}else m=p;return c(m.mode,m.getLength(),P)},r.getEncodedBits=function(p){if(!e.isValid(p)||p<7)throw new Error("Invalid QR Code version");let k=p<<12;for(;i.getBCHDigit(k)-l>=0;)k^=s<<i.getBCHDigit(k)-l;return p<<12|k}}(ft)),ft}var pt={},Gt;function we(){if(Gt)return pt;Gt=1;const r=O(),i=1335,o=21522,n=r.getBCHDigit(i);return pt.getEncodedBits=function(e,s){const l=e.bit<<3|s;let c=l<<10;for(;r.getBCHDigit(c)-n>=0;)c^=i<<r.getBCHDigit(c)-n;return(l<<10|c)^o},pt}var yt={},mt,Wt;function Me(){if(Wt)return mt;Wt=1;const r=K();function i(o){this.mode=r.NUMERIC,this.data=o.toString()}return i.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){let t,e,s;for(t=0;t+3<=this.data.length;t+=3)e=this.data.substr(t,3),s=parseInt(e,10),n.put(s,10);const l=this.data.length-t;l>0&&(e=this.data.substr(t),s=parseInt(e,10),n.put(s,l*3+1))},mt=i,mt}var wt,Ht;function Ce(){if(Ht)return wt;Ht=1;const r=K(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(n){this.mode=r.ALPHANUMERIC,this.data=n}return o.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let s=i.indexOf(this.data[e])*45;s+=i.indexOf(this.data[e+1]),t.put(s,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},wt=o,wt}var Mt,Vt;function Ee(){if(Vt)return Mt;Vt=1;const r=K();function i(o){this.mode=r.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return i.getBitsLength=function(n){return n*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(o){for(let n=0,t=this.data.length;n<t;n++)o.put(this.data[n],8)},Mt=i,Mt}var Ct,Ot;function Ae(){if(Ot)return Ct;Ot=1;const r=K(),i=O();function o(n){this.mode=r.KANJI,this.data=n}return o.getBitsLength=function(t){return t*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(n){let t;for(t=0;t<this.data.length;t++){let e=i.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),n.put(e,13)}},Ct=o,Ct}var Et={exports:{}},Kt;function be(){return Kt||(Kt=1,function(r){var i={single_source_shortest_paths:function(o,n,t){var e={},s={};s[n]=0;var l=i.PriorityQueue.make();l.push(n,0);for(var c,g,M,B,E,p,k,m,P;!l.empty();){c=l.pop(),g=c.value,B=c.cost,E=o[g]||{};for(M in E)E.hasOwnProperty(M)&&(p=E[M],k=B+p,m=s[M],P=typeof s[M]>"u",(P||m>k)&&(s[M]=k,l.push(M,k),e[M]=g))}if(typeof t<"u"&&typeof s[t]>"u"){var v=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(v)}return e},extract_shortest_path_from_predecessor_list:function(o,n){for(var t=[],e=n;e;)t.push(e),o[e],e=o[e];return t.reverse(),t},find_path:function(o,n,t){var e=i.single_source_shortest_paths(o,n,t);return i.extract_shortest_path_from_predecessor_list(e,t)},PriorityQueue:{make:function(o){var n=i.PriorityQueue,t={},e;o=o||{};for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t.queue=[],t.sorter=o.sorter||n.default_sorter,t},default_sorter:function(o,n){return o.cost-n.cost},push:function(o,n){var t={value:o,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=i}(Et)),Et.exports}var Yt;function Te(){return Yt||(Yt=1,function(r){const i=K(),o=Me(),n=Ce(),t=Ee(),e=Ae(),s=ne(),l=O(),c=be();function g(v){return unescape(encodeURIComponent(v)).length}function M(v,R,b){const T=[];let I;for(;(I=v.exec(b))!==null;)T.push({data:I[0],index:I.index,mode:R,length:I[0].length});return T}function B(v){const R=M(s.NUMERIC,i.NUMERIC,v),b=M(s.ALPHANUMERIC,i.ALPHANUMERIC,v);let T,I;return l.isKanjiModeEnabled()?(T=M(s.BYTE,i.BYTE,v),I=M(s.KANJI,i.KANJI,v)):(T=M(s.BYTE_KANJI,i.BYTE,v),I=[]),R.concat(b,T,I).sort(function(C,y){return C.index-y.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function E(v,R){switch(R){case i.NUMERIC:return o.getBitsLength(v);case i.ALPHANUMERIC:return n.getBitsLength(v);case i.KANJI:return e.getBitsLength(v);case i.BYTE:return t.getBitsLength(v)}}function p(v){return v.reduce(function(R,b){const T=R.length-1>=0?R[R.length-1]:null;return T&&T.mode===b.mode?(R[R.length-1].data+=b.data,R):(R.push(b),R)},[])}function k(v){const R=[];for(let b=0;b<v.length;b++){const T=v[b];switch(T.mode){case i.NUMERIC:R.push([T,{data:T.data,mode:i.ALPHANUMERIC,length:T.length},{data:T.data,mode:i.BYTE,length:T.length}]);break;case i.ALPHANUMERIC:R.push([T,{data:T.data,mode:i.BYTE,length:T.length}]);break;case i.KANJI:R.push([T,{data:T.data,mode:i.BYTE,length:g(T.data)}]);break;case i.BYTE:R.push([{data:T.data,mode:i.BYTE,length:g(T.data)}])}}return R}function m(v,R){const b={},T={start:{}};let I=["start"];for(let w=0;w<v.length;w++){const C=v[w],y=[];for(let a=0;a<C.length;a++){const d=C[a],u=""+w+a;y.push(u),b[u]={node:d,lastCount:0},T[u]={};for(let f=0;f<I.length;f++){const h=I[f];b[h]&&b[h].node.mode===d.mode?(T[h][u]=E(b[h].lastCount+d.length,d.mode)-E(b[h].lastCount,d.mode),b[h].lastCount+=d.length):(b[h]&&(b[h].lastCount=d.length),T[h][u]=E(d.length,d.mode)+4+i.getCharCountIndicator(d.mode,R))}}I=y}for(let w=0;w<I.length;w++)T[I[w]].end=0;return{map:T,table:b}}function P(v,R){let b;const T=i.getBestModeForData(v);if(b=i.from(R,T),b!==i.BYTE&&b.bit<T.bit)throw new Error('"'+v+'" cannot be encoded with mode '+i.toString(b)+`.
 Suggested mode is: `+i.toString(T));switch(b===i.KANJI&&!l.isKanjiModeEnabled()&&(b=i.BYTE),b){case i.NUMERIC:return new o(v);case i.ALPHANUMERIC:return new n(v);case i.KANJI:return new e(v);case i.BYTE:return new t(v)}}r.fromArray=function(R){return R.reduce(function(b,T){return typeof T=="string"?b.push(P(T,null)):T.data&&b.push(P(T.data,T.mode)),b},[])},r.fromString=function(R,b){const T=B(R,l.isKanjiModeEnabled()),I=k(T),w=m(I,b),C=c.find_path(w.map,"start","end"),y=[];for(let a=1;a<C.length-1;a++)y.push(w.table[C[a]].node);return r.fromArray(p(y))},r.rawSplit=function(R){return r.fromArray(B(R,l.isKanjiModeEnabled()))}}(yt)),yt}var jt;function Be(){if(jt)return rt;jt=1;const r=O(),i=Bt(),o=ce(),n=ue(),t=de(),e=fe(),s=ge(),l=te(),c=ye(),g=me(),M=we(),B=K(),E=Te();function p(w,C){const y=w.size,a=e.getPositions(C);for(let d=0;d<a.length;d++){const u=a[d][0],f=a[d][1];for(let h=-1;h<=7;h++)if(!(u+h<=-1||y<=u+h))for(let A=-1;A<=7;A++)f+A<=-1||y<=f+A||(h>=0&&h<=6&&(A===0||A===6)||A>=0&&A<=6&&(h===0||h===6)||h>=2&&h<=4&&A>=2&&A<=4?w.set(u+h,f+A,!0,!0):w.set(u+h,f+A,!1,!0))}}function k(w){const C=w.size;for(let y=8;y<C-8;y++){const a=y%2===0;w.set(y,6,a,!0),w.set(6,y,a,!0)}}function m(w,C){const y=t.getPositions(C);for(let a=0;a<y.length;a++){const d=y[a][0],u=y[a][1];for(let f=-2;f<=2;f++)for(let h=-2;h<=2;h++)f===-2||f===2||h===-2||h===2||f===0&&h===0?w.set(d+f,u+h,!0,!0):w.set(d+f,u+h,!1,!0)}}function P(w,C){const y=w.size,a=g.getEncodedBits(C);let d,u,f;for(let h=0;h<18;h++)d=Math.floor(h/3),u=h%3+y-8-3,f=(a>>h&1)===1,w.set(d,u,f,!0),w.set(u,d,f,!0)}function v(w,C,y){const a=w.size,d=M.getEncodedBits(C,y);let u,f;for(u=0;u<15;u++)f=(d>>u&1)===1,u<6?w.set(u,8,f,!0):u<8?w.set(u+1,8,f,!0):w.set(a-15+u,8,f,!0),u<8?w.set(8,a-u-1,f,!0):u<9?w.set(8,15-u-1+1,f,!0):w.set(8,15-u-1,f,!0);w.set(a-8,8,1,!0)}function R(w,C){const y=w.size;let a=-1,d=y-1,u=7,f=0;for(let h=y-1;h>0;h-=2)for(h===6&&h--;;){for(let A=0;A<2;A++)if(!w.isReserved(d,h-A)){let N=!1;f<C.length&&(N=(C[f]>>>u&1)===1),w.set(d,h-A,N),u--,u===-1&&(f++,u=7)}if(d+=a,d<0||y<=d){d-=a,a=-a;break}}}function b(w,C,y){const a=new o;y.forEach(function(A){a.put(A.mode.bit,4),a.put(A.getLength(),B.getCharCountIndicator(A.mode,w)),A.write(a)});const d=r.getSymbolTotalCodewords(w),u=l.getTotalCodewordsCount(w,C),f=(d-u)*8;for(a.getLengthInBits()+4<=f&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const h=(f-a.getLengthInBits())/8;for(let A=0;A<h;A++)a.put(A%2?17:236,8);return T(a,w,C)}function T(w,C,y){const a=r.getSymbolTotalCodewords(C),d=l.getTotalCodewordsCount(C,y),u=a-d,f=l.getBlocksCount(C,y),h=a%f,A=f-h,N=Math.floor(a/f),S=Math.floor(u/f),L=S+1,x=N-S,U=new c(x);let _=0;const J=new Array(f),Y=new Array(f);let G=0;const X=new Uint8Array(w.buffer);for(let j=0;j<f;j++){const et=j<A?S:L;J[j]=X.slice(_,_+et),Y[j]=U.encode(J[j]),_+=et,G=Math.max(G,et)}const V=new Uint8Array(a);let Z=0,D,z;for(D=0;D<G;D++)for(z=0;z<f;z++)D<J[z].length&&(V[Z++]=J[z][D]);for(D=0;D<x;D++)for(z=0;z<f;z++)V[Z++]=Y[z][D];return V}function I(w,C,y,a){let d;if(Array.isArray(w))d=E.fromArray(w);else if(typeof w=="string"){let N=C;if(!N){const S=E.rawSplit(w);N=g.getBestVersionForData(S,y)}d=E.fromString(w,N||40)}else throw new Error("Invalid data");const u=g.getBestVersionForData(d,y);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(!C)C=u;else if(C<u)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+u+`.
`);const f=b(C,y,d),h=r.getSymbolSize(C),A=new n(h);return p(A,C),k(A),m(A,C),v(A,y,0),C>=7&&P(A,C),R(A,f),isNaN(a)&&(a=s.getBestMask(A,v.bind(null,A,y))),s.applyMask(a,A),v(A,y,a),{modules:A,version:C,errorCorrectionLevel:y,maskPattern:a,segments:d}}return rt.create=function(C,y){if(typeof C>"u"||C==="")throw new Error("No input text");let a=i.M,d,u;return typeof y<"u"&&(a=i.from(y.errorCorrectionLevel,i.M),d=g.from(y.version),u=s.from(y.maskPattern),y.toSJISFunc&&r.setToSJISFunction(y.toSJISFunc)),I(C,d,a,u)},rt}var At={},bt={},$t;function re(){return $t||($t=1,function(r){function i(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let n=o.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+o);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(e){return[e,e]}))),n.length===6&&n.push("F","F");const t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,e=n.width&&n.width>=21?n.width:void 0,s=n.scale||4;return{width:e,scale:e?4:s,margin:t,color:{dark:i(n.color.dark||"#000000ff"),light:i(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale},r.getImageWidth=function(n,t){const e=r.getScale(n,t);return Math.floor((n+t.margin*2)*e)},r.qrToImageData=function(n,t,e){const s=t.modules.size,l=t.modules.data,c=r.getScale(s,e),g=Math.floor((s+e.margin*2)*c),M=e.margin*c,B=[e.color.light,e.color.dark];for(let E=0;E<g;E++)for(let p=0;p<g;p++){let k=(E*g+p)*4,m=e.color.light;if(E>=M&&p>=M&&E<g-M&&p<g-M){const P=Math.floor((E-M)/c),v=Math.floor((p-M)/c);m=B[l[P*s+v]?1:0]}n[k++]=m.r,n[k++]=m.g,n[k++]=m.b,n[k]=m.a}}}(bt)),bt}var Qt;function ve(){return Qt||(Qt=1,function(r){const i=re();function o(t,e,s){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=s,e.width=s,e.style.height=s+"px",e.style.width=s+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(e,s,l){let c=l,g=s;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),s||(g=n()),c=i.getOptions(c);const M=i.getImageWidth(e.modules.size,c),B=g.getContext("2d"),E=B.createImageData(M,M);return i.qrToImageData(E.data,e,c),o(B,g,M),B.putImageData(E,0,0),g},r.renderToDataURL=function(e,s,l){let c=l;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),c||(c={});const g=r.render(e,s,c),M=c.type||"image/png",B=c.rendererOpts||{};return g.toDataURL(M,B.quality)}}(At)),At}var Tt={},Xt;function ke(){if(Xt)return Tt;Xt=1;const r=re();function i(t,e){const s=t.a/255,l=e+'="'+t.hex+'"';return s<1?l+" "+e+'-opacity="'+s.toFixed(2).slice(1)+'"':l}function o(t,e,s){let l=t+e;return typeof s<"u"&&(l+=" "+s),l}function n(t,e,s){let l="",c=0,g=!1,M=0;for(let B=0;B<t.length;B++){const E=Math.floor(B%e),p=Math.floor(B/e);!E&&!g&&(g=!0),t[B]?(M++,B>0&&E>0&&t[B-1]||(l+=g?o("M",E+s,.5+p+s):o("m",c,0),c=0,g=!1),E+1<e&&t[B+1]||(l+=o("h",M),M=0)):c++}return l}return Tt.render=function(e,s,l){const c=r.getOptions(s),g=e.modules.size,M=e.modules.data,B=g+c.margin*2,E=c.color.light.a?"<path "+i(c.color.light,"fill")+' d="M0 0h'+B+"v"+B+'H0z"/>':"",p="<path "+i(c.color.dark,"stroke")+' d="'+n(M,g,c.margin)+'"/>',k='viewBox="0 0 '+B+" "+B+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+k+' shape-rendering="crispEdges">'+E+p+`</svg>
`;return typeof l=="function"&&l(null,P),P},Tt}var Zt;function Re(){if(Zt)return $;Zt=1;const r=le(),i=Be(),o=ve(),n=ke();function t(e,s,l,c,g){const M=[].slice.call(arguments,1),B=M.length,E=typeof M[B-1]=="function";if(!E&&!r())throw new Error("Callback required as last argument");if(E){if(B<2)throw new Error("Too few arguments provided");B===2?(g=l,l=s,s=c=void 0):B===3&&(s.getContext&&typeof g>"u"?(g=c,c=void 0):(g=c,c=l,l=s,s=void 0))}else{if(B<1)throw new Error("Too few arguments provided");return B===1?(l=s,s=c=void 0):B===2&&!s.getContext&&(c=l,l=s,s=void 0),new Promise(function(p,k){try{const m=i.create(l,c);p(e(m,s,c))}catch(m){k(m)}})}try{const p=i.create(l,c);g(null,e(p,s,c))}catch(p){g(p)}}return $.create=i.create,$.toCanvas=t.bind(null,o.render),$.toDataURL=t.bind(null,o.renderToDataURL),$.toString=t.bind(null,function(e,s,l){return n.render(e,l)}),$}var Pe=Re();const Ie=se(Pe);async function Se(r){const i=window.location.hostname.includes("github.io"),o=i?"https://joshua-arvin-lat.github.io/joshua-liens-actants/":window.location.href;console.log("URL for QR code:",o),console.log("isGitHubPages:",i),console.log("hostname:",window.location.hostname);try{const n=await Ie.toDataURL(o,{width:100,height:100,margin:1,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"H"}),t=r.append("g").attr("class","qr-code").attr("transform","translate(20, 20)");t.append("rect").attr("width",100).attr("height",100).attr("fill","white"),t.append("image").attr("href",n).attr("width",100).attr("height",100)}catch(n){console.error("Erreur lors de la génération du QR code:",n)}}document.addEventListener("DOMContentLoaded",async()=>{const r=document.getElementById("graph"),i=r.clientWidth,o=r.clientHeight,n=window.innerWidth<768,t=n?20:30,e=q.scaleLinear().domain([0,1,2,3,4,5,6,7,8,9,10]).range(["red","#f1f1f1","#dedede","#c6c6c6","#a7a7a7","#878787","#686868","#474747","#222222","#000000"]),s=q.select("#graph").append("svg").attr("width",i).attr("height",o).style("background","#F2EFDD");await Se(s);const l=s.append("g").attr("class","legend").attr("transform",`translate(${i-(n?150:200)}, ${o-(n?100:120)}) ${n?"scale(0.8)":""}`);l.append("line").attr("x1",10).attr("y1",20).attr("x2",50).attr("y2",20).attr("stroke","#666").attr("stroke-width",1),l.append("line").attr("x1",10).attr("y1",40).attr("x2",50).attr("y2",40).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","5,5"),l.append("text").attr("x",60).attr("y",23).text("Lien direct").style("font-size","12px").style("font-family","Arial, sans-serif"),l.append("text").attr("x",60).attr("y",43).text("Lien indirect").style("font-size","12px").style("font-family","Arial, sans-serif"),l.append("text").attr("x",10).attr("y",70).text("Impact médiatique :").style("font-size","12px").style("font-family","Arial, sans-serif");const c=100,g=10;l.append("linearGradient").attr("id","legend-gradient").attr("x1","0%").attr("x2","100%").selectAll("stop").data([{offset:"0%",color:e(0)},{offset:"10%",color:e(1)},{offset:"20%",color:e(2)},{offset:"30%",color:e(3)},{offset:"40%",color:e(4)},{offset:"50%",color:e(5)},{offset:"60%",color:e(6)},{offset:"70%",color:e(7)},{offset:"80%",color:e(8)},{offset:"90%",color:e(9)},{offset:"100%",color:e(10)}]).join("stop").attr("offset",a=>a.offset).attr("stop-color",a=>a.color),l.append("rect").attr("x",10).attr("y",80).attr("width",c).attr("height",g).style("fill","url(#legend-gradient)"),l.append("text").attr("x",10).attr("y",100).text("NR").style("font-size","10px").style("font-family","Arial, sans-serif").style("fill","red"),l.append("text").attr("x",98).attr("y",100).text("10").style("font-size","10px").style("font-family","Arial, sans-serif"),s.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#666");const B=s.append("g").attr("class","text-layer").style("z-index","1"),E=s.append("g").attr("class","text-layer").style("z-index","1"),p=s.append("g").attr("class","link-layer").style("z-index","2"),k=s.append("g").attr("class","node-layer").style("z-index","3"),m=q.forceSimulation(W.nodes).force("link",q.forceLink(W.edges).id(a=>a.id).distance(a=>(n?100:150)+(a.impact||0)*10).strength(.7)).force("charge",q.forceManyBody().strength(a=>a.level===0?-800:-400)).force("center",q.forceCenter(i/2,o/2)).force("x",q.forceX(i/2).strength(.1)).force("y",q.forceY(o/2).strength(.1)).force("collision",q.forceCollide().radius(t*1.5)),P=p.selectAll("path").data(W.edges).join("path").attr("class","link").attr("stroke",a=>e(a.impact||0)).attr("stroke-width",1).attr("stroke-dasharray",a=>a.linkType==="direct"?null:"5,5").attr("marker-end","url(#arrowhead)").attr("fill","none"),v=E.selectAll("text").data(W.edges).join("text").text(a=>a.type).attr("text-anchor","left").attr("dominant-baseline","middle").style("font-size","10px").style("font-family","Arial, sans-serif").style("pointer-events","none").style("user-select","none").style("fill","#333").call(T,t*2),R=B.selectAll("text").data(W.nodes).join("text").text(a=>a.id).attr("x",a=>a.x).attr("y",a=>a.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",a=>a.level===0?"12px":"10px").style("font-family","Arial, sans-serif").style("pointer-events","none").style("user-select","none").style("fill","#333").call(T,t*2),b=k.selectAll("g").data(W.nodes).join("g").style("pointer-events","all").call(q.drag().on("start",(a,d)=>{a.active||m.alphaTarget(.3).restart(),d.fx=d.x,d.fy=d.y}).on("drag",(a,d)=>{d.fx=a.x,d.fy=a.y}).on("end",(a,d)=>{a.active||m.alphaTarget(0),d.fx=null,d.fy=null})).on("mouseover",I).on("mouseout",w);b.append("circle").attr("r",a=>a.level===0?t*1.2:t).attr("fill","none").attr("stroke",a=>a.level===0?"#666":"#999").attr("stroke-width",a=>a.level===0?2:1).style("pointer-events","all");function T(a,d){a.each(function(){const u=q.select(this),f=u.text().split(/\s+/).reverse(),h=1.2,A=0,N=0;let S,L=[],x=0,U=u.text(null).append("tspan").attr("x",0).attr("y",A).attr("dy",`${N}em`);for(;S=f.pop();)L.push(S),U.text(L.join(" ")),U.node().getComputedTextLength()>d&&(L.pop(),U.text(L.join(" ")),L=[S],U=u.append("tspan").attr("x",0).attr("y",A).attr("dy",`${++x*h}em`).text(S));const _=u.selectAll("tspan"),G=-((_.size()-1)*h)/2;_.attr("dy",(X,V)=>`${G+V*h}em`)})}function I(a,d){const u=new Set;u.add(d.id),W.edges.forEach(f=>{f.source.id===d.id&&u.add(f.target.id),f.target.id===d.id&&u.add(f.source.id)}),b.transition().duration(300).style("opacity",f=>u.has(f.id)?1:.1),R.transition().duration(300).style("opacity",f=>u.has(f.id)?1:.1),v.transition().duration(300).style("opacity",f=>u.has(f.source.id)&&u.has(f.target.id)?1:.1),P.transition().duration(300).style("opacity",f=>u.has(f.source.id)&&u.has(f.target.id)?1:.1)}function w(){b.transition().duration(300).style("opacity",1),R.transition().duration(300).style("opacity",1),P.transition().duration(300).style("opacity",1)}m.on("tick",()=>{W.nodes.forEach(a=>{const d=a.level===0?t*1.2:t;a.x=Math.max(d,Math.min(i-d,a.x)),a.y=Math.max(d,Math.min(o-d,a.y))}),P.attr("d",a=>{const d=a.target.x-a.source.x,u=a.target.y-a.source.y,f=Math.sqrt(d*d+u*u),h=Math.atan2(u,d),A=a.source.level===0?t*1.2:t,N=a.target.level===0?t*1.2:t,S=-Math.sin(h),L=Math.cos(h),x=15,U=a.source.x+A*Math.cos(h)+S*x,_=a.source.y+A*Math.sin(h)+L*x,J=15,Y=a.target.x-(N+J)*Math.cos(h)+S*x,G=a.target.y-(N+J)*Math.sin(h)+L*x,X=.2,V=(U+Y)/2,Z=(_+G)/2,D=f*X;return`M${U},${_} Q${V+S*D},${Z+L*D} ${Y},${G}`}),v.attr("transform",a=>{const d=a.target.x-a.source.x,u=a.target.y-a.source.y,f=Math.atan2(u,d)*(180/Math.PI),h=(a.source.x+a.target.x)/2,A=(a.source.y+a.target.y)/2,N=-Math.sin(f*Math.PI/180),S=Math.cos(f*Math.PI/180),L=20,x=f>90||f<-90?f+180:f;return`translate(${h+N*L},${A+S*L}) rotate(${x})`}),b.attr("transform",a=>`translate(${a.x},${a.y})`),R.attr("transform",a=>`translate(${a.x},${a.y})`)});const C=new ie({title:"Graph Controls"});C.addButton({title:"Download SVG"}).on("click",()=>{const d=new XMLSerializer().serializeToString(s.node()),u=document.createElement("a"),f=new Blob([d],{type:"image/svg+xml;charset=utf-8"});u.href=URL.createObjectURL(f),u.download="visualization.svg",document.body.appendChild(u),u.click(),document.body.removeChild(u)});const y={linkDistance:150,linkStrength:.7,charge:-500,collisionRadius:80};C.addBinding(y,"linkDistance",{min:50,max:300,step:1}).on("change",a=>{m.force("link").distance(a.value),m.alpha(.3).restart()}),C.addBinding(y,"linkStrength",{min:0,max:2,step:.1}).on("change",a=>{m.force("link").strength(a.value),m.alpha(.3).restart()}),C.addBinding(y,"charge",{min:-1e3,max:100,step:10}).on("change",a=>{m.force("charge").strength(a.value),m.alpha(.3).restart()}),C.addBinding(y,"collisionRadius",{min:30,max:150,step:1}).on("change",a=>{m.force("collision").radius(a.value),m.alpha(.3).restart()}),C.addButton({title:"Reset Simulation"}).on("click",()=>{Object.assign(y,{linkDistance:150,linkStrength:.7,charge:-500,collisionRadius:80}),m.force("link").distance(y.linkDistance),m.force("link").strength(y.linkStrength),m.force("charge").strength(y.charge),m.force("collision").radius(y.collisionRadius),m.alpha(1).restart(),C.refresh()}),window.addEventListener("resize",()=>{const a=r.clientWidth,d=r.clientHeight,u=a<768;s.attr("width",a).attr("height",d),l.attr("transform",`translate(${a-(u?150:200)}, ${d-(u?100:120)}) ${u?"scale(0.8)":""}`),m.force("center",q.forceCenter(a/2,d/2)).force("link").distance(f=>(u?100:150)+(f.impact||0)*10),m.alpha(.3).restart()})});
